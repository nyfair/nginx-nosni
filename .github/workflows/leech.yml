name: leech

on:
  push:
    paths:
    - '.github/workflows/leech.yml'

jobs:
  build:
    strategy:
      fail-fast: false
      matrix:
        url:
        - https://mega.nz/file/fEcDnL4b#jXB_GeGPlqjKDytSxOwW6sGgCQHR4LDtHZGvJBXJIW4
        - https://mega.nz/file/iANTgawQ#WZlvoXkSNDWCLdEVzL4pbf3rHrEkOMPQCMCgonu_ee0
        - https://mega.nz/file/SMdTVAzI#aTNIFRVZrj5umpxhHoxVgjxM7IScJTB_jmwnwpTGj6I
        - https://mega.nz/file/yFFnjb4a#Fe0LvMCclMo32Xtw26aVxjjFrmq86DM0Zpha3kPmLr4
        - https://mega.nz/file/DY1ViKSJ#tt0Lsj5fTUtQH5zIVWTp6gLCxD4KjRjPD3WyvejgdOE
        - https://mega.nz/file/GccTTJrQ#nnLQdp1SJOl_aeGJCL1VZSuelvDbMf9tnW4vXYYwtH4
        - https://mega.nz/file/DA1AHSBA#WJzFkSTMH_4k2SBpjjlpyVeAivxahyFE2VmfZGgd-CU
        - https://mega.nz/file/HQtFECgK#Y-36oILbn9zmsBpxM34tX9TIDKs93fOBKg2puQ4Yk8g
        - https://mega.nz/file/eY0WTbgR#ClwhsUcrop7apMVA665MMYyIaSk1AW2n3R0VlUTlNls
        - https://mega.nz/file/TZETBD7J#Zntf3mZbr9-0DqLJLlbeBAixY9mMM8UF76DoJ8SWPV8
        - https://mega.nz/file/3JUCzQ6Y#z4B5OJGn5GaNUAE6YxrIwueKClGS4IDKclZC4BoM-3E
        - https://mega.nz/file/HZtQkAqT#3wXT0QH4_aa6peNWZVpaejrfa-mI0SheKOyZAnohvxQ
        - https://mega.nz/file/rI0Xhb4Y#MsbN8VyFGJ82kDwwAi3VvTEp3uhCQFTrJrotc9C9Sxo
        - https://mega.nz/file/WZtlgTYK#I44NzhZyXkIqFXWS60QyGuacwufvn9BmYUjNR5c0FIc
        - https://mega.nz/file/GAsnDADB#sKTfO-SG5NLGy10b-ZDdkOje0biZH55qG2V2zP571vQ
        - https://mega.nz/file/nUcUDKBa#B-N99agesg9BGf6LRxJLdlmzzX_Pg-ndgLJ9y7MtbXM
        - https://mega.nz/file/6c1VmSqC#n0lvbBjugrs4f6n4vO6lck8RDsj-wsVl6EEdZzH_Txw
        - https://mega.nz/file/7AshQKxC#9OJ7Q4xe0pvw27h1kktnLfMibkHq0VBQ2H6zeJtYnI8
        - https://mega.nz/file/eZ1kiQJQ#bDWhjPV8pDQpyDdhQCiQum_Hks-Z3CC80wesORZ6L-8
        - https://mega.nz/file/LJUT3SiI#LgC3XJcKTT3N9r9ZfSb5qyxEz5JnMLUi0xcLJjG6KbM
        - https://mega.nz/file/GdsxRSoC#zNlEZboSCEQG4XdKUgH2V_EV5nbUdLGFiihI1FQLdIQ
        - https://mega.nz/file/rEVXwYjY#Ef26owg_uB7Y_SLYAoefCR6H2yLBGpRWAosLYz6sPe4
        - https://mega.nz/file/qUVF1JaA#YnngHbXsX8HhSdw1N2-hDO_CMnvRzUwUXZyYWfz_jL8
        - https://mega.nz/file/yV0nHDTJ#GF8qU7W_kzuH7vnwz-aE_t2Z10tyaq2_LBFrpUL7l1Q
        - https://mega.nz/file/vFcn2boK#__UU-tLzzwY5-dnYxqLyqVq7VyEPPUNV0N2kOq566KI
        - https://mega.nz/file/7REA3bZS#t5ait1lWAKYR1X5YFoxr3s2MubcNWvlgBvPXLjNI4Og
        - https://mega.nz/file/Kc1AzRaR#8TUooRksE2CzFNv6qAQdW7KWToBnxhnkzVWDS-5htTs
        - https://mega.nz/file/uEkXWaII#sJeT-VRdwWcGVP2oPCXd2jNmnU7FhQBh3bZXT-D3drU
        - https://mega.nz/file/rBFUARYJ#y0Z_qcTK3vIgocfsN5wgTxl-KGdnhdTKH_1YWXbLrRA
        - https://mega.nz/file/SccSyCaa#zeQ_YOhH1mweItjU06G7fzILKvEzw0FObHvv1noX03Q
        - https://mega.nz/file/3EFgDIzY#gohFG5rYfszpib6pdGrAQmfuDvI5lQFvR123Vo4-r-c
        - https://mega.nz/file/HBcSnTjQ#wq0fs3b3gc4uQhF4RsftUlgV4FEoSm7yvSiTPnEEKoI
        - https://mega.nz/file/yE8jVbBK#yEyy2a5sYGKjiGyl2I-oq5VW1ef1syH1Nis5pBW1vyY
        - https://mega.nz/file/Hd8QBCIa#3Z8lykxdyGdmFNEqHKhKoN2FkCpFc-CGh0nq7ghYK5o
        - https://mega.nz/file/aMFygISR#fUWKZRyMBBVT7K40HGPYv_sVHz5PmQgGlNlxEVy2G2M
        - https://mega.nz/file/yc8H2BxS#7JvQsE2HF-9Su8Hrqc4Mc9w3AXBWLiKLVr-YEXQTSys
        - https://mega.nz/file/XIlXVDjb#0gCN03HiLDDzKAD3dC_PD_YZCnW5MSDLcFYzTvSmVU8
    runs-on: ubuntu-latest
    steps:
    - uses: actions/cache@v3
      id: cache
      with:
        path: megatools-1.11.1.20230212-linux-x86_64
        key: megatools-1.11.1.20230212-linux-x86_64
    - name: Mega
      if: steps.cache.outputs.cache-hit != 'true'
      run: |
        curl -OL https://megatools.megous.com/builds/builds/megatools-1.11.1.20230212-linux-x86_64.tar.gz
        tar xvf *.gz
    - name: Leech
      run: |
        mkdir leech
        megatools*/megatools dl --path leech/ ${{ matrix.url }}
        cd leech
        find . -size +2G -exec split -b 1G --numeric-suffixes=1 {} {}.0 \;
        find . -size +2G -exec rm {} \;
    - name: Upload
      uses: svenstaro/upload-release-action@v2
      with:
        repo_token: ${{ secrets.GITHUB_TOKEN }}
        file: leech/*
        tag: latest
        overwrite: true
        file_glob: true
