name: leech

on:
  push:
    paths:
    - '.github/workflows/leech.yml'

jobs:
  build:
    strategy:
      fail-fast: false
      matrix:
        url:
        - https://mega.nz/folder/wlQVXCAR#6eT2dTvqOS1G8o85-HygpQ
        - https://mega.nz/file/JZFxVSqa#I3Mz2-XOk_bZatVFqPDFofRk2RA-y_i62GqBIHZ14ck
        - https://mega.nz/file/RBkWjLya#irweWa6UHn1YtCMPcWrL1Mzwx6VruDZptibQg_k4NKM
        - https://mega.nz/file/MU0yyToL#LP8934VIQJa0lM2RKWs0lEfpDRW3v59LRNx6Cfe2FKQ
        - https://mega.nz/file/ht0XxIiC#qj5bUAfZtMxHQ0XxB5JuxqnoW_ABJ-A6sE96yfruLO8
        - https://mega.nz/file/xR82WbSS#O7VUY0GjXDils8W3Moh8zkt34PpHxqNj2-O1435zsX4
        - https://mega.nz/file/QZ0wgZKB#pp_ZgRCEKT61J4IcPTA6iAtNDLQQYT7EBk137rhvAZ4
        - https://mega.nz/file/BYdDjCJQ#o8h7TfLdKhN5hAGm8k8-L4vAnvdSRrDigQNVhJFKiCI
        - https://mega.nz/file/tANTSaBa#UwlHGbMnfPCXc6GXYwo2eYNFV_IjxD8OvPx3VvYjOxU
        - https://mega.nz/file/wk1VXKJL#z3ROWgN74XKRCsoL-CL67eyN5ic8-AjutMKe-DtSNHw
        - https://mega.nz/file/sstz3IhC#3V5LJZaU-1UfKmzmRQzfWk1rjWOUM-IkOYQRT1KLJd0
        - https://mega.nz/file/I81EkLaD#grcr6DE0iFvPwYAnye5rcRWCW8zDUHbq8oe3TgSztJg
        - https://mega.nz/file/Il0iiDzC#nmd7ajhhJPfM_0MrroObbZIxUHS45Dk9aSR0x3gHzL4
        - https://mega.nz/file/gp8nCKzI#p3uZ-6b6ETjNT0uiIZUUNXZkI-yhy63o_cbAkUizCCo
        - https://mega.nz/file/Uw8T0CxZ#9xnS3WmVBqb-qUj4CO2hC2KfHG2Cn8iVvEvrfN6Rbro
        - https://mega.nz/file/9k80DLDR#4JqV59EhpCQ3eP65Z6i_pwXEXNE6yOtxuBamnOKyoRw
        - https://mega.nz/file/F89iXJxS#TwDSDAz3IxbIAPyborBCbfq9IBzWfgjX1rHSlDWJu7s
        - https://mega.nz/file/R19gGBYb#aB4XYUm2inlssjXSPnQXoLqkYTxoPokneJT5EatJAF4
        - https://mega.nz/file/Y9kwhZyL#KmaoMeTNT6jpNAYVDGrj_GBZXNKdgUdfz0qM3HjPb1g
        - https://mega.nz/file/A49W1BqL#UBz7gu5G_8zHXlQBBfwlGTzjoJdS5M8hmJMkHkxSjoU
        - https://mega.nz/file/h082zZ5K#Sm0ydnO6pgVuZ-mzWbA4MFv0TjKELfT5BUVfIrtXS4s
        - https://mega.nz/file/lhkiiR4K#Odn87B9uZB8i6XdXSKSnI9uGy1VS4wtmFZ-png_Pm_4
        - https://mega.nz/file/MgskwLxD#5R2BAkMWnvQ_EyF5KzNKC_C3seoLqxLm88pxknKcQtw
        - https://mega.nz/file/0hlCBTQY#0NhOKEpjhUSu-83afMAu07vbs9mN0pn1Kiodw9N37BM
        - https://mega.nz/file/IpoSlDLA#PS6rXLnB3rRlLgNBm1Lw0rQC_XOK1wPeVM-QI0CdeDA
        - https://mega.nz/file/B4hQ2b5Q#hXsYvzhOTIn7lVTK3WFox64KA9Aibn8-RRxP-OW4XfI
        - https://mega.nz/file/Ys9UCT4C#csZrUUwiusM4Swbc8TFeH3IkGVZ-UbbELZpxbmlVkOg
        - https://mega.nz/file/Bk9ABBbZ#5bIivk_BZYIumeA_GDTRINunZ8KvFRWhy6Cfva6H2u0
        - https://mega.nz/file/stlAlZzI#4HclfhbVhYxYwKU0n5LTEjg0HL7ysrMSXPP2MCDvRxU
        - https://mega.nz/file/ooswhTBR#z5W6thX7SIKCql_w0SSYR3LPEfHjJSlgjuzUUPnpi5k
        - https://mega.nz/file/Yt1EARCT#wKJ9xGBbkwMQPBGpevyrs5tFmeiLxdKj732GRnwI1DY
        - https://mega.nz/file/t18ClJha#i_VLtaBm0bSeNU15_yr_ERUuFu9P1IidltceZe8lgmo
        - https://mega.nz/file/wslBWCLI#lnPGCG2ydX5wb2QS9_YvtCLVzTYjgy2A6nh7wmhfAbg
        - https://mega.nz/file/cwtXmS7b#uCzk1qWW8Rt9u4lmQJ3h1xTUnlPOi2PFG-esY4vzrGk
        - https://mega.nz/file/ks0XiCTb#AdGKsc78KaM8AYzqXlKVmyQdKLYTj3fLC3YiublURaQ
        - https://mega.nz/file/Vl1CWbKA#VsR88gC2-aBr-ThkAXFVjD7bL6KZzrq568IR5fq5pLo
        - https://mega.nz/file/ll1khRCC#rLNON2jkNIQWqH1P_9Cgw5eLGJgHBf9TPhBeaGGBlmw
        - https://mega.nz/file/QtlyVZZD#OUsERQ9jb4BjAEhPzPjcUyyFxn58QGeBM1QCK3ljpHQ
        - https://mega.nz/file/1ttkkBpA#8YfCIvh75D60ZJ7NSdyzVs7FpokYSJijOCfmElaXuK4
        - https://mega.nz/file/B8slSaJa#PLTbMM7JZ_zQj7X9Qwd4VoWdSwBVEfdL5avdXWFh5lc
        - https://mega.nz/file/sxlFTC4L#wS-6SwyTLxh1jIB_TPhiGKcd7AB4aIVatWbOsbGS7SA
        - https://mega.nz/file/QklVXIKA#10OIFD4cjp7cX_apSd8Weh-w4iksq8TKExy7KAU0Fzw
        - https://mega.nz/file/Bs1CQJwR#fWVO5wnxJUzAGwb60O-JvSwx-bqIS4Fj0igkdT2ouKE
        - https://mega.nz/file/rPpCQY5Q#Qxn0RMUvYWvbeJzLY2VzDwFpzXlgzJqTIZhbEECvPL4
        - https://mega.nz/file/3Do01IBa#Fz6_Sq3B4tC1mLzBDz2T-fovKzMnTm0A52Nn1yJGdc0
        - https://mega.nz/file/3HAA0LjT#tx5WC8fyR3s7UI1y2VfKlcYnjLjMjPRXJi5fft7tiqE
        - https://mega.nz/file/rKhmRDQY#QFGiZbpDBaIlKORr81nNIqOXlf97JUELrubMs_ETH6Q
        - https://mega.nz/file/XGAShDbI#ODaBS_Hb1diBemOjz6Wez4S-oVPL7SCI9eK8o8ocfP0
        - https://mega.nz/file/rbQSnBrD#pBDctspSlRScIUXFFgkmDjEmE2dZiKLsqj3aIv0XyIU
        - https://mega.nz/file/XfQkjDzT#IoVzwrl3GNqukGBkmXwkh4Bo1UyKoAHq3nRMj66jJO8
        - https://mega.nz/file/zaQ0GRRY#MNJxo3kB9mDgCmiGif8xGznkOWbZxMLK7GHndPTjtZI
        - https://mega.nz/file/nSIwkLQS#1m5rryKRv-ZSPdWA-mweb-jjhnFUebv2ikiMJRJz3Qs
        - https://mega.nz/file/o5UQmD4C#0QoNfBTCyBfdmPv-h2fv_znUtWArPA3_YUEVDVxO72c
        - https://mega.nz/file/sg0DCYbb#k1evhLaN8Y-i1BfcR7KcamhQW9AoWqtbkHvthzW2fPQ
        - https://mega.nz/file/J1NyzTrL#XST6Q3CXZrMVQJc59idnoRziGvJNBZ_qmeuASOuadwc
        - https://mega.nz/file/BwFwBZ5D#uOKEIbOQBior6vT0ggKFjCskp6Z8wL1HzHOy3rSC1WE
        - https://mega.nz/file/d4VgkZyJ#gWzZzdlFyCJsefrgXHvsCM_Nx8v2xIMRyNQyiS0bBu0
        - https://mega.nz/file/kkkDiApB#NALfbQ1CQxFgkbJgAi1_pkPAEFCyXPg76NXWig68j4I
        - https://mega.nz/file/900kTbKT#_V39mRBnn3V4BjPvFKt6Mr-cPvpUNUcS6DF5ZRxZQI8
        - https://mega.nz/file/2KwX1QTR#EdXWYJQgXyA-rmghdsMDyVWWoOw1h9OoeEYBA7EFWXo
        - https://mega.nz/file/qbgXkAzQ#lMAmbDohQ0zNRMq4PX9-pu0T3bsOLs4hvgSUgjuK6bg
        - https://mega.nz/file/yf4kSSCS#VuqmBpzIZTl_YDokkWhY7pv3bEZHpgi4jdjnrMfa3MI
        - https://mega.nz/file/3H4gBSQK#ovvsEu9hRllayGhgYq5EdTlrqzu7YuDRlRvzWLRE4Qk
        - https://mega.nz/file/DDYyBboR#hQ7F0j5UF0wz3WcPfDKyCBCl6wywZp8HaMc-RNQCngU
        - https://mega.nz/file/rGBWQLLT#xJ2ASM6eaBo4njCld2yvx43ZO4p4QrQzIf5WqE1yR7w
        - https://mega.nz/file/bCoAnJwB#YvxeH7Ss_3Tow7yPQuxO4jLq-1hLDoeo9uyJK_-Z55U
        - https://mega.nz/file/iLJ0UDCb#HLWKrAi2n-75bncLCUiH9ZmtkBXzOvglvay0NZB3pqA
        - https://mega.nz/file/GboAySJT#rixevW9WP5g-HGBAXUBxdZo5bYMWgmZaYxbiy0UrKDo
    runs-on: ubuntu-latest
    steps:
    - uses: actions/cache@v2
      id: cache
      with:
        path: megatools-1.11.0-git-20211030-linux-x86_64
        key: megatools-1.11.0-git-20211030-linux-x86_64
    - name: Mega
      if: steps.cache.outputs.cache-hit != 'true'
      run: |
        curl -OL https://megatools.megous.com/builds/experimental/megatools-1.11.0-git-20211030-linux-x86_64.tar.gz
        tar xvf *.gz
    - name: Leech
      run: |
        mkdir leech
        megatools*/megatools dl --path leech/ ${{ matrix.url }}
        cd leech
        find . -size +2G -exec split -b 1G --numeric-suffixes=1 {} {}.0 \;
        find . -size +2G -exec rm {} \;
    - name: Upload
      uses: svenstaro/upload-release-action@v2
      with:
        repo_token: ${{ secrets.GITHUB_TOKEN }}
        file: leech/*
        tag: latest
        overwrite: true
        file_glob: true
