name: leech

on:
  push:
    paths:
    - '.github/workflows/leech.yml'

jobs:
  build:
    strategy:
      fail-fast: false
      matrix:
        url:
        - https://mega.nz/file/deMHHA7A#tMxAf0Ckn-9r6B31qlIUkG4yT5ugwrc3UKnvIh4WioQ
        - https://mega.nz/file/MWlRSKYK#-1WBiZpdTEC996ruOdO8IemDhewmL4jM6vEgW-1udJU
        - https://mega.nz/file/EbMjwYAB#4GzMVJIBcGvk9WvNLOszFdGmk4NCOBrVAa84fKCQOWU
        - https://mega.nz/file/JD0lAb6R#8B_T5OoEfaN3xrQqUsHHehhJjTEKs16MKN_fvQB62NE
        - https://mega.nz/file/wT1g1BIB#WPVI4284nSnDz-FKnMsjezD2I-8ChTzByDN1l-jDjvE
        - https://mega.nz/file/c7swSIQA#DEDyebUbUG7N_VJ6nrVP2Di7Ccf6bTsIIsMgwLGHcTk
        - https://mega.nz/file/wX9kECqB#yyBT5q2QRzmj-cdElYmlYnzuYco94T3LAe3IDALxkJA
        - https://mega.nz/file/0S10nI4R#Lg0XtpKiIm64qt8sjXwbJmKtapUIFYLpQRVbzalfWDc
        - https://mega.nz/file/mvoBnYoA#d5EBZcmTV_GNaXcRCwDK-WHza6adfoyZeAZjncw3P-I
        - https://mega.nz/file/1vF1HTRY#oOHyKqQ-_JkPIOAoHBAa_nABV4Ve-bBFoPqS4bbiCYQ
        - https://mega.nz/file/sSMHBaJL#3k0d2SqYHu9AIOIRpy4GXhGFLB2GtRMcEhHqKmgghj8
        - https://mega.nz/file/IGcHGDpD#kL1-drb905tpFyvTgzvlYKkrrH5-0SGedVNq5zn50S8
        - https://mega.nz/file/Zi9FUBiL#FFzjogFFAqkTRfSXDYJKBYNTxYdMQvsLBezEPIa367U
        - https://mega.nz/file/YSEyUK5a#6d3Hy_C6W5IsGCgOjlnePJP2_xkv6dfOspW4BG84A04
        - https://mega.nz/file/5W0wUAIJ#U6n49hIf2S9194XXOdUCS3jHbFK689uz0967ZiqKaT0
        - https://mega.nz/file/cy8ikBiZ#hNXv19tE2-s-KbZozId4bzYQFVrqkIpi_vdfshs0UCg
        - https://mega.nz/file/pLEDzQpB#F2rBREpfEHyU4pBPkT778BBez6uYz_yEdvESHDaJp_I
        - https://mega.nz/file/JW9gSRiY#d-Cj75tYsffLjUH5J7KHwNg4UslAoJtbbkJE4meBm18
        - https://mega.nz/file/5P9DUZaA#4H_l7YGlNBe2KFEaVngL4ZM2-_h9M9NXMXmY_XHTMY0
        - https://mega.nz/file/Bf8TnZyJ#bmR8XV1ybNHAmvYKYB9k96BDa6P-3kdhsnApQPxRg3A
        - https://mega.nz/file/gG8CBYKT#8GbFfJtxV4NVwig-e8BlZOOrvaVN9PQAgm1KW48RjTM
        - https://mega.nz/file/hKEkDB7Y#IovEeHlIvDiwZV9FUcOeo8hzgnFupzaPulHX3yK1g4M
        - https://mega.nz/file/kLcHgagC#jJ5ulk9Ut4aKX34-8k7ZXyy3TPfeFhYNn_8b_5ow3io
        - https://mega.nz/file/hbcxWBTB#Pf6R7F0RFMUqPsfz03Vzi5l3k30IPpMjFB3ZLzni1tQ
        - https://mega.nz/file/NHkXAJwB#vxe_VwXJuDaiazg3tjXqXKOHSz0t28YCxuW1EMKK5T4
        - https://mega.nz/file/IS931ZjI#07WDpmORgp24JEj2_5lgBgaJksEHCiLcPjpdMPq_UNc
        - https://mega.nz/file/5bUgSabQ#C5S4oJaty6V-s-NAbkfoZf7GzV6lYlwJ9nJoxxbelEM
        - https://mega.nz/file/4KN2iYZA#6xDudU0249Kw2myYRXld6eioMStSTq44hLYfM4EFEvE
        - https://mega.nz/file/of83TTCY#lVuLV5PDEOjVEdPRR_RzQVYfUuNf8EBI1hPgbP1gA1Q
        - https://mega.nz/file/hO1whA5K#Lp6qCEANS5ApCbfy6FlZYNkGDDSgjMnQX52T8IpPiqk
        - https://mega.nz/file/sL8k2b4D#jRW3Jg9kSF5gurtQeETS2-LC1U2NFqnvB3cijrujESw
        - https://mega.nz/file/EPMTUSib#qWyDXpkEE2MZEhw9hMnKVZ3L2aPFsF0PQDytD12ozDo
        - https://mega.nz/file/YPMknKjZ#PgY5Ok7mCzgB5Kj4YJrWEdBHHA8KeFw9ad1W6hXN-jo
        - https://mega.nz/file/kKUR3ZJA#Fqw2spkRSGbHaM1u0SEnw-8DylLDwwKZZ2h39HiXI3Y
        - https://mega.nz/file/wOcgBbwY#GMv66pfINmDfuTrknzW_iZqegoINwgTVpykiB8AQziY
    runs-on: ubuntu-latest
    steps:
    - uses: actions/cache@v4
      id: cache
      with:
        path: megatools-1.11.1.20230212-linux-x86_64
        key: megatools-1.11.1.20230212-linux-x86_64
    - name: Mega
      if: steps.cache.outputs.cache-hit != 'true'
      run: |
        curl -OL https://megatools.megous.com/builds/builds/megatools-1.11.1.20230212-linux-x86_64.tar.gz
        tar xvf *.gz
    - name: Leech
      run: |
        mkdir leech
        megatools*/megatools dl --path leech/ ${{ matrix.url }}
        cd leech
        find . -size +1960M -exec split -b 1G --numeric-suffixes=1 {} {}.0 \;
        find . -size +1960M -exec rm {} \;
    - name: Upload
      uses: svenstaro/upload-release-action@v2
      with:
        repo_token: ${{ secrets.GITHUB_TOKEN }}
        file: leech/*
        tag: latest
        overwrite: true
        file_glob: true
