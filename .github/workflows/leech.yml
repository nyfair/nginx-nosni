name: leech

on:
  push:
    paths:
    - '.github/workflows/leech.yml'

jobs:
  build:
    strategy:
      fail-fast: false
      matrix:
        url:
        - https://mega.nz/file/zA8mQILD#1B8DzCOqnxeskd9_ceLhPjAL_hD-WA03kIKOaaXxKIw
        - https://mega.nz/file/vAtwAQha#kYcRqpfd_PIKstmGGOe09MiMZ7P3IxjSGYX_SioSLwI
        - https://mega.nz/file/KENmABJZ#DwsA7tfJ-x8-LpD4Y5LpWVQybjCDmZPX5nDThekZN-A
        - https://mega.nz/file/TIEFDT5A#g8JhoVJPFmUDyM-9xvQR3HnaWq5d7gW_rQgMFDtnCoA
        - https://mega.nz/file/WYE00YYK#58PIf-wRMTP8Qn7HzsuMAMaGbugZz2JTuvRG_Fmg2fE
        - https://mega.nz/file/3Jswka7R#JMEAt3DkwqU1YFOxeYknNjyzx2tPvLhMr8pGQTIplWo
        - https://mega.nz/file/zddgzYiZ#cC5gJYltKV5Yjo11Aw2FC7o9LMcy-QwGyezk16Gc1fk
        - https://mega.nz/file/OIk2ULiZ#lWVyzbL2liE3oZC-v2Bj8JbAyZfqvYclJvZxdVoUVU8
        - https://mega.nz/file/SJsCUDJb#RLfAQ2AnBzSDql33TxULX1D-gUqugji4oYQHRoUigiQ
        - https://mega.nz/file/eQlU0QaS#tFB5yoG-65UH6mADNxzq0s6dy0L4aOCGCrGOQ-Ryves
        - https://mega.nz/file/jJN0nJLa#FjsrtCZ-VuXVihDD5-hThFAxqWqEYZ6zZorCPyLRwXU
        - https://mega.nz/file/Ld0zlCqZ#8_9pvnBw54MghuXkUZlnQyH56q5nD6dkpu629rxTgI4
        - https://mega.nz/file/OJtkyBbZ#R9kVr4SL3DJKUS5L3M7J7ER6EXXEjIXOCR7euPZTH_o
        - https://mega.nz/file/qIFznSwC#kKyIlq2pI6tDh9vW7_qSVO7SM2jSkYhsK6zM-9qjEcE
        - https://mega.nz/file/jN0gCYrb#phcmnUDhtPJtFlvrz7jwIt4a711i6JCvBlhxCTNTq2s
        - https://mega.nz/file/OZ9T2DpA#UwWcoxzMXv8RD7e0bk8rXveT3v2ApuaIqD_0LIIJl6g
        - https://mega.nz/file/edFBCTgC#LXpfC6lL5v1jG17Z25dUEAa53FW-zxhBYXVIFMH8yNE
        - https://mega.nz/file/XE8QTAxI#iGj6v8o0aHF5j6p8Kc8m7snASWVton7D-Tg-5bWDAPY
        - https://mega.nz/file/aENTBDoI#W2oOaFNby-NXNyJd5fOX8ao-Yl7PFSoxidz-TJsqKd0
        - https://mega.nz/file/KcEiDCBQ#r63Ywpfw0-Xz92oaN2qEyQGJMmCpOV4ozljIIdmM0lU
        - https://mega.nz/file/TMUH1S6a#aIZKEmqeOYxDhftWNhEGnDlTJ4hecnmk1xUBwoSTn4o
        - https://mega.nz/file/2cUkWIgD#o8CXwLQebnrTN0iOWFvEcFOJNmV1Acm-4U1NUk82g40
        - https://mega.nz/file/HYUQHRJS#8Q-gTxFQUdAjUcrzhDquArNdN03KIMyhae1aEWtR0vU
        - https://mega.nz/file/LZMQEKCR#LyCgFrl0zRK4TMGnA7l4sZTq-DHJOGI665eyqNVvNzw
        - https://mega.nz/file/TZcD2DpA#MwYO56gpLDTIeNHvpFi4ly4VxMzbUqoVskFZ_SpnIAI
        - https://mega.nz/file/3QUwiSTA#fIXXu5TNffGRjp00onwHTIKbcMLPh1QX-Ult3N8WciY
        - https://mega.nz/file/bJUQCQpJ#KL8UdRHZndy6c1jyEP_etG2ZRVO9HQ9Kj3gnEN8q2_Y
        - https://mega.nz/file/CN9wUI6Z#MUiat3Qvib7EHRkIc0j90fegwLeN2eKjTaAtnsAw5Zw
        - https://mega.nz/file/DENCVLaY#gy5KpR0INiSqwLqFdZGe48RsgMgm8CvuNX9h7ZElUZo
        - https://mega.nz/file/KFVWTCoA#P8SMlVQJcYcQjkbeSnSAFGt8LgUJbdMTsZp4temMmtQ
        - https://mega.nz/file/KUVSXSDC#0-_igD2cFHK74y5V8wXIpGfZX5X0-U83unMHH58VYdc
        - https://mega.nz/file/rAEWnZzT#8lDMbhYQgLObDoUkCHg2O3BK9v8pzcyBiEeoo7V6uqk
        - https://mega.nz/file/vEUHXIra#puvlLMowy87J9ltMzIDzoaUKtHRCtN1ou-TlVTjaqgk
        - https://mega.nz/file/XJsAibSa#zzAvyA6cEwDTKoGaWU96B0UAJM6NDfFcOtUfcA-PsK4
        - https://mega.nz/file/7EkFSC4R#u6ZFKl0xRySrrozuNuNSdcv9w-Mx_XlWQ-OnIIZ0RwM
        - https://mega.nz/file/iQE32YBL#Kx7qWKEeotWUoaDbXqtL_rUXfvJJ7Nk1kEDvjGfQBOA
    runs-on: ubuntu-latest
    steps:
    - uses: actions/cache@v4
      id: cache
      with:
        path: megatools-1.11.1.20230212-linux-x86_64
        key: megatools-1.11.1.20230212-linux-x86_64
    - name: Mega
      if: steps.cache.outputs.cache-hit != 'true'
      run: |
        curl -OL https://megatools.megous.com/builds/builds/megatools-1.11.1.20230212-linux-x86_64.tar.gz
        tar xvf *.gz
    - name: Leech
      run: |
        mkdir leech
        megatools*/megatools dl --path leech/ ${{ matrix.url }}
        cd leech
        find . -size +1960M -exec split -b 1G --numeric-suffixes=1 {} {}.0 \;
        find . -size +1960M -exec rm {} \;
    - name: Upload
      uses: svenstaro/upload-release-action@v2
      with:
        repo_token: ${{ secrets.GITHUB_TOKEN }}
        file: leech/*
        tag: latest
        overwrite: true
        file_glob: true
