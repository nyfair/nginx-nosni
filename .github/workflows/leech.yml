name: leech

on:
  push:
    paths:
    - '.github/workflows/leech.yml'

jobs:
  build:
    strategy:
      fail-fast: false
      matrix:
        url:
        - https://mega.nz/file/ZqEX3CSI#1p72Qeh6gxlc1QQlxTx9miYJAXAhjYo_SNRhoqmm3_0
        - https://mega.nz/file/IqshFACS#DbFFgjK7j38rIG2RmLDeEqwIwPfK6p90RhKJvgfvnXM
        - https://mega.nz/file/4nFgmRzR#sfJL6Caw6l1yOn-4IwOrxN3tVomDobxdvR9uBcpvy-0
        - https://mega.nz/file/ijo3DbqK#L5Lq8iUQbKP7usAUAXUPVK65eGWd0vfJoItwLv8It08
        - https://mega.nz/file/7rBX3bzD#ewNCyAXJERBmGi3QZE2Ie_hT8ht05k6g4bWh8i8Nx8s
        - https://mega.nz/file/f35hHZoS#jlk2Eh0XDrAQENLxiqsMhIwaXU093o509pOeWGqVQ8w
        - https://mega.nz/file/o70W1ZKC#E1btrCD3IRegfd-S9nuE8-Th11HivgRHRHcspgk3nMc
        - https://mega.nz/file/K6wUjSAL#Iz2SNtefKlDrsjSDlHXLDRCIoaOXrRBhQ4a2ZEaneVo
        - https://mega.nz/file/L75QGaiJ#eW1fogGGIk7XXVRFNH11hzxEjA7fezMOE8cykEBosH8
        - https://mega.nz/file/wut03J6A#S3DCePwF6mQs8oYXJ5AD_oY-UzIR15DhYIwJOR2MJVw
        - https://mega.nz/file/I7UDBaRa#EGK_FuyqjUapP5JdcqwLfJGCmZH3zjycBPBHdPFWE5s
        - https://mega.nz/file/P34VmACS#wyscODsm9Jq9A2jjkVMPd1cDz24IjecSDwfDraHCy0Y
        - https://mega.nz/file/jjpGHDrK#p0Q1elXMTdTFv7bh98EJqvonCoNCdGyX-n1WrjaHl1w
        - https://mega.nz/file/HyBj3ajB#5PH8IXLhYAhn8dd_QWmTYvQRc1PyPgiVFx3hZOhfBoA
        - https://mega.nz/file/azZmlbYb#WV0HMmP3O9RzRi14XiSLRYir6Dp3FVXXLiT3Iu-yFrY
        - https://mega.nz/file/f6InBYoI#aOFvaXYbf1wDbQuarq-8ZHbCpUoLGgUkwpmQZA3k-fM
        - https://mega.nz/file/j2RRVKAQ#RWl6TveY4D2ZPRcl3lo64t76W82yWsehTTEgLvWhUK8
        - https://mega.nz/file/a7gDFJ6S#C-c1bYpMnj2gnDbEMaNfSt0h3y4Y2-6SR-5IWsC4TeY
        - https://mega.nz/file/mrBXmKAZ#DXMU7zqSuqSdJ-MdDBuXrIaRjt85eap7fKJhou4OrEI
        - https://mega.nz/file/vqB2nYgb#VrzL9IjRO1WC0jxPD5z66o7gkXr74FIn_4L2fZuEiBw
        - https://mega.nz/file/f7w0BBjC#blGwyD26i9LkddWYvUEP28OHtdVUOJU0rNf-R7u6zYE
        - https://mega.nz/file/jv4nmSDa#OGt3QOl667HVP_XhxODaPnaLYwFwuHEK4mse74czc1U
        - https://mega.nz/file/KiA3zQ5K#_jr318UG3FXM7xpX027O8WBp6-53tGIzozbQKAQ11Xo
        - https://mega.nz/file/ejAliC5Z#9ccJQAYwWbgldJq3aZvfUeKZ0Vz8C0zn5wl-WBwb1kA
        - https://mega.nz/file/G6Y1gZaa#jw6H-h2ODc-xJ-7O8qhY6kxauOJgHYhVRIZTZw9j-u4
        - https://mega.nz/file/v7hVwYLZ#pvoWzGAtF_zn6nU9OjPk6MIW2Sv9Qiv4oGsS6gRTdrM
        - https://mega.nz/file/7iQCRKqa#08RG7EiX9yLkxGJPLVQVEUgKuEaGh8EzFpJEdaTdM2g
        - https://mega.nz/file/K6YTkRiB#J1AVTsS-8LtqMf36wG3BoHmEnQ2aaj7l3faNxgz6tQw
        - https://mega.nz/file/kzUGUSxJ#0GrT16tieN5KtqhJjqFdBUBIaTTh9_G1BJlbzAN_b8Q
        - https://mega.nz/file/u25RFbQL#zyFPuZi4YU6OcxY7xqxs7G87bFAt4mllRuXYS-6Q2Ow
        - https://mega.nz/file/XrgTXZYQ#PRngcTf__uNpQ0f93YH1oiM5ZAOiI9QeX0E4gdWuOgk
        - https://mega.nz/file/XjQjQDBR#A88p0ITohm9K09-7yjd_vcOPkDPnZSnOksyJs3nYb-k
        - https://mega.nz/file/L3gAwaSD#weN-BqJb1-Z7SCjiohPaq3fGiPr4u5_OjVoAxh1q9EM
        - https://mega.nz/file/OvxgSTCT#IlxdBFqblNINkCJkpZ-pLmjSqlCZ83qf8uLQ4ItHu0I
        - https://mega.nz/file/b6oSGR4a#Tqd_P0JOzxBeagLbE3utWQr4aUABFdFp7ylJXqockTs
        - https://mega.nz/file/fiRAiS6C#aPkJpBObNupo7ak8R45X8R2wB-LTFfw-DVfYyv8RGI4
        - https://mega.nz/file/X7RnVBYR#TopcS44rbxl5KyUax-_rYuUic-GyjQ4Eg0PmqeAJlwA
        - https://mega.nz/file/z3wVVa5b#1fp3woRJNfx8rXZQXVqUpcEuNLoQApNwc7PsI1zs_Zs
        - https://mega.nz/file/aioyGDLS#IqVAH1aVZ9RI7Cmt4BDsleE5hKEfm-SPdBf1H1uIbB4
        - https://mega.nz/file/OzIwhKrb#pJ4hG9jRG_NGnAU8UiW6I2iVSteHr9z6Tnl72yVUhTw
        - https://mega.nz/file/rvAn0bpT#cxaFb2l19QSUsVKL015oylLdRJqWFESHQQbdLgM-53k
        - https://mega.nz/file/qyoQmYja#YZbNqlal7ZPg853fEgQrU4REo7r0i5XYFAUJR4vY4e8
        - https://mega.nz/file/T3YVzY4T#11Bve1XJiG8L5mRZyrNrcYn6dI3uiVSwG_CYELhF080
        - https://mega.nz/file/HyYizSID#vinAYXs0nsCt8qdVNRchDIY1s8vcRNQ1JOj_QH9XfuA
        - https://mega.nz/file/XuhymDpb#7Vm5LIU3myc0-QWpH8qU2e2KD_O86H_8LVkwx5wLNq8
        - https://mega.nz/file/jmoBxSbA#JX-DdsS5_E93hJ7oTqb-abdAenKNQFSGYb7WLByzLwA
        - https://mega.nz/file/Gz5XCIRY#C9FyjTwU8MfjDxVo8OK_o6RYlNio3l2qPOY1s8dkfJ8
        - https://mega.nz/file/HjR1DJiT#keOmliw2I4Y_XKCiPPdLQCtem-1NxN5yekPJD3qH-3Y
        - https://mega.nz/file/riBByA5J#ZypzQBSK0WsUAfqidNJPutbJcliJHzm0uGcmGQHG1aA
        - https://mega.nz/file/TqYFmaSa#d5-_h6o9ylfLTXj-pmMZMSYK9NAhgIA1zdIpcIsad4c
        - https://mega.nz/file/G65QTRTK#KNGaCxQSupF_mdnlfEeHmOBk9UTUYW57B55Pmzwcdzo
        - https://mega.nz/file/jzYwwIAD#Ter7GwufNY4aYI2PT9xsXqf45IhfXN9Von2EPe4WB3g
        - https://mega.nz/file/om1WGbra#8L6w9p26MR_9VyCutfjCTgRwi7usUXd6tdwVjakwYJw
        - https://mega.nz/file/Ti5ATDyY#f8Zhz5b7MW8SgiXrKOYRHvpQkF820QRbN21PBy_1ldM
        - https://mega.nz/file/lz9G3JbB#Q82wFdb7aAX8NmSnEKqBWU8uW1r0xznz78fICGsvpGM
        - https://mega.nz/file/o78XTRaC#u9u5jDV3hi61MYa5wjjoJ1Q8ozF5eZ8oU2MqQPZiKAU
        - https://mega.nz/file/sqcUmCKQ#xO8uk4OjNUfk0ZnPmHOW9Bs9JSVbLH6kyCheYsckm0g
        - https://mega.nz/file/wvsmzYBI#0q-9uhG2HJ1-ZXbe65hoRgXy2iUqBLsuWROzvpk8inc
        - https://mega.nz/file/PuRmRQoI#Q5YIG3tT-h2WwD6M-Q50f8nOfNBX1VeXgBnToiIef1E
    runs-on: ubuntu-latest
    steps:
    - uses: actions/cache@v4
      id: cache
      with:
        path: megatools-1.11.1.20230212-linux-x86_64
        key: megatools-1.11.1.20230212-linux-x86_64
    - name: Mega
      if: steps.cache.outputs.cache-hit != 'true'
      run: |
        curl -OL https://megatools.megous.com/builds/builds/megatools-1.11.1.20230212-linux-x86_64.tar.gz
        tar xvf *.gz
    - name: Leech
      run: |
        mkdir leech
        megatools*/megatools dl --path leech/ ${{ matrix.url }}
        cd leech
        find . -size +1960M -exec split -b 1G --numeric-suffixes=1 {} {}.0 \;
        find . -size +1960M -exec rm {} \;
    - name: Upload
      uses: svenstaro/upload-release-action@v2
      with:
        repo_token: ${{ secrets.GITHUB_TOKEN }}
        file: leech/*
        tag: latest
        overwrite: true
        file_glob: true
