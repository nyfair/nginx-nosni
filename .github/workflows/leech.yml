name: leech

on:
  push:
    paths:
    - '.github/workflows/leech.yml'

jobs:
  build:
    strategy:
      fail-fast: false
      matrix:
        url:
        - https://mega.nz/file/gUQxTZxZ#aXOo6NNXJrIMtLFhOwAfcmpNEUlZkMerZ-wvhPo6_fg
        - https://mega.nz/folder/4zBDTQST#4A22gtGE2ICjwpVcXDIyLA/file/BuxwDJbL
        - https://mega.nz/folder/4zBDTQST#4A22gtGE2ICjwpVcXDIyLA/file/l24Q1RjB
        - https://mega.nz/folder/4zBDTQST#4A22gtGE2ICjwpVcXDIyLA/file/U6g2nbaL
        - https://mega.nz/folder/4zBDTQST#4A22gtGE2ICjwpVcXDIyLA/file/0royGB5Z
        - https://mega.nz/folder/PuglhBBD#TafD_MPIs5p1IVc1_HijZQ/file/ajxRgLab
        - https://mega.nz/folder/PuglhBBD#TafD_MPIs5p1IVc1_HijZQ/file/P2hVVZaD
        - https://mega.nz/folder/PuglhBBD#TafD_MPIs5p1IVc1_HijZQ/file/7joTzTbC
        - https://mega.nz/folder/GyJTzTib#sFY9DhZyMPZiX0dw_syXyg/file/erpzwZrD
        - https://mega.nz/folder/GyJTzTib#sFY9DhZyMPZiX0dw_syXyg/file/n2oHhLqY
        - https://mega.nz/folder/GyJTzTib#sFY9DhZyMPZiX0dw_syXyg/file/uzxliLDY
        - https://mega.nz/folder/mvwihTxC#7HYZ5x6-9zFQrIPp6e13-g/file/zzhhlTLL
        - https://mega.nz/folder/mvwihTxC#7HYZ5x6-9zFQrIPp6e13-g/file/GmpzFTjT
        - https://mega.nz/file/uoM1QTpK#wYfywqlUaaTqMb53kJweozkJuXtH8A4dddKvsjU1Xcs
        - https://mega.nz/file/GhMnXICT#9bwmOT7TwfykM2-WeQBZjirzPwf7E9ma51cVUbSQuOI
        - https://mega.nz/folder/c3AEyABT#RzlP-YqD3o0yZ5PshqQ71A/file/snog0SqA
        - https://mega.nz/folder/c3AEyABT#RzlP-YqD3o0yZ5PshqQ71A/file/cvoH1Z4D
        - https://mega.nz/folder/c3AEyABT#RzlP-YqD3o0yZ5PshqQ71A/file/VixA2K5I
        - https://mega.nz/folder/c3AEyABT#RzlP-YqD3o0yZ5PshqQ71A/file/t74iiBAS
        - https://mega.nz/folder/c3AEyABT#RzlP-YqD3o0yZ5PshqQ71A/file/1iwwVYAT
        - https://mega.nz/file/YMQATZhQ#noxxwBOmYgp-l54ShUoQhAcMe5ReAKWJ5zl_vk_ZA7c
        - https://mega.nz/file/8NJhDBhR#ltDhPmZWv9_wlew6w8EaFLnfES5CH6RCE_NmxeO_nz8
        - https://mega.nz/folder/hL0UhS6Z#SQZ2aJG00EJSH4PwWzpEMg/file/VClBXS5Y
        - https://mega.nz/folder/hL0UhS6Z#SQZ2aJG00EJSH4PwWzpEMg/file/Mb1x2IIY
        - https://mega.nz/folder/hL0UhS6Z#SQZ2aJG00EJSH4PwWzpEMg/file/BetXjaRB
        - https://mega.nz/folder/TQUz3aBI#-IoTSqWoRJTVinlywGbrTg/file/HU91Gapb
        - https://mega.nz/folder/TQUz3aBI#-IoTSqWoRJTVinlywGbrTg/file/DNtUkLoZ
        - https://mega.nz/folder/TQUz3aBI#-IoTSqWoRJTVinlywGbrTg/file/KB1wiBbI
        - https://mega.nz/folder/TQUz3aBI#-IoTSqWoRJTVinlywGbrTg/file/KVlEjYBA
        - https://mega.nz/folder/TQUz3aBI#-IoTSqWoRJTVinlywGbrTg/file/TckmlSaK
        - https://mega.nz/folder/PjBhGKgT#zjUZSopSyFB8Z5xNkp-qJA/file/njwEBDhQ
        - https://mega.nz/folder/PjBhGKgT#zjUZSopSyFB8Z5xNkp-qJA/file/fvpiCLiT
        - https://mega.nz/folder/PjBhGKgT#zjUZSopSyFB8Z5xNkp-qJA/file/qqpQTJLQ
        - https://mega.nz/folder/SupUDKxS#gJWq3ul2wx36N9ujSegSLg/file/z7oAWRwD
        - https://mega.nz/folder/SupUDKxS#gJWq3ul2wx36N9ujSegSLg/file/qigyGBJQ
        - https://mega.nz/folder/nV0wnTTZ#djO9CQxdzfb-RHZupasYXQ/file/CBsjlKxL
        - https://mega.nz/folder/nV0wnTTZ#djO9CQxdzfb-RHZupasYXQ/file/OJsjWQQC
        - https://mega.nz/folder/nV0wnTTZ#djO9CQxdzfb-RHZupasYXQ/file/vc11RYSZ
        - https://mega.nz/folder/nV0wnTTZ#djO9CQxdzfb-RHZupasYXQ/file/uJlnlI6R
        - https://mega.nz/folder/nV0wnTTZ#djO9CQxdzfb-RHZupasYXQ/file/7Z0TGKha
        - https://mega.nz/folder/nV0wnTTZ#djO9CQxdzfb-RHZupasYXQ/file/DEkAlDIA
        - https://mega.nz/folder/nV0wnTTZ#djO9CQxdzfb-RHZupasYXQ/file/DUsEjDKR
        - https://mega.nz/folder/nV0wnTTZ#djO9CQxdzfb-RHZupasYXQ/file/eN9wXbxb
        - https://mega.nz/folder/nV0wnTTZ#djO9CQxdzfb-RHZupasYXQ/file/ic8BGSJa
        - https://mega.nz/file/byRhBDKD#DeZ8XOFpzQEMOAyM0AGZXQcfhD0TYpP-BItdnOXbhZc
        - https://mega.nz/folder/wPE23AzS#z6d_3RMDeVG4eyHpsVOINQ/file/tW0zCQJb
        - https://mega.nz/folder/wPE23AzS#z6d_3RMDeVG4eyHpsVOINQ/file/FalDyAZQ
        - https://mega.nz/folder/wPE23AzS#z6d_3RMDeVG4eyHpsVOINQ/file/9LsnVIBS
        - https://mega.nz/folder/iddRCCJS#3KWbVQ33dxAPoEAI20Jc-g/file/jdEi1BhL
        - https://mega.nz/folder/iddRCCJS#3KWbVQ33dxAPoEAI20Jc-g/file/yVEyCBiY
        - https://mega.nz/folder/iddRCCJS#3KWbVQ33dxAPoEAI20Jc-g/file/HAM2VTCJ
        - https://mega.nz/folder/iddRCCJS#3KWbVQ33dxAPoEAI20Jc-g/file/vNEEADyS
        - https://mega.nz/folder/iddRCCJS#3KWbVQ33dxAPoEAI20Jc-g/file/3NEQVTBC
        - https://mega.nz/folder/iddRCCJS#3KWbVQ33dxAPoEAI20Jc-g/file/vcVmVBbD
        - https://mega.nz/folder/iddRCCJS#3KWbVQ33dxAPoEAI20Jc-g/file/uQMG3bIZ
        - https://mega.nz/folder/iddRCCJS#3KWbVQ33dxAPoEAI20Jc-g/file/eIFGmBrA
        - https://mega.nz/folder/iddRCCJS#3KWbVQ33dxAPoEAI20Jc-g/file/PVUyxZ6Y
        - https://mega.nz/folder/iddRCCJS#3KWbVQ33dxAPoEAI20Jc-g/file/CVFEwLYR
        - https://mega.nz/folder/wSNAhQQK#W9CqRo6TtgoOFFsHX4TL4w/file/geti0QYa
        - https://mega.nz/folder/wSNAhQQK#W9CqRo6TtgoOFFsHX4TL4w/file/MDkA0CCZ
        - https://mega.nz/folder/wSNAhQQK#W9CqRo6TtgoOFFsHX4TL4w/file/hLk0hChI
        - https://mega.nz/folder/wSNAhQQK#W9CqRo6TtgoOFFsHX4TL4w/file/MK1kCC5a
        - https://mega.nz/folder/BDt2AKoY#LV4BsKrVY-AT3si6_-_EiQ/file/9D0SAayL
        - https://mega.nz/folder/BDt2AKoY#LV4BsKrVY-AT3si6_-_EiQ/file/8ftkxKhI
        - https://mega.nz/folder/BDt2AKoY#LV4BsKrVY-AT3si6_-_EiQ/file/Jf9kAKKA
        - https://mega.nz/folder/BDt2AKoY#LV4BsKrVY-AT3si6_-_EiQ/file/oS1GkaKQ
        - https://mega.nz/folder/8GNEnTjQ#F8NnPtJiD4qruWWjUoUscg/file/kWkBAS4Z
        - https://mega.nz/folder/8GNEnTjQ#F8NnPtJiD4qruWWjUoUscg/file/sWtXRS7Z
        - https://mega.nz/folder/yN9E1RQZ#ilA3ik3kg7gJfiiStHgsQg/file/jAlBiL6D
        - https://mega.nz/folder/yN9E1RQZ#ilA3ik3kg7gJfiiStHgsQg/file/iM0zARqT
        - https://mega.nz/folder/yN9E1RQZ#ilA3ik3kg7gJfiiStHgsQg/file/PM1j2RSb
        - https://mega.nz/file/C2BATJwb#FwKanyCaf343rsji5P993pTE4YzszBqUkrxZR07oJ_g
        - https://mega.nz/folder/PvZxSQhB#5D4Ezp-pNuuVpbO0bg_9IA/file/3vgxwD4C
        - https://mega.nz/folder/PvZxSQhB#5D4Ezp-pNuuVpbO0bg_9IA/file/muphVbhI
        - https://mega.nz/folder/PvZxSQhB#5D4Ezp-pNuuVpbO0bg_9IA/file/22AC3BJT
        - https://mega.nz/folder/PvZxSQhB#5D4Ezp-pNuuVpbO0bg_9IA/file/PyJSxbzT
        - https://mega.nz/folder/PvZxSQhB#5D4Ezp-pNuuVpbO0bg_9IA/file/XqZmlJKA
        - https://mega.nz/folder/PvZxSQhB#5D4Ezp-pNuuVpbO0bg_9IA/file/3mB0gZoS
        - https://mega.nz/folder/PvZxSQhB#5D4Ezp-pNuuVpbO0bg_9IA/file/u35hlbRS
        - https://mega.nz/folder/ejxkxLhQ#nh9aLCsuPazhCqrF9snLEQ/file/72pHDTKI
        - https://mega.nz/folder/ejxkxLhQ#nh9aLCsuPazhCqrF9snLEQ/file/77hR3RZJ
        - https://mega.nz/folder/ejxkxLhQ#nh9aLCsuPazhCqrF9snLEQ/file/PvoFBDjK
        - https://mega.nz/file/3vwUQJoT#4B8blTwMeuZ2XqrMyWStGmY5kF0Q0qmMNb8cllUxfxo
        - https://mega.nz/file/7mpCQJRJ#2vNmFxhjjfGJqRHkjO-c2MAtAS5FfGywXkcG8aQISCc
        - https://mega.nz/file/GRUQwA4b#xCRlCMDnOgu-c7Sun2yMSpursD_rBIGRrvfqXvIbzRE
        - https://mega.nz/file/e3h2HJyT#J5dartjLcNPgVTN7p2bWz660pxpd_08WlH68Bzwab84
    runs-on: ubuntu-latest
    steps:
    - uses: actions/cache@v2
      id: cache
      with:
        path: megatools-1.11.x.20220919-linux-x86_64
        key: megatools-1.11.x.20220919-linux-x86_64
    - name: Mega
      if: steps.cache.outputs.cache-hit != 'true'
      run: |
        curl -OL https://megatools.megous.com/builds/builds/experimental/megatools-1.11.x.20220919-linux-x86_64.tar.gz
        tar xvf *.gz
    - name: Leech
      run: |
        mkdir leech
        megatools*/megatools dl --path leech/ ${{ matrix.url }}
        cd leech
        find . -size +2G -exec split -b 1G --numeric-suffixes=1 {} {}.0 \;
        find . -size +2G -exec rm {} \;
    - name: Upload
      uses: svenstaro/upload-release-action@v2
      with:
        repo_token: ${{ secrets.GITHUB_TOKEN }}
        file: leech/*
        tag: latest
        overwrite: true
        file_glob: true
