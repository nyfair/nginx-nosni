name: leech

on:
  push:
    paths:
    - '.github/workflows/leech.yml'

jobs:
  build:
    strategy:
      fail-fast: false
      matrix:
        url:
        - https://mega.nz/file/AKcElDCA#Ye7lCQRmE7i_fazwannB6hB2gOrbL0XrQg1MFl3eChg
        - https://mega.nz/file/Tc9k1DhI#JwgUYDnjNLyGIATe3CMsvxH6hZSdyrCqfOMnme28PGk
        - https://mega.nz/file/xO8UnbCZ#JwyrkhYOMjcAeyRSGRafy3Rgv43sdu7Weuv7vKbbBJc
        - https://mega.nz/file/9bkiBRoK#0VLFxoTubIlodq8DmqFuqG4pluN9KCaNWUedMVzUPG8
        - https://mega.nz/file/RTkTFLyS#TB9x7X7ZT_GfvNCaDSznb9W1zALneIn6xmW1MJspOyw
        - https://mega.nz/file/NbEVBCQJ#Q6akAwxGdqzct73dwfjkwCq_UAauzezjD1ICbGUb8T0
        - https://mega.nz/file/kPFzHZwL#ccbNNHw8oo0QVqnktghAhcsuqrpJPHFwZ1ETe6pl3jk
        - https://mega.nz/file/cHNj2TjT#5dqp4uAo_7lPmNa1Bl1q2rn3LZ7fsAQh1v_sC9PxYxU
        - https://mega.nz/file/cTkXHTQD#RBSPDkeZCYfv4j4NU9a23amczKN625_BT0q6mbn9aK8
        - https://mega.nz/file/EP1nUJjJ#uvdipZf9NFY7gc8-1gHcvMvkwaBWUbxfUaGM9CsCoUU
        - https://mega.nz/file/wX1CBQIS#rr3oWnnj2If2NuQ0IpFKhxB1eK93nE6F2zAHlUM3Nzo
        - https://mega.nz/file/FCF3wBLB#xmLHFD8VhjIJBbQjf-KUsvxya651FgUkzE-nSXwOFSo
        - https://mega.nz/file/8fE11ApT#nr3tdlpzuld0SVB5m0D_eJ8lxH5ixVqJMmakESeSObM
        - https://mega.nz/file/PckDhIqa#c9vu9iewlOcTj_UEHW07mrewuhLmNaY56q2f_Jm-ZNU
        - https://mega.nz/file/NKFmSAxK#diSn26la-Rc-0_qnEvUNzQwdTsAtVcOPT6175iiCgAQ
        - https://mega.nz/file/ce0nSJzD#28fhrSLsxNG6aTus0il1tPOGEBDCMYJDh5JxW1UOk1U
        - https://mega.nz/file/eBMxmQCa#Rc_6mHsAmUKTaH78Gb4XybzA0LE0zHIB4Fn1TH46diA
        - https://mega.nz/file/2ZMniQyS#mSqr2AA2c-XIwniexCCkpa4XaEkdwtPn8WJBWgOgHOM
        - https://mega.nz/file/zY0iCRgK#3vqZma6fUq9d2-9deStLdISIZhRJZhRntENLP1cI-x8
        - https://mega.nz/file/DI1nlYrR#CplZP5eSVNgS_uhLx3QhGONQmokaBgO6Mz89wkGx4nw
        - https://mega.nz/file/6dN0HYKb#xLX2kxugUlVQCU9LM0YN0c-6xAVwfyiNWy83NMZ4Vkk
        - https://mega.nz/file/LZkV0CgY#H1dur0aDaTVYI11QTXvApw7Q1pMKKsWD4qCfc_BJ-tM
        - https://mega.nz/file/TVlCyQ7L#Jqd6CuiIniQpHIURL0SZIsA2rX3veOwlkurEu1hFu-U
        - https://mega.nz/file/mMkQzL4B#k-jernpzhkkRyDCGjcRXV2x8SUj9tkEp2nodLIG1aHY
        - https://mega.nz/file/PN8FybpJ#ZyQLj79OwQDC9FWuVlgT2DnxelBAweKtNaA4sMLCtL4
        - https://mega.nz/file/KQ0h2BYQ#3Tx1nHnVlmE5LgKChoyqOLPljjSzr4nrnqTXNhh7CVY
        - https://mega.nz/file/6Ys3QTrT#spYrEaj8PaPtEaOF5OXorUJFof15GPi-mao88FNQVag
        - https://mega.nz/file/XN9iVCZb#a7hP--HMTXLMFdnMuxmkzFApFj4A7O_2T_xhh5tHmbA
        - https://mega.nz/file/6cl3ETbb#bCBsxM4wHMHDxoxaapG-NYaUDgL3POhdbNIamEsYJIo
        - https://mega.nz/file/iIFURSaI#njQls5lYBpLt65fRHMoy6INRxVRgxrnc_UEwNV4Q3wU
        - https://mega.nz/file/jUNDFYrb#eZHWZcG7_hdj_gHDpIoJjaQB9Gf9XDsXjbXr1cQ3hNA
        - https://mega.nz/file/vYNRXaiT#Hlv4zq4K0jIU8KsCRqbEcc-CqFS2WCDe989QGNPERY8
        - https://mega.nz/file/bQ9g3a7J#fuITH0MniwYiSJ2w4QI82-BY5VL_svXPjMNzID_kyY8
        - https://mega.nz/file/WNljnZIT#OLsqc5etIW4HdS-4a6QVt3BFl2lOjCeMR9EuZIWDQPs
        - https://mega.nz/file/SMF2GKaB#iPu4hpzPcVquvo4pqu_RtyHjDTPAN_C8dS5EOq5KAvQ
        - https://mega.nz/file/mINViIoD#czAivT8A0BephioRq1fIVMoZb8pUOjPBC0xtTCzBN4o
        - https://mega.nz/file/6Z0mXKab#CHSdSpItbDx82LbOP9e3-OnWFejbkeJ-R40aJUH-KYw
        - https://mega.nz/file/Kd0mhYyS#I2p2EXHnOfEl3DeiDlYIUNaGqQK0zdI3rkgGXBBKc1k
        - https://mega.nz/file/WUVUEJya#Ch1zWt4BzUZ4zYxAJwtDBl7hSz6EiarlBeJ1nTpj0I4
        - https://mega.nz/file/CBF2TTjS#7LnKnsyfkL5EYSVN1of-JZdKFFc_nsSvfmG2DjCFz6k
        - https://mega.nz/file/DREhXSCL#naSIV043K5xXwpucILeHkOZSkjGLGVr1f04IAYrxGIY
        - https://mega.nz/file/KFkilSjY#1kTiGXZ7Ztw_8DoUO3KURmwfGnakE8eB9CqQ1-v2fX0
        - https://mega.nz/file/vVtiQZyI#a5pmvaArrFWVLfy8GYFhIhJtoZPUcQuDsGbbhuANZBk
        - https://mega.nz/file/LM8jhAjL#uFabS4A397tfPT1wl18o_m7Hf1Qw0yocFf0IgMkd2ec
        - https://mega.nz/file/Pcc0yS4S#gwLvNA2bKQqdghsgAjLWOP_haxRyMYS8EY2FxK9i0sg
        - https://mega.nz/file/zFkihQ6R#fCYo6i9QZiLXS_ycmO-5KmQR_KtQNm9om-H5htXgIYw
        - https://mega.nz/file/2ccBhTrQ#hZekG_0y07jJAYrdeNFv2-RITtKAPlZA-v652kxe1qI
        - https://mega.nz/file/OYlEmBzT#Y8feFDz18c-8vOw01PXWmwcVMNdmHsMoz19p7PXGxMI
        - https://mega.nz/file/GQ8w3LoQ#H7ScZ85hNucCVrZ8GwEFi9Q2ZlWa_KbJdmGz_hOrOB4
        - https://mega.nz/file/KcMwXQZS#WtOBMe_I4vO6gqTmLujP6LAly9AhGKch1ZDc7rvWlo8
        - https://mega.nz/file/CZsxmSST#ZNkYVpyH0qQbTUWQagDYIB5o8jz2uLwwjmLSvud_2s4
        - https://mega.nz/file/OdElmKbR#0e5jaUBBIyFXwJR9ZsfoSdlo_NyQt0iBu1CNYl-O2fc
        - https://mega.nz/file/SVt13b6J#EeRFN827XWb1v4YgBlhtjcLRrUcLVNpNfuDdzCKcgOw
        - https://mega.nz/file/rU10hJqA#LVYBlNrmgZILshEg9xDJavqcapLHxhR1BkpiN5lysCo
        - https://mega.nz/file/uBF2QJYb#DTJeMrfIdaLFXh3x40Xigg40H5VGFjhrXMbKEvZoO_E
        - https://mega.nz/file/CdE33ahb#A3DqmCGVnhMYpPuYMBJ3YRvLvqf9BcSjHVxfmr6Nfv4
        - https://mega.nz/file/bBN0BRjb#dlWAP2XhOjF_cSgOW8jUTqBjPY5gX6QeoxgnhI7CI8E
        - https://mega.nz/file/eQMBmQjY#IZJKDUvFZVtexdestqRl2uXBhvT6JQ8zzFOOsJPmMIc
        - https://mega.nz/file/zVlUGJbL#3mksx1S0DYRKb0CYMXJXRYAFeCmQsRX0TV1ZAm0LFpo
        - https://mega.nz/file/GN9QDYqJ#2gWiXycLgJlSeTueSRgRQZV_2TMzumC9PQx8zBOr0Dc
        - https://mega.nz/file/JGskkQAK#lBLG9eZl_wMu1f414bBuNYL4uFjC2lbiQ41z_6VaOuY
        - https://mega.nz/file/KE8RxDZL#YF-qhDYw4MpFYqHb_uuq3qTIpVjHCuccpi-LLJimE_g
        - https://mega.nz/file/SEk20CqL#jVL-IrD6zSGEL8sBcnWterpPuStJnIOL0WquV4OZJ94
    runs-on: ubuntu-latest
    steps:
    - uses: actions/cache@v3
      id: cache
      with:
        path: megatools-1.11.1.20230212-linux-x86_64
        key: megatools-1.11.1.20230212-linux-x86_64
    - name: Mega
      if: steps.cache.outputs.cache-hit != 'true'
      run: |
        curl -OL https://megatools.megous.com/builds/builds/megatools-1.11.1.20230212-linux-x86_64.tar.gz
        tar xvf *.gz
    - name: Leech
      run: |
        mkdir leech
        megatools*/megatools dl --path leech/ ${{ matrix.url }}
        cd leech
        find . -size +2G -exec split -b 1G --numeric-suffixes=1 {} {}.0 \;
        find . -size +2G -exec rm {} \;
    - name: Upload
      uses: svenstaro/upload-release-action@v2
      with:
        repo_token: ${{ secrets.GITHUB_TOKEN }}
        file: leech/*
        tag: latest
        overwrite: true
        file_glob: true
