name: leech

on:
  push:
    paths:
    - '.github/workflows/leech.yml'

jobs:
  build:
    strategy:
      fail-fast: false
      matrix:
        url:
        - https://mega.nz/file/TRE2RDjR#iV6vl9koVVdn6H82XG0_ujFpuytbavX_lODhMPrIePQ
        - https://mega.nz/file/bYtnACbB#GX_iNzu-riPTixCsM-sm8FXI4BVBWARLR7s-J1jtipc
        - https://mega.nz/file/yVtDxZIR#zuuGBZEAg2i1zLAxIJ4Z7QkyfFzFQQxSUUAtBZn5mnk
        - https://mega.nz/file/F60UkYwA#5joyOCTDO0kOzinahqsO3wDq4q1xJPiEi6hLuLOVY1M
        - https://mega.nz/file/SZFXhLhC#fPOpNBc9sfVGnCmuy7e-sS2ZyFvaHhiL8U6Kgzn8KIE
        - https://mega.nz/file/ViNFhA7Z#qJSvxTsUEy_qnU1jyff1GOC0EkA7O29bpnccBx70hDE
        - https://mega.nz/file/uQ1hUQhJ#n5I3SQD0UqnJdi-UTcBlDlEZmmI9IcIQiTACJgd5hsY
        - https://mega.nz/file/zVE0iZJZ#DfhOtHxvKhHDbl0MIMLkftsiI_9BlQQMy_vQGBPTEsE
        - https://mega.nz/file/zV0RSB7I#NFdb-6r5OxIjGRxyUuzSvi4C75Qpv0zpnynrtDkMkFI
        - https://mega.nz/file/DdNCWaAJ#gPOaWJwQMMiDTcB-PmqCWfmW99EQj_JIWcNX18G3m-Q
        - https://mega.nz/file/KZFnibxD#-n08x2ySpsx4QmZpC90CkM0GJHruI63a6uTrXPVABKY
        - https://mega.nz/file/LEkHEaJZ#XYk8hiGAPOL4PBvk9rcGRtYq59eIK4LvM135V_22y0A
        - https://mega.nz/file/bU0nQK6B#2b0cu5gSSZxIbwHYgTWw8DKTX_eJs4aMfUYRFsf3NTQ
        - https://mega.nz/file/jFk1FLrQ#C4AKN-qOxWiXNfHXJT7iVK9TXpL_xkHPmF97iCqSr_s
        - https://mega.nz/file/fQlXSAwa#dsjQs60pgCV8nNxcF77c6Y34eFGXHeGqTkt5vOhmFjI
        - https://mega.nz/file/jYFVXK6R#TvE6WCRXCGbtzwoq0nck3-uUpjeDT5SgXDjeQPTLOJw
        - https://mega.nz/file/aclnmQSJ#AZRCBRzKUFsESWC18Rdo8l0jrTR0QIZ5XMxN9cfgW-E
        - https://mega.nz/file/CZMSAD5a#i07Q2pqS6yg9iM7gVFTPzn_B9KmrDfdrwpnc0Zkjqx8
        - https://mega.nz/file/GBFyVA6L#EUFG2qTc6TUWu9he1NfrnR4JLHNILe4BcBr9bvRtnvc
        - https://mega.nz/file/SZVAyZxA#Y9mG9XdROsvlXyUXYP74YueWpK0lHzO20_zzMEYf3ZU
        - https://mega.nz/file/2E8kDawQ#cDFtyQi5Z2sz1lwGfZ43Xrdj2tQ0nLJAiRG9va7yPEk
        - https://mega.nz/file/ycFTWI6J#x-R-T0OJrzGIwimJgSnvbpCdL7TYixxpXBx-mx1YuIA
        - https://mega.nz/file/3N0h3ZrJ#4fIagcvpQmBuotwXL79kzrfA5RHlHXJzi-EouskLpgo
        - https://mega.nz/file/OMcgVSSa#6bt6Sbl-06tEzLx5IJEQZMlr5Hbo43DZa-L1njjE0fs
        - https://mega.nz/file/2M01FA7B#U51rbgVt19aklP302PsPMTH6mPw8Q2ggkP9OPnZmzd0
        - https://mega.nz/file/jEdlkDoa#Es8yzqL_IdQzoGByVQZ49O81k0H4lRLk6M5JCMomc8Y
        - https://mega.nz/file/2BEEzACa#Aw4pWP4P-Mt6d4oe2-NtfKdjK9jv9dkYJINsxfb9sg4
        - https://mega.nz/file/uRlmEAaY#9kc4-AKeyI7ll11I5eJaMIoH63yuiPQrhJAA0IQ8v9k
        - https://mega.nz/file/aMUBRLgQ#axYDN_jUuIO25pz_OWz9NpbkVpks0p-NaV0N0s4Uh-k
        - https://mega.nz/file/Lc1QzLqa#uAPJUqSK7l9J3HfR4Z4Xlmft-MNSck2v7uYKo8CYMoI
        - https://mega.nz/file/udEAhQ7K#8XeJQTwGXuA6SP1Fke1M9svOrwliqLREhW01x1sT5EQ
        - https://mega.nz/file/md8mRbCS#YpAUXMuRMiZmYjG67ZHvG7xJ48jgePPvrffkXn9kHw8
        - https://mega.nz/file/OI82WIQS#FKhTALQEthAzKV1VQt5kjFctm9DUUpFT0aD8JIA8ms0
        - https://mega.nz/file/HR0DmAzL#UeAFg-f_UfHpVOjWzp8-28ac_2SNzWAnlN8V7W2m7_g
        - https://mega.nz/file/CddlSajR#4jtOgk5oLyJIMoTFdQc1chCoOXye80mFagoDceyiKU4
        - https://mega.nz/file/yNE2xbjB#JbnIIIpQwO5w68lxvOYeogRRhclKmRQ8UfM_1Cs-M6Y
        - https://mega.nz/file/nBElRD7b#LJeY6jStWXtcrOZNOfGNITv90O0wADVJWExlnlg5i0k
        - https://mega.nz/file/iVky0TLa#dWzbpSj0QwVLIwPoMa3yoESXZG7B6bawW0lHIf1JGr0
        - https://mega.nz/file/GFViiIwL#AgtNJmPs0KOZ86uCOcWBpowQGqoPcAQkqbmIjjatBmI
        - https://mega.nz/file/WdU0ECwL#4XxCdQfkcDfC4BvRIGDYUf6HpaQhlqYNX4eqx_IiSGs
        - https://mega.nz/file/WBMVEZDT#S6KJwLjLUQIvpdEf6HLhMwEDrXaiFatMqVTGE-P9JeA
        - https://mega.nz/file/yYM3mRpT#YDUe4NV1n8mbmV8ZdHt2pKImu8uF_lLbrEu_FGdfMXY
        - https://mega.nz/file/zc9ABKZK#DNA5lSNUWIp4AEJ3gFjkhixFRA6zXbsYVhrP_qb6PrQ
        - https://mega.nz/file/KN9AEYSb#25bK7kxkucsYM_CDUIqsdrMaKCf8y0X91Ttc1VmS6V8
        - https://mega.nz/file/zZNzWAoT#LHcomYoWQ5Ibc4PRn7Gd65SWyrCZeyZF645dQBX0JQ0
        - https://mega.nz/file/bFlgVSaD#TA8BXTzcDsTyh5FUPLB2_oMPlF-6QxPYdtYu0B4WBUo
        - https://mega.nz/file/SE8wVRxb#m-9xIDANUwKXZ29NAgxwet4E_UBgl4Nw8KvJw0mQngY
        - https://mega.nz/file/GFdyhQCK#RWilDhx2BRpkOGbPpsSs9G6k7whozilZY9jvsuP82HI
        - https://mega.nz/file/fEkwjZqI#AWTyVTevN0XM9gJomLc1ZQJJnB2gR4gcbk8gCRmi0rc
        - https://mega.nz/file/KBl00bSA#taB0AZpRS6MtneigpK2CSKJeTG8wQw-Kl_G2AZ_6ipk
        - https://mega.nz/file/mZ0kQYQB#YsU3e8ynlxzGC6xtGe5bkMDxXyU1q4DfdapYiqgZbZ8
        - https://mega.nz/file/KAtwEBDT#ILieH0TwR1sG7HBby7DWl4mww4qGnRzJgRx2DZScsg8
        - https://mega.nz/file/aAEE2YRa#hqolrVEcalxq6I0FteSg8BHAqndFSBfD112-LEko7Oc
        - https://mega.nz/file/rRUWwaTJ#kmyMjvkQWr6UbK9CZ5ALTqRBjXj1kwWlIHIneb2gYQg
        - https://mega.nz/file/6cdkiQTR#L-Isgkvlg1oom5yLI-eNxzs_Mw8JrVtLlFrKoUf3HdM
        - https://mega.nz/file/bAMGHLCb#DtntNU2Lc4ga1uJ7bKgk5wpNBW784jBULiRl6w0ipOY
        - https://mega.nz/file/bNsWgTAT#sA2XoX9-jPfqdxwnRTTW8TwovmelYxxJ1u7ncCyLakA
        - https://mega.nz/file/eQkj2SrR#zfS5gH_Nzj2Q3Z675k8DIo3_QbviQUFyDAcDxc3ANsw
        - https://mega.nz/file/GUs0ECLY#0Zt0IHnG-lFcyoLbuYKaVGMgMAvCnbarVwVUKlp5ruI
        - https://mega.nz/file/jUVACLQQ#yBh4Xp8VWT2-HWt_RgWaBIyNSGF3M0-yiokDLyS_Zg4
        - https://mega.nz/file/mFEgSDpR#QrAW9e6Ape2FkD5i_uofWprWHcA7UY-5iaGAXB-9LbM
        - https://mega.nz/file/nBsWGIpK#siNvAN23aJPW54yj83V97LcTrjbd6YW8-RIuU3IVttA
        - https://mega.nz/file/SBslGApS#PfgHQ2_t9dOgEygi0vAU49sZtlMZrm8ginpLQxoF11M
        - https://mega.nz/file/uN0XBRDY#nyzJU6rd2f4YqCBwC-VlfSAQAqDK6wQvgmarrPoi0lo
        - https://mega.nz/file/uV9SnQbB#eat-5tqJwdy8fCAIBhcGwtEMR3BLJ-zITa-lw82TLQo
    runs-on: ubuntu-latest
    steps:
    - uses: actions/cache@v4
      id: cache
      with:
        path: megatools-1.11.1.20230212-linux-x86_64
        key: megatools-1.11.1.20230212-linux-x86_64
    - name: Mega
      if: steps.cache.outputs.cache-hit != 'true'
      run: |
        curl -OL https://megatools.megous.com/builds/builds/megatools-1.11.1.20230212-linux-x86_64.tar.gz
        tar xvf *.gz
    - name: Leech
      run: |
        mkdir leech
        megatools*/megatools dl --path leech/ ${{ matrix.url }}
        cd leech
        find . -size +1960M -exec split -b 1G --numeric-suffixes=1 {} {}.0 \;
        find . -size +1960M -exec rm {} \;
    - name: Upload
      uses: svenstaro/upload-release-action@v2
      with:
        repo_token: ${{ secrets.GITHUB_TOKEN }}
        file: leech/*
        tag: latest
        overwrite: true
        file_glob: true
