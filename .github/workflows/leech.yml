name: leech

on:
  push:
    paths:
    - '.github/workflows/leech.yml'

jobs:
  build:
    strategy:
      fail-fast: false
      matrix:
        url:
        - https://mega.nz/file/DJF1zbZD#c4jFYGJSBIN_lOWJ0HsWpmqEufmqjxH4TPFqTAv7Qbs
        - https://mega.nz/file/OI9ThZpI#jGUaOfx5bmxdwTQRnqYbuw-0AoYv74UmIIGHprWOxow
        - https://mega.nz/file/3R1hDK7C#77Xa-z6EtrS36ZNIawZYKGBtqHSnxRvz6Du-waO__rE
        - https://mega.nz/file/yBkDVYTS#qr_SIlxi5AuhSPU8MbE7XaHLCQRsdgQFKBB6Ry-zcWE
        - https://mega.nz/file/KIdRVIYD#GsrVaxEnqrPYAfd9MO3k9CYvYCgfmIsK0cNmNyCtbKg
        - https://mega.nz/file/yQcByRCB#3RsaaH4hXE-DJ13x1FiIoePPALScl3mD69Ijcn6LTpk
        - https://mega.nz/file/yRMCmbKK#p4NXSWVo816BFUz39alUkR24vidLrmyQvzfvb0FoFfM
        - https://mega.nz/file/qJM3CKqQ#eYEtXU7dkElq38nIKE2lX29bE1TR6nkDx353JgDWo60
        - https://mega.nz/file/LdsnwDoT#coAGXHhC1q3g9MKkpzXoLsiZ3GzLB6gLAAeW6xS765I
        - https://mega.nz/file/2U010IoL#t6DDoN5DzwGVPpVx8nfvTRCU0V7WxSiYvl9MHhiVHYY
        - https://mega.nz/file/aB1wCDCZ#ggVdZMmafKXGT97vsH71kwx97Nq4nXOBd8waCgUP2Ao
        - https://mega.nz/file/yrZgAZ7Z#cR1Z41BWVvSag8C4cUSdn0mcOlq8EdgevI-rYICH2uo
        - https://mega.nz/file/PQMWHLyI#DTh2ChbDvlq113uJJu8tUB7RmEjjWSukqquWEPFfMMs
        - https://mega.nz/file/qjJ1SRCZ#vgqEvS6PyQSEa5fuNRG93ET4WhMReOxBHdfwtkmuKaI
        - https://mega.nz/file/SE1UTJbC#83noizS7CV5cYbk2LrdDilFvOJTGST8KBHt0Kr3yvtc
        - https://mega.nz/file/eNNU3JwQ#1Avvtf_1KhZMHbZ8Bqn3rI34fEqyCBjM6I6nYH4Hb_s
        - https://mega.nz/file/vJNlhDpY#0Js155m42lCstfwnOptjz8b6N1RdtgHO-C8qMSHvlhQ
        - https://mega.nz/file/TM0ngSgB#n9-QcNVvWsYcYeUm06abknOZW94tycBBtuaAYa9ZU2I
        - https://mega.nz/file/fckSXBKS#bzF8-v89BeXY6r4TLWJp23Jk1UvvXxlvRuaAvsc9CBM
        - https://mega.nz/file/7FNFBQxI#JklO_NHJWXe1tKB8v1c7TNbcztdUkVi4xgRGtTqSYtc
        - https://mega.nz/file/adsCSZJR#0TdRavaFNZDBSv6Wb-ct9b1zWvk00pP6fmaEAvJnJlk
        - https://mega.nz/file/7d03RSwK#Pr2p_49RQaTzWcIEZQCGnXUnVdsqEa-dn7j9id75siY
        - https://mega.nz/file/fNthEYwa#7bM_8wFal6AgYaBya0FPe7Mq015Ld_wycU9WopnQalE
        - https://mega.nz/file/SZ81lbhZ#VLAJIU70YOqYdEqXpKQ-fYqej1km8-SLY1bU7qGLSsM
        - https://mega.nz/file/qdtFTY7a#vlNEyXB2Oy2JhgR0NYQFfrzfCdnXOdCe2zLVzibL4ro
        - https://mega.nz/file/vdE3URCJ#zyrbR2sHedkINqU8up5Ggx-K3u3445lbYu1LWVT42Jo
        - https://mega.nz/file/WJNhTSqA#M52l8bREKNcTpnrHJJe5CpCx7-zD7_ALzRyV-oYuzGk
        - https://mega.nz/file/WQUQ3IqY#fDvyD_HFSzgS8lbpLHFt_3wjp4gZZ-cPVReeaOnJ4cA
        - https://mega.nz/file/yF9UBQrQ#fF1V9K_Gzn7zS7t-OZG9w1Vix74Jendx8Bc_bX5RgfQ
        - https://mega.nz/file/Gc1jCa4L#qSMpG2tdj_tqKnhwSxjaUDZb5K8F2YJ1DyAvk7LJSVQ
        - https://mega.nz/file/w61X3ZTZ#Tv6Vo83FbsBtfcNtZuJX_mpukus7nkv31nsMJKIt-5Y
        - https://mega.nz/file/yJNRRTyR#dqTi6UY1Y8jl9QSnZrv79JiCJoZY7gULR7vC3xE34yM
        - https://mega.nz/file/mVckwRCK#8wkN4fCsKX_tIi_hOOKvctADMJJkc9g-8HutfnKKWCY
    runs-on: ubuntu-latest
    steps:
    - uses: actions/cache@v4
      id: cache
      with:
        path: megatools-1.11.1.20230212-linux-x86_64
        key: megatools-1.11.1.20230212-linux-x86_64
    - name: Mega
      if: steps.cache.outputs.cache-hit != 'true'
      run: |
        curl -OL https://megatools.megous.com/builds/builds/megatools-1.11.1.20230212-linux-x86_64.tar.gz
        tar xvf *.gz
    - name: Leech
      run: |
        mkdir leech
        megatools*/megatools dl --path leech/ ${{ matrix.url }}
        cd leech
        find . -size +1960M -exec split -b 1G --numeric-suffixes=1 {} {}.0 \;
        find . -size +1960M -exec rm {} \;
    - name: Upload
      uses: svenstaro/upload-release-action@v2
      with:
        repo_token: ${{ secrets.GITHUB_TOKEN }}
        file: leech/*
        tag: latest
        overwrite: true
        file_glob: true
