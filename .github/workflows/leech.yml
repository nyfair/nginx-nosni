name: leech

on:
  push:
    paths:
    - '.github/workflows/leech.yml'

jobs:
  build:
    strategy:
      fail-fast: false
      matrix:
        url:
        - https://mega.nz/file/LVtSjDSR#6NiJ-A7dbRieAXBd5KkMwhd8Vt_IAcCH20EFxi9ljjc
        - https://mega.nz/file/nR0zzLTS#7Jge1sv8ivJLahb8C_FQQrZJC0k2GxWj8O3OXOhJDmo
        - https://mega.nz/file/Bb1D2SiR#EyCtpd7yq-t7-S0ykrPve4SPz7v-jetIi6gL-eq_4oA
        - https://mega.nz/file/DccxBaIA#f9YZgny8MN5cZF4nxhrHp1S2zDZFEjSYNJjfHmL4b_c
        - https://mega.nz/file/5P1llTbS#xDlBVcRWWc9PYnw68PhUq6gk6JNef5WjKH90gnBc3bE
        - https://mega.nz/file/VLEQ0BiI#lYKBBH38Ny3SHJPqcnq4pZTEddoQgNKCW8E6om1xg-8
        - https://mega.nz/file/1OMxQA6J#01FnUoBP869JmEoAwNZNjUHm8iKeeXMjzrdLvIh_Ico
        - https://mega.nz/file/PRdhDbZC#DTnyvsPUYH2ZI5XAex6rC5a8nXG9ZLR5dJ_IfjSZH3g
        - https://mega.nz/file/5LVWkDAC#Dum-lGMJdoeTjuBM8tcpuaLIuokZfFHuwcQkA-GOHDg
        - https://mega.nz/file/CRFVzRyB#aNkwiUtSUNnL9O1T-hxBO_e5oTD64FyNE885a1O9Z6M
        - https://mega.nz/file/kX1mDSyL#hwX1sF4BJqKLEf9hOoFO66ptI8N_cRI-fYiOlxybkng
        - https://mega.nz/file/hbMkGIjL#4ivpPjCnElFvxKERJKicTq-lQrckN07GPHX1bncSFVc
        - https://mega.nz/file/Na1UyQgL#irsSvNbvkmuFhxt68vWkZIoj4KvlstHNucnIE-R_T3A
        - https://mega.nz/file/jZlAzKQa#tr7GpmQMblPjSLOgWq5YpDV31O5tIq_o1xD1PAkquIA
        - https://mega.nz/file/nJclQTbD#uEH3Pc8Q33Q3gla6ZawIBRSEHrJRxlH8eVyyYYdkAZQ
        - https://mega.nz/file/DZ9RiTaT#yy71vZxvlyXPPzbHIugjAT2mCeiuUbLOLTbPwcylwhw
        - https://mega.nz/file/nZ9BFBzC#Ld5byNBGNthkVKYsNSEu_Ex7XaG6ZnUjNFxFr9iP83U
        - https://mega.nz/file/uZkBwIbS#5R6Sfk3Nm73_Uo1b-PmtNuP9GqHLHpB2IFVIGcXqhVA
        - https://mega.nz/file/rZ03hIbI#8AXc6Iy0tghUSyz7vqV_FUUGFfUJDLKPOLtrIW6TcO0
        - https://mega.nz/file/eYsWEBAZ#umyJu3n9yIIXL456NZtFtP_gjIKDqSa4yoAIy0MMq90
        - https://mega.nz/file/qMFmgI5C#IET9OSOosWKwnWIZ9ChmeLivqQCWYAi2rHWL3OaWsig
        - https://mega.nz/file/yElTTDSD#OmaFVsqT2NWrItdVAMcQxm7-YnJVZCmKi0n3PwcVlPQ
        - https://mega.nz/file/3RFmGLwD#8R0RotEbqAiWfTCa65bMeBv4LdICElO24gnS888Rxsk
        - https://mega.nz/file/CNUhzADL#m8qIHWEZo0HeT-YcC8LZrlE8mdAnYzNl5gyDubkeaXE
        - https://mega.nz/file/DZ422IKQ#8UoH3KunXZzF6xInbhDXTwX3qUT4lYTvtlK2Kp_cWBs
        - https://mega.nz/file/vZpjgZ7C#dFm8hl9bll3F9ykkdc0pSRyD9nWb04Z9ikGHCiD-sG8
        - https://mega.nz/file/eZ5kwCBR#l3XsLCpg0Pm242MO2VT6_t17RuWyr5BdErkwkIYEGXw
        - https://mega.nz/file/6cYWUShJ#CqQDPNAkGSVBGGOkJeMr2K3Ir_7ZHoJGdVQx3eZQcs0
        - https://mega.nz/file/Sc531CqJ#HVPdDwAltLTjCvyNUUB5KzXzBjceoxE-IWGIR1kiIq4
        - https://mega.nz/file/OchBmCLI#2qxR7CLS77Y2Iwt189bl8272_ymXqgLq7GlSqbUJAFY
        - https://mega.nz/file/WJ4AGaZQ#S0HcwXhtgpns2GUG2g8G8pUiw5f9f0iN_gWTB0_f4To
        - https://mega.nz/file/HNhkCRAZ#yu4PAmXKrwQzR52aY6mWcUMzJoq1-DToikMrUCnZv5w
        - https://mega.nz/file/7ZN01BaK#T0UPtwHwKFIilmBeFahhliYChqQZuuCpNeFPzJZlu54
        - https://mega.nz/file/GBdEWS6S#ObOa6MlsicoUJNqLrOLJbsO2uL7bXPWejrl8JcdKYpE
        - https://mega.nz/file/GB0QhIbJ#YgcQ0IMuyKtpowqtrZUS7lBAw9abH0GXZtyJoQceFjk
        - https://mega.nz/file/yURW3JQL#B6WZ0DWUU4GefzCfHhdvXujvSbSQYb-z5U206m6AYJA
        - https://mega.nz/file/GYsGjAIR#lrIbrBzPLSBlqmnPZK37VSMJ-ydv6wRmP2DnI1OXslA
        - https://mega.nz/file/PdZVVQBJ#ScjI1pIu63biD8a5UdTpN2jUr4cZ1wPx8e8JseSZmmA
        - https://mega.nz/file/rYFVWA7Z#Ie0FIW2xZ9ElVJ2ncT2f4790DBXpz9nqiJ8UdWgUP1s
        - https://mega.nz/file/XUk0AJaC#lRP71S0WwDM3CgPRIsN0hRQ6Sr6OSTP-_MNHDdFw0qw
        - https://mega.nz/file/6JkQFbDL#Psd4bMkE5mHS1-s7P-kQYuG52-tbicRBSXiLS-YU2KQ
        - https://mega.nz/file/zQFVQJob#hp9oGO_I3WypvvNBpOuX4jh6mgZiZ6oiem5Io3sPw7I
        - https://mega.nz/file/DIU1gIqT#YFBGytwG9lvX8Oubh13E0QmogVZYx76fAtEIT3jke1w
        - https://mega.nz/file/iNEHQAYY#GddjZalChLygOPk-u5Khrh2nht_ge_XO6QY85GOodwk
        - https://mega.nz/file/aZMmAYzR#77K_gRK5eDV0JFb8k_ReIR7sFk1c-snZpyTcapwucr0
        - https://mega.nz/file/HRMCALJC#QKLoiSsE4xBh4BK_dDasXVeibnjEJb5F_YzJRg5NIzM
        - https://mega.nz/file/3V1hwSxS#Q1AVqNR0AxSH-m1uOXnPaR1qrbkuqIxfv-9XSSXgrxM
        - https://mega.nz/file/nR8kUbDL#B6i8aYL8nT-dHq0U6MxRBkPdEscS691ZBb4YDJRYYdk
        - https://mega.nz/file/rccAwB6b#r8UlHRHvH6gqH_ibAjc8uctg6lAQ2bfQM0QqSnsJwlI
        - https://mega.nz/file/mVdh2KwK#OdnwRTT4wD3tYOL0ayNEHE9vF_R8JgDceYeYwMv27xQ
        - https://mega.nz/file/uVVywJxQ#kYAQ6MXJqM-kSwot8mz5QyNHFBRFqLHWX1gPnyakCvE
        - https://mega.nz/file/SdNSgJII#wfdL73ylY0R0WtW2x9h7CkWwO2c0jexzapCHbS7Get0
        - https://mega.nz/file/XRcwzCzB#ozhV8uidrpUdsM5DpP0U0S-bP-i14JstYLpBMNI_c50
        - https://mega.nz/file/aZFWXb5D#CCFMW_K2UC_l89sRGGf5oc3tbEXPaUN51bPmxReIH4U
        - https://mega.nz/file/2AV1VRoK#KCx63gnvXb7S3cNU5cylua7prmL6YhZ5joDA12O6wyU
        - https://mega.nz/file/LZNzgBzT#8Z7UKi277sr4GNfZNOB_zBXfq96RHhI_bRmYUFSSBzw
        - https://mega.nz/file/WNNXDIKZ#DltxhPVX4hv182Z9ba_BHaHN_7tYFi9xBaSywQ074Ss
        - https://mega.nz/file/jAFgRJ5Q#9fVMEtDeySwFvNEevJ8AkjPuBpSadIWz6jkLGAGON_M
        - https://mega.nz/file/nEFlja7J#Nwlbag770NHd9J052L2o_8w7yyiv173xe4S8CmAodmk
        - https://mega.nz/file/CE8kzSRS#weIv1LZ48HMpmVFeslP0VAoVz2IBw8SBp7UOJrUSdWw
        - https://mega.nz/file/SYcT0ajR#w4XrkfFq74JkAei2qemQFpXfMllj5j0H_wYnOFxSTDo
        - https://mega.nz/file/bFN30bBT#y-8x0F2U1sjY5VT8963-X3JNer_Bnenu0cb-O1WyZhc
        - https://mega.nz/file/yRsA0YCb#GwINwC79kxc1JDZELJ560HTtDem-dJZLJT8XzhLRb5c
        - https://mega.nz/file/2A1wlA7Y#lfObtm6tjDf2n23bzDJyHkG1G41s0ABk6SG260WYk4M
        - https://mega.nz/file/DcdUVJKa#lfObtm6tjDf2n23bzDJyHkG1G41s0ABk6SG260WYk4M
        - https://mega.nz/file/LJtlGQJY#5HeZ0iGqiomNUhdRoRg5apIArIk_gjRi47mBet_FEyg
        - https://mega.nz/file/aAcjSIDB#LeuqdOdmAJR8T3UUfYByKnLHRnVEaTAcAV1Ri5RJQ8Q
        - https://mega.nz/file/GcVlnLDQ#iy4U55c4veuEAcUUIvG0z7MsFjws8O9nEouLXcVRRQI
        - https://mega.nz/file/PYESHKhA#LeuqdOdmAJR8T3UUfYByKnLHRnVEaTAcAV1Ri5RJQ8Q
        - https://mega.nz/file/6N1AGSAR#vitEGbH_xu_XauCsBanLm9ZO9JejeqLWAvMok_UNKiM
        - https://mega.nz/file/CNcmXIhA#43XHwqmJgJSwEiWvvfuIxqJWzyWeFKfW9-VrBeksqPo
        - https://mega.nz/file/KQU0lYRA#vitEGbH_xu_XauCsBanLm9ZO9JejeqLWAvMok_UNKiM
        - https://mega.nz/file/uIdAybhT#43XHwqmJgJSwEiWvvfuIxqJWzyWeFKfW9-VrBeksqPo
        - https://mega.nz/file/zdMSVI6C#stQghze2ImDHIy6mI-MsOYc1uEdx0jesUSt8eagLx5o
        - https://mega.nz/file/fVEEzRoT#E1iR5UJFEk9kGjGoGBacMP2wKoAUrGbpJh1QO-CBQyc
        - https://mega.nz/file/qYl0EAwZ#vLTtWmOxdlIxbhvGg9pnlBdPexlD4Qi8gAWoCD7Km8Q
        - https://mega.nz/file/jUF3QIgB#rU1ibzLBTbOjPlV5cSj09omOKZKxVNvSqs0xXa0DYng
        - https://mega.nz/file/PNMTECAC#U5upoiY8kVI6awnzha7Q5_PsRnrh6ymxeOoVwl9nBqo
        - https://mega.nz/file/3Mk0xTTY#7Uql_WZUabm8wEKbaXT2MnNyyTHNyIiTEHy4lAE__98
        - https://mega.nz/file/7d0hCITJ#7Uql_WZUabm8wEKbaXT2MnNyyTHNyIiTEHy4lAE__98
        - https://mega.nz/file/aEkkUYCI#v13QtsucYnx2v5YCD7jamdAnFUqB3YmFGmAmBhx4JOA
        - https://mega.nz/file/jB0DRTST#v13QtsucYnx2v5YCD7jamdAnFUqB3YmFGmAmBhx4JOA
        - https://mega.nz/file/rU8BDSLR#UxqczyzanPmyREzB0y8HKqXeTlVuq8k1u8ojWmIZ_nM
        - https://mega.nz/file/fB0hlAaQ#vHPWKp_xYkErzATrN3rgrR1WeJyGCxdZEnWpcHka8MI
        - https://mega.nz/file/qMU0mATA#9ihyJNFNlW7c3x0zPd-qLnscT1poHnIaFH3WJ8STyLQ
        - https://mega.nz/file/iQMiiJYD#tN9AL-zT67ORq_62DUrYN4izqaFOIQC_UVZGxK_7nF0
        - https://mega.nz/file/bQUERSDa#KjI0xQ8MZrI7NpUXxz5cgDJNUABhfohI4z4mJBfv44Y
        - https://mega.nz/file/uAUnSJ7A#LNp2gqMXjLEJ5_A1_UVlSl758bxCNOt9Rpv8Hy9WO1Q
    runs-on: ubuntu-latest
    steps:
    - uses: actions/cache@v3
      id: cache
      with:
        path: megatools-1.11.1.20230212-linux-x86_64
        key: megatools-1.11.1.20230212-linux-x86_64
    - name: Mega
      if: steps.cache.outputs.cache-hit != 'true'
      run: |
        curl -OL https://megatools.megous.com/builds/builds/megatools-1.11.1.20230212-linux-x86_64.tar.gz
        tar xvf *.gz
    - name: Leech
      run: |
        mkdir leech
        megatools*/megatools dl --path leech/ ${{ matrix.url }}
        cd leech
        find . -size +2G -exec split -b 1G --numeric-suffixes=1 {} {}.0 \;
        find . -size +2G -exec rm {} \;
    - name: Upload
      uses: svenstaro/upload-release-action@v2
      with:
        repo_token: ${{ secrets.GITHUB_TOKEN }}
        file: leech/*
        tag: latest
        overwrite: true
        file_glob: true
