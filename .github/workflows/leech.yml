name: leech

on:
  push:
    paths:
    - '.github/workflows/leech.yml'

jobs:
  build:
    strategy:
      fail-fast: false
      matrix:
        url:
        - https://mega.nz/file/NT92ERKa#9FH7Kdxntm4n2i2TB-Z3ypnSUmQlLgBoxLD-3m4MpYQ
        - https://mega.nz/file/Ues0UQSQ#zELBFF3-3tPtYuxjT6xG53c4ylF68SUPMHyrNNG7hAQ
        - https://mega.nz/file/gfMhCajb#F09VeHkQZkiy1YrbH-Wn5ptZRCy2Kv5AbDlRlmy796A
        - https://mega.nz/file/oXFB1S5Y#9Cs_0UlpQ80a93ImeKFa9Myr6hmxWBD_HXqeOnTujOo
        - https://mega.nz/file/cWtDEKIC#3-DhgR7WTFE9FO1c9ggYP2l4MjZEjj4lypKZ58Ajiig
        - https://mega.nz/file/lLNQ2RxZ#tGaA_ReoJk9LeoifLRold27-Jm26v2zNWjUsltbbgV0
        - https://mega.nz/file/IWdR1Bia#NvcYWsSeFPRXTwBpV_oIuRmOpmSZPSKUEK6VCh0XaZQ
        - https://mega.nz/file/8WtQ0BLQ#eNVA2OM2QZT2eo5Cf28nZnhYxwY37CIJ1qctRv7XcD8
        - https://mega.nz/file/lXkhgTYI#8MpaeYgPdT-9XROI_uSr8VTz6T_86rK8lwluctaDmvs
        - https://mega.nz/file/oW1iyTAS#7KLdsNeGvOK6_rHkzsfFRW96JLiY9YUixFDo6yVshso
        - https://mega.nz/file/IOMziCDK#AGmukEeTbJoy_J208e1dW8iYlsckrEfTfV6fWeFvquQ
        - https://mega.nz/file/VW8HUBRa#F14r0jwDw0ix7n8njgViqPBJtdyAWNvyjU0VO2oPnTM
        - https://mega.nz/file/kLlBGZZa#MHADSaq3SOBB3z8hFeuRllGBAehjL8XalsYAKUwdq00
        - https://mega.nz/file/If9AECSA#x2RX0-_evQztmxJ-2dtuV7_unEdrDX7VttWQfQRGStc
        - https://mega.nz/file/ge0RDDLB#EDeliTNz0iJSIWLmumq6giHN_zENfXCT-Uz4vJ3hQdE
        - https://mega.nz/file/kKUnyDYR#5V1A-HykZavBt0tFYyUCoSE-2nXuUkPRzuxGaaSyqng
        - https://mega.nz/file/12NFSCjI#2u3qZR3S-ApWA6fmSeXqOOCEAP8oMPgl6VFWysEGjz0
        - https://mega.nz/file/BCUVgRqL#AQ_tE7aq-hHB9hzLm2tZchOc33ZfrEViGFfkCNp1kSU
        - https://mega.nz/file/7r43kCLL#ugSdQVqifLdn-Zm0qOjm2lBEtPN92wz__bPuPZ4p95I
        - https://mega.nz/file/FH1kBL4L#nEB6sht9hyf8ZkzCj9PNadwgCRdI6F5rtlcAWx8qX-k
        - https://mega.nz/file/VGlmTIoY#wpZHe6ersSLVBiGJCTkZhPlVA2JXyknNIx9Sa1Ga9bM
        - https://mega.nz/file/IGUyADzY#gK5OVD_MdOLSKHEPP5UUKeYrgRCoWbBJQjLPe8Xxmwo
        - https://mega.nz/file/jzIRiLwY#bqNY_ApKiXfDPlBR38AzrSmjvEuAx3X9_39wDaVnm6M
        - https://mega.nz/file/NTUQwDYS#osoXUrANhpOch8EGlDS0Jb_VY_Gj7JmsmatyDfSki4o
        - https://mega.nz/file/2QliTagK#ZDa-pTuvYtBQcz9eGHTcUgsQFL7VkHLyG_3R4RVJg7g
        - https://mega.nz/file/db1hEQ6K#jc4GbbxXbvZPDQTAjmnBmCzZewURkT4sTiIi_ds0A1g
        - https://mega.nz/file/ezQR2abD#hDVlJJG-Xxb8KHzMdH6olk0wxG7VmepBTnOVci7Spwg
        - https://mega.nz/file/NKdRzbTT#rQiWsyLDuPR2mPSODDh6l03_pwFyCmlOFB19g17hses
        - https://mega.nz/file/0CVHBQCS#LGLIiDBUw_edJpZuApYzpj3QjLBEbxgjnFmHna7Y-4c
        - https://mega.nz/file/ca1jHZIL#teTt5LHfT6tflM1G0aWnFJIY3_5eIEqlHbrgWqp12us
        - https://mega.nz/file/pScFgZ4K#TmyLVqzGwmO3nq5Lkhlik7Xl9sCPcYSDU0uS4P6Nx3c
        - https://mega.nz/file/YaskCApZ#25hVscQRDsgz25qwyrH0fGgNN1avCia-gkjGL0tgu50
        - https://mega.nz/file/MbtkGSBY#-mRdzNcZ7B2Q6232AzAAJgBu0Q0yHvgcsjefcIdgDA8
        - https://mega.nz/file/QWdFhBrC#z4sB1tCutYFqcz40QT04NUaj8HIKRE7Xc0i0M2a9KkU
    runs-on: ubuntu-latest
    steps:
    - uses: actions/cache@v4
      id: cache
      with:
        path: megatools-1.11.1.20230212-linux-x86_64
        key: megatools-1.11.1.20230212-linux-x86_64
    - name: Mega
      if: steps.cache.outputs.cache-hit != 'true'
      run: |
        curl -OL https://megatools.megous.com/builds/builds/megatools-1.11.1.20230212-linux-x86_64.tar.gz
        tar xvf *.gz
    - name: Leech
      run: |
        mkdir leech
        megatools*/megatools dl --path leech/ ${{ matrix.url }}
        cd leech
        find . -size +1960M -exec split -b 1G --numeric-suffixes=1 {} {}.0 \;
        find . -size +1960M -exec rm {} \;
    - name: Upload
      uses: svenstaro/upload-release-action@v2
      with:
        repo_token: ${{ secrets.GITHUB_TOKEN }}
        file: leech/*
        tag: latest
        overwrite: true
        file_glob: true
