name: leech

on:
  push:
    paths:
    - '.github/workflows/leech.yml'

jobs:
  build:
    strategy:
      fail-fast: false
      matrix:
        url:
        - https://mega.nz/file/rZFhkYyJ#4nN2JenEhn2Lm8E01vRrijGzKSXKDpbF3tSuntV_gG4
        - https://mega.nz/file/WZEAnSDD#y9oMYyVATiqayMvk2RZqX3GnSrk4mV4kAipYG6l-g4Q
        - https://mega.nz/file/eItEXJZB#n4XLxJWtA4A-3IzEyS320Cbmc9ckJXIT2F6HzFSqZCY
        - https://mega.nz/file/fBdgxQyD#LwACIrcVj4HDsMasfA7OSNG6lCWxPjJ9pu9lVpu8Cac
        - https://mega.nz/file/KFdFRT4R#6p9TSz7xju37qUGll0gY__mwC-lw1SqOo2zqnJ4QRjI
        - https://mega.nz/file/LNclyIZK#cyMbrdBoUszddDTEI9MTyxuWlkuPG7oXvRYtR_ZHqN0
        - https://mega.nz/file/XYNwTazY#izruudMi1dHewp6923Pwlbt3Hsn6mP8eV63THtT7YBA
        - https://mega.nz/file/GUVAHISK#3awy4md2nZrwdhyvt-h8k74QxYkaN7X_S5TyTWRTk9M
        - https://mega.nz/file/GZ8hiQoQ#m7Y7DUVLVYt7oXNaca-Z5WedN6VsnRBuJ6syYVWU9BQ
        - https://mega.nz/file/LZNEQQSB#F6Uk9lg2-Y1FcUdlSl8ZRa7ZShMIC0Tehr18IPtI50Y
        - https://mega.nz/file/6FFG3TgD#_oBu9lgr-cVb5ZYVtGg4FNFCiX6hINP3tQMcclsKET8
        - https://mega.nz/file/CBVGVJYa#em21mKyuwvg2RufBqaxH1iwabxDXTnflWPIckFDVUxA
        - https://mega.nz/file/mUE2RY7I#EkqsEDDuvmJpDZ1FL-yvvqzHOyLrygR8-6t6nctpkb8
        - https://mega.nz/file/iBcTzTKQ#H65lattmy5DASTtNEcXDmosTq6UfmWg0LDGTT8RQBr4
        - https://mega.nz/file/aVdHDIZL#_ddZfZ76SkxlD7gARvr41iZYPBvfHmQFcsOzwdk-M3s
        - https://mega.nz/file/vI1ixR7Q#UNle1uP_SVik3IpHaKYbtZMh_jfmZy2mpEnaEf1zHdE
        - https://mega.nz/file/KMs0SDyR#_UTnGurB9v3So8MnHDyd385yuuPFCI9KS9E7Tj_wGWI
        - https://mega.nz/file/sztR0IrL#lZk0kuOupu0nVU1E6uzR0caJGpTiW7_CECNQYjMdUaw
        - https://mega.nz/file/BlAAgb4C#hUWEV8YuxYjf2nCSr_4Uy2TCUvTB5XvI50qMF4uEfaY
        - https://mega.nz/file/qE1l1Aba#rZxOSjnRQhBgfxeBycghaeLzFPsD8arU7Kojt8GtAbE
        - https://mega.nz/file/WJNnga7T#ZhbxUazQKVpZcPZCVLeGlB3VSIaacEsBLqfEoVL3SMY
        - https://mega.nz/file/DEcgALzD#fWox2TH2l4C6f8CCZHxfDk1M7SS08poLa_NzQ_zddWY
        - https://mega.nz/file/HE0jVZQY#3j_XMQexr8awZG4jQ4spHAlwQ0iCd55xvtkNG3fBOZs
        - https://mega.nz/file/rIF2SbpJ#Fky8Yxsx98KDpCTAYr_askLI1PYmWlNDQADaRHe94FM
        - https://mega.nz/file/SFlRlLKC#tnKOR9DvgGXIJTNu2CiomaAAPw_MDrQeNwujoYN2dnU
        - https://mega.nz/file/6Vs1kIRB#V-egyi1h9TfYCGWN5ZwUUgOmKhPI02jBsLlSr2RiE3I
        - https://mega.nz/file/DZl2yKaQ#Pa6tvddSJJvv9mZ4d0x4T0BXnNvHq7T4BNswTZuKcXU
        - https://mega.nz/file/bRNgBZJC#8cvEwHh2hkCSpKhm3xEmARpS4rgU4Bn8zZ-9O4lC4ak
        - https://mega.nz/file/PNVWFS7D#CK2SW4eZjFZcfhwR18gIdytI6Ws2cvifiHXccrie8gs
        - https://mega.nz/file/qFthGZ7J#5vyeDa3UsAhYkSPfeK6lC48HbyYOl8ZpQDKWZ7oKbVM
        - https://mega.nz/file/aVFxjT6Q#6Enq0TCHiAUBrrBrrPvPQ9VawSXnKWsmhKtzSMqwrwE
        - https://mega.nz/file/GBsD1bgC#zpyFH7JrduJXw9m91Z5QnlCY06qWhm4WaKYkWUVBGPY
        - https://mega.nz/file/7NUk2CKC#0TiHfKytxdIfx0J1p29FvhOh8mXede1GyJAWxwI-DDY
        - https://mega.nz/file/uBEhGCDb#Lfv1-85Xcf5EqS83pG48srhBE-yj4czPzsFx_zHRmo0
        - https://mega.nz/file/WEsgGbDK#JaANd8RvdnOoAxSgQpmNsneQS1GQwhm7nL5wQRrQ7PM
        - https://mega.nz/file/3B9ESJZL#koHwMIGGvGwMUxeilMIl_IsZDJXef-skXoBawcJUkSA
        - https://mega.nz/file/6F8jmC6L#1fIDaY5UC6a2z9Xbi-asZva0S--rXXCJ0TegXPiQ0Fk
        - https://mega.nz/file/rZUA1a6B#pu1V5YqA8fcuyqhAjeuJUNnuoLyt3NKLiimvrnR9Z3A
    runs-on: ubuntu-latest
    steps:
    - uses: actions/cache@v4
      id: cache
      with:
        path: megatools-1.11.1.20230212-linux-x86_64
        key: megatools-1.11.1.20230212-linux-x86_64
    - name: Mega
      if: steps.cache.outputs.cache-hit != 'true'
      run: |
        curl -OL https://megatools.megous.com/builds/builds/megatools-1.11.1.20230212-linux-x86_64.tar.gz
        tar xvf *.gz
    - name: Leech
      run: |
        mkdir leech
        megatools*/megatools dl --path leech/ ${{ matrix.url }}
        cd leech
        find . -size +1960M -exec split -b 1G --numeric-suffixes=1 {} {}.0 \;
        find . -size +1960M -exec rm {} \;
    - name: Upload
      uses: svenstaro/upload-release-action@v2
      with:
        repo_token: ${{ secrets.GITHUB_TOKEN }}
        file: leech/*
        tag: latest
        overwrite: true
        file_glob: true
