name: leech

on:
  push:
    paths:
    - '.github/workflows/leech.yml'

jobs:
  build:
    strategy:
      fail-fast: false
      matrix:
        url:
        - https://mega.nz/file/orNxEABa#FVHezcmJU-tNUfazjI6qhjGSBtq6nMq2AQyp_RD9shE
        - https://mega.nz/file/RqVRHTwL#HecF_Kj_a6KjTFqBAYJhWh8RSwzvkGfm6XfUnlQYMes
        - https://mega.nz/file/0ikkWJJL#DBCqYeSR4BaOnCbhF03Ns4VXjKsLZyKlNmdyDJ4mHq8
        - https://mega.nz/file/FudEHAoT#XtwSrPCVww7xEZ12oLh6CjB6QvlqOT6-SHc5pZqCLFU
        - https://mega.nz/file/43kU3RaY#2OCSONQtEktpt_Tbm1evhdgSXFoG8cfrQTudsJZSREg
        - https://mega.nz/file/c3VwUQSA#uTiYoTZODUuEamcptM7dOCcmxCMFX83VYQVFj5XJUGE
        - https://mega.nz/file/djdyABgb#kZzB7b-6SHCvAM-3p1-yXEzJJJ0nYP3GdsoF0Tuf2lE
        - https://mega.nz/file/0qUURYZT#AmmhEtlZwNBQCGEI3yNHqMjlEA4wAxc3h2iqs469L3A
        - https://mega.nz/file/Ay011TZb#TT_GTW5WzUdnQzvxgHhV9H8P_s5GtYKzRPq2WRQ7RA0
        - https://mega.nz/file/179D3TRC#lKNhmjc4PShrvh0G5337igpUhrWHP7qB-ULMuDkCdNM
        - https://mega.nz/file/Er9xEZCB#Tre14Y7ioogLNKb0o4N_vMienZIB8xRNCPzcR_OeBQ8
        - https://mega.nz/file/oqNFUSxb#13kDLTI6hwB3fMEAHm0ve9tokfjkma3T3Bmkv7HTRts
        - https://mega.nz/file/JyNhGTTD#EplGrIRAGCeIM3lgFd-tl0irssxL0_UgeaDDFsovo28
        - https://mega.nz/file/tyFhEL4L#Sz2UNuOyt9q-6jp7TJ7n34haFcrgmS1-rp3cQod7xyY
        - https://mega.nz/file/Ym0w2ZQZ#TOTE7oBBJqNEUDUWsMn2DmoitATnmaqrHnYmC5pD2t8
        - https://mega.nz/file/J7tziKzT#60sosME6KT2ONJr2I5s5VLVgiWFZpulkKM6guvykChE
        - https://mega.nz/file/lmNihbwR#_fbTP1PmmsNMt_mB7I-_dfY8CDu3vp8PNyPA0ZHk1g0
        - https://mega.nz/file/ZnclyIRY#Q3nmvlJmNMxQGQcwb1VrRxoK6pLxlq7aQ6B19CVF2WU
        - https://mega.nz/file/1vc0HLKA#2L5UOBZ0OSIiVxrre1QSTWGrHVwDu9rSkH3jOogP2mc
        - https://mega.nz/file/Rn9nhIKI#10AMGre0e18Xb0AW9Kw6N3pN6moJODgrqBflmnaOlVY
        - https://mega.nz/file/o2NkGbZC#M5rEdhm7POo9NifmYJX87_xvohza-McW3pek5W61aHI
        - https://mega.nz/file/8mVVQKgJ#LSbp1iKCttbX65NkHKqlYTUd5QtX-epqY93EKlreFQw
        - https://mega.nz/file/1ukAGZgK#uQp8Eb7YPy5Hu2d8WSG35oUJkgfjj0R-1aRy7dxws_Q
        - https://mega.nz/file/4vN1hJKa#yEaiCy6155wLWJxPR1aL0zJHFqDdX-u3hKVX8A5lMQ0
        - https://mega.nz/file/B6sjWZBC#XGhifc54Vdg52G_Y3v5WaPVHPTkD19QIasf2xJGe8vc
        - https://mega.nz/file/0vNDGIgb#gS4B9FHKl2FoRCGHEuQPzv5z7EPZqTLH3WbZR7a-viY
        - https://mega.nz/file/0nUUiArY#ZviEz-QxBJZ4MBbWGT78OVNkXAAcAg3vA0E8wJudgaY
        - https://mega.nz/file/p3k0iDZL#luZbxlgO4xrMuLrQYnWLJbmgqiwSMhM-7JXVAesebbU
        - https://mega.nz/file/56dyEDoJ#ixBe2ETEMyMrEXYWMGpnlpNEis4v7slwLhOKw2jDvQ8
        - https://mega.nz/file/VjNGTQrJ#fEtMfuxMZ4Dkphmzqtdv0NUOALppbCcCtyUmSgonjUc
        - https://mega.nz/file/4ishCAQb#sdidZDXehpQSDOpnKIXiaoPy2qXvwL3ISjVX7iMYb6U
        - https://mega.nz/file/wqclUCJL#dtjdSS5hzqzrtdWszsM8yZwT6C60JJnoobAZg7hdXEY
    runs-on: ubuntu-latest
    steps:
    - uses: actions/cache@v4
      id: cache
      with:
        path: megatools-1.11.1.20230212-linux-x86_64
        key: megatools-1.11.1.20230212-linux-x86_64
    - name: Mega
      if: steps.cache.outputs.cache-hit != 'true'
      run: |
        curl -OL https://megatools.megous.com/builds/builds/megatools-1.11.1.20230212-linux-x86_64.tar.gz
        tar xvf *.gz
    - name: Leech
      run: |
        mkdir leech
        megatools*/megatools dl --path leech/ ${{ matrix.url }}
        cd leech
        find . -size +1960M -exec split -b 1G --numeric-suffixes=1 {} {}.0 \;
        find . -size +1960M -exec rm {} \;
    - name: Upload
      uses: svenstaro/upload-release-action@v2
      with:
        repo_token: ${{ secrets.GITHUB_TOKEN }}
        file: leech/*
        tag: latest
        overwrite: true
        file_glob: true
