name: leech

on:
  push:
    paths:
    - '.github/workflows/leech.yml'

jobs:
  build:
    strategy:
      fail-fast: false
      matrix:
        url:
        - https://mega.nz/file/gzdHRTKB#JoP7PGGk186EiFCKNd7Wrl6LKXyTAtZSxQXZ3Pq34nM
        - https://mega.nz/file/5n8y1brI#M1S3Fcz9dPxTJIa1_PLvzDc1ambD_8lOaoG-_HtJtJc
        - https://mega.nz/file/ty1CSQzK#GTGZlH_jEVOj871pxCLT5swKrPgcaZXhvfLMa9Vmuvk
        - https://mega.nz/file/5rVjhYKT#6IfvtCkw1DkK21aS3JuCSFAp5J4VllYIShL6JB9fjZU
        - https://mega.nz/file/YyVySZBa#cKLLugibqgbYjIqSuOQ0ODHFNjlLqkyyiqsZAjstMVw
        - https://mega.nz/file/gj1lCSha#ml6JxmaE7cFp10wQywYM3XPgD7RfnX7lzV6Df5x3PBY
        - https://mega.nz/file/xikGVbJQ#vlDrgDUxQYbchkadB8TA5dmcTVpFHfPy-sT8_VynWfo
        - https://mega.nz/file/Ri0ABCgD#kTMmR_McyW4ttOW91mLNzohcdimv1Ycp6f_CMPXMOM4
        - https://mega.nz/file/NmV2CJpD#jgEcDaiqELlkXG6KqVkZmMf5Jk97Vve4HwrKeP2TJlY
        - https://mega.nz/file/dvtzCCxC#NozcMiOl3QzyrdCONb41GmKsC3jGVXlEtrHI6IZEJkQ
        - https://mega.nz/file/x6tm2QYD#7lV7XZwhoWRaqmZRCj5Pr6HAMXDgeY38toifrKwrylQ
        - https://mega.nz/file/wmFhURyK#lzV2j0aemaH1YAYi3DAL-TmheFlNlINyRhFs7D8vTAo
        - https://mega.nz/file/Td9nAYwY#DZP-zhT22__Sf4pt2K_RB63Sv-Jk20sc9pidZzPOuBw
        - https://mega.nz/file/ZzMUjJLC#q3M_fzHM7wJaWzc3d35KUNnFFNWUUM3HhbeNipYCHkc
        - https://mega.nz/file/svEAWSCR#lAWo8MWxfloH1v29Z53pMfqaOlkgTOpaHNJ_XRpYonE
        - https://mega.nz/file/pzVRHTwD#ERygo6SpyzCnvwKgMqP8We6KM11I7DN6jsB8in7O8aQ
        - https://mega.nz/file/97cWQZIJ#RlkmZTKJMPvk3ayo4tMKGEM7gcupnJksKHlbTMb5bmY
        - https://mega.nz/file/NqUnABJT#RFmtowqyMVaSVbgxgHV-14rWBuZuEBUj-vOlQKrZABg
        - https://mega.nz/file/0mEXxSia#VC0bdcVxNyWdIOK0UP93wXREVdip1zhJGnxu-1JqqFw
        - https://mega.nz/file/Rmk3kbSJ#sKJdav0mpd8xdN_3sxPpytiuqbGMJPZJI-yOMQcRZfo
        - https://mega.nz/file/V6k11KzJ#3gcb0w4uIWoUmqmWThB5-4NTtBkxKhjKS1pgbV7ibVQ
        - https://mega.nz/file/1rEHWYoB#YhUpu9K6f9w_R0S5Ip3oD0RlsLV62kInC1otPqD1UrU
        - https://mega.nz/file/o3Vi0YyQ#wrWCb4TjyBG2hNfiqrm2__tVDSCFfT81XSRAxpJXi-k
        - https://mega.nz/file/JnN3zRQS#wz2puGTydEz3Ma8dfjqwXM6qnNGoKc3daW8DhcVjF4Q
        - https://mega.nz/file/hq8UWD7Y#RmY_jvyZuWwE3vCnbNsL2sYZNUCAoMnEEyBCFEPX6zo
        - https://mega.nz/file/jd8ymIBa#ToBB6Pfb2ZcwFT0u6brUGlR6pJNfXQQzvWXKQA-OiDA
        - https://mega.nz/file/Ui9X0BKL#NBCs8so2DqnXY23esMrFVsSh-aYxWZd5aEZxXfUv05g
        - https://mega.nz/file/AqESHSJA#OozHFLR1k7RoAnOa4Np-pTqp9RbgJTRtG-cLsXyUX-Y
        - https://mega.nz/file/kycAGBAT#kmqOLCjwKQ72Dc83d3kramPKYjZ6hDanqHEQTAQW7uI
        - https://mega.nz/file/RuNUhCIR#mvDuMtY2X6atQOajcpgE9U6Ijv2WYCI-n96gzm0JRIo
        - https://mega.nz/file/EiFD2DQR#yr9bWkP8ZSnR7nXC60jysL5qqVaLWdo_tqqRuF_hcH4
        - https://mega.nz/file/IikWDD7R#mrIrIcissBt-9oaEKWFYsnmB18mnG_NgWNZPxOw7ous
        - https://mega.nz/file/Fz0xSBYJ#m6NvlXgTfXV7yQEWdzl1R12hPD3bmlRyfk_Oya2DELU
        - https://mega.nz/file/drdEDahS#Fe8Je5tFVc42O--HTMtpxqDaZ0SSSi41Nt1AwO5-pts
        - https://mega.nz/file/wvM1Ba4C#xlTg-3sqEWNiSumZ9nLgc9EzJMlPkaqYCK1ax03yoNw
        - https://mega.nz/file/Nnd3iAAQ#swIRUegdZz_iqvmotDkmNrn92vt9jDGqtjbwtPRT_Ec
        - https://mega.nz/file/FvFnRYjA#DFkBy6J-XwaLIkD_Iuo-etRxsGbB41iYfbX10ZH4Rik
        - https://mega.nz/file/lPN3kZAT#B1LQ__AskBwj3DQAZWVOwl9kDp4PLvfU6yGGmsJlRFU
        - https://mega.nz/file/RD9lASQR#UBzLQE3ZVy9S_k3XtEFH5d4uh2GWMdm4mgA6E35tnso
        - https://mega.nz/file/VftGlQSb#_b7m_7DJ-zefPA9MnZTpSRI6GP17ynRZVkn0JIAeyMo
        - https://mega.nz/file/IDUV3ZZb#I08Jv45lKO1ub8xGdXPPGUpOdgr6-GHAIHgunzcUuaM
        - https://mega.nz/file/RLdCwRDA#gmhdpTV8rPAWPL6IAmKm_fT0Je6HHsh0LDyd7CAAf5I
        - https://mega.nz/file/VDk1kLgT#BC3mAUPawDTcrPi-g6tAQYnbTL8DyAcTttXtcsF_8gA
        - https://mega.nz/file/kXMWFaZQ#48c69wmn4gTagI9NsBTCIz2XCm9gg5l3Lam4lh0ah-o
        - https://mega.nz/file/YfchGAgR#oxZAoBV3EFXO4BPDEOGt1ebHme8UuyuCW460iJh9Krk
        - https://mega.nz/file/aANFhIBA#1JIA0IrEzwNEHlawj6b6Gv5HyL4r8fm02rLokINRSj0
        - https://mega.nz/file/ga1lgbbI#5qeEkA4PSPEGtrc6-EyM9hFKEbvSLQlGX5GE8Wb0xzg
        - https://mega.nz/file/4Lc3wAgD#2hblY4YZ_V_SQ0awE1qs3ho481P9jsuxxxeygoyYiss
        - https://mega.nz/file/NLFBDZ4J#LJcGXUhedAEtLiulenyr3UTqFw1djRy0YWCKxpcTkAk
        - https://mega.nz/file/GAVVUAyY#sF9XnwUhdqUL05Z6U3-6QDrVzdW3Jb8W6c5kXPbSrsA
        - https://mega.nz/file/nF8nQSwA#sF9XnwUhdqUL05Z6U3-6QDrVzdW3Jb8W6c5kXPbSrsA
        - https://mega.nz/file/rAFkxKQI#JqnQ7yGZFHEiXByAhRWgOzyufQnDTcY0qIO0I2XZDMs
        - https://mega.nz/file/uYUHALzB#JqnQ7yGZFHEiXByAhRWgOzyufQnDTcY0qIO0I2XZDMs
        - https://mega.nz/file/Bfk2SDbD#5GwY8C4MwIFej-WDVKRYP6p4t_ApfJNkY2xNAJnOoMc
        - https://mega.nz/file/GVMRXDjA#HPhmNmD-ymJs_O_1QiuilkNQhzPB4xHHXEwFBFmipy4
        - https://mega.nz/file/KZE1nQrT#HPhmNmD-ymJs_O_1QiuilkNQhzPB4xHHXEwFBFmipy4
        - https://mega.nz/file/eNsDDTrD#L_cky4E6nVU4OBYb0dwZL4IzRnrSaPqqXs89R7W6wUY
        - https://mega.nz/file/fJs2EZpD#L_cky4E6nVU4OBYb0dwZL4IzRnrSaPqqXs89R7W6wUY
    runs-on: ubuntu-latest
    steps:
    - uses: actions/cache@v3
      id: cache
      with:
        path: megatools-1.11.1.20230212-linux-x86_64
        key: megatools-1.11.1.20230212-linux-x86_64
    - name: Mega
      if: steps.cache.outputs.cache-hit != 'true'
      run: |
        curl -OL https://megatools.megous.com/builds/builds/megatools-1.11.1.20230212-linux-x86_64.tar.gz
        tar xvf *.gz
    - name: Leech
      run: |
        mkdir leech
        megatools*/megatools dl --path leech/ ${{ matrix.url }}
        cd leech
        find . -size +2G -exec split -b 1G --numeric-suffixes=1 {} {}.0 \;
        find . -size +2G -exec rm {} \;
    - name: Upload
      uses: svenstaro/upload-release-action@v2
      with:
        repo_token: ${{ secrets.GITHUB_TOKEN }}
        file: leech/*
        tag: latest
        overwrite: true
        file_glob: true
