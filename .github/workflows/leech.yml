name: leech

on:
  push:
    paths:
    - '.github/workflows/leech.yml'

jobs:
  build:
    strategy:
      fail-fast: false
      matrix:
        url:
        - https://mega.nz/file/A6FkAIDI#2-J-m7aa4EUGUKDry7V5ATlO28aIkdtyoSOWz3jlMM4
        - https://mega.nz/file/d7cXlahZ#PwrUGPN8C5QO1WZYLTPsIn8GVuVcZO2hH5ag4s1SC4c
        - https://mega.nz/file/6Z1lBQBS#By8aI3lmlFOXMNfpU24deiZedhFI5Q9AUY6YHNmojOc
        - https://mega.nz/file/Nj8CQDpJ#sfoJ75v1HOy9x7AIkZpUCZPe9s_oE0hiik0qkHqiEcE
        - https://mega.nz/file/Yq9VARpL#xFWJpgt6eoSQmUuHtj-hMVCupuvf_IfZV6vrmh7vAIo
        - https://mega.nz/file/4mMnxQjB#vH_qrHpobtE0Y9gwmYoVGLH3dK8OhrX1LADOkMJGlUY
        - https://mega.nz/file/97kwgSoS#W-IQJ3gehMJR3blodf5lVXjrOtFy6ZB_KVv-gq9xVlo
        - https://mega.nz/file/JzlU0ChJ#hNZ1NhF9fF7RbhV5M8FEM-Z2JBntuk-s8QvbgmAzCi0
        - https://mega.nz/file/Jy8RQQRJ#KMPF8ZI1D-Dxi9hKB7NUZIeM1A3yk4uULAZGDf6v2JY
        - https://mega.nz/file/szNgBKAQ#Izja0rWR1eyzGoa7ZlU1rEqccIOOmIW3QhPVYXgTTOw
        - https://mega.nz/file/1mFATbqa#lc9Yq29YwTawnRxx7f6ZFLdX_0R0iQip2NuS2nL4Pz0
        - https://mega.nz/file/1ylVTQCQ#AHdTeJsKqyXyeiDI37j3xVOodRtH7oU37pF47TpiMOc
        - https://mega.nz/file/Fm9RAbYJ#LEuelVtu-I4AgNjHDFJ-hRcZyAz6sGMuV1UPK9A_gfA
        - https://mega.nz/file/0zkDjTTY#6X6zsqKR2qZcQohtRi4MlPq7EF5plW_NcnMYLvPBEpU
        - https://mega.nz/file/oj1jELbJ#2gewHw9WkevEZszz2Tdt5MRAw_2XloNkNfB9Kc8kLHw
        - https://mega.nz/file/BqciWKrJ#0ua3TegOOC2_Yvr2fAPKXbvKHXtk336Jl13HU2bYBtc
        - https://mega.nz/file/E79wzJTI#dkuCW0hHyHw80cogJhipRYQNjB8LtanOi5SIFOvW6xk
        - https://mega.nz/file/Frk3zIIS#OwGufyL4VHpLh3e7V1BukyRWhk97fq6Z2VghiDyz_aE
        - https://mega.nz/file/Rv1hjKQA#X0kFms-Inn4JDG-zmRRgqdDex861TFpDM0dYW_W3fsI
        - https://mega.nz/file/A7ViSI5Q#Jy7_t4PwgL-O6IazlDqWt8XpnVRYYW6dp9cnHiV-uvI
        - https://mega.nz/file/YmE1FL7a#dkwB5LHlNg0WMt_9hfhel2wvHEZDsKbBsrLHPbU5JXY
        - https://mega.nz/file/YyEnkSYA#Ocyo04kRtv6hI3esixbSej_QdBvl2_ag0BbEdH2UO4w
        - https://mega.nz/file/kntX1K7b#jZO6AM4LiarqR21hwLPRqT0FbFeEfpX8hI0vvPr8DS4
        - https://mega.nz/file/V3FBmJCZ#y-OTTakHCibC1fkZFyHT06JrhvzbtRnojfnhpTOYWvk
        - https://mega.nz/file/Ny90BagL#80VDkUrraJj6MQJC0-rEAlHdOdNy2bl0ymQvEY62SYI
        - https://mega.nz/file/Y6lE3BZY#LaYOexzIHxfFrBr1MbMzYhuPvUy9v_JznFgAF_0ul38
        - https://mega.nz/file/ou0ywSSb#FHV21wSUrPzyHC4bFzKkUaLz1RQjOSY6-Cv0dmAYYlA
        - https://mega.nz/file/UyUEyYbL#Tsvb50NzUBDhVKoYnuwc4kFR8IU7mOA1_XNyhKl4q0s
        - https://mega.nz/file/wz1jETAD#1j7enMVFENNAEe8qOCvgxvfzVJb7ch38mgbd-qvcW7c
        - https://mega.nz/file/giNUERZJ#KcCzkNCeFtVHHmH-5PlaVVT93_qq1qY8T6evnbIlRBs
        - https://mega.nz/file/wy8miBpT#65aLWA6U19vLb2vMK1OUKnmIQbKDVQRkIRv7PKT4ClM
        - https://mega.nz/file/Y20iyBoB#zar3WVjnDy14tkKcve73tW2IE7jqy0mwMbVHy9VvHcE
        - https://mega.nz/file/NvEXVTzK#ccbgE1uhTVV7T3_WIrkNnGp7QZ0uNaley9_X0-2VIeU
        - https://mega.nz/file/Q3ExQTqZ#AZTKOjyiX6FIIbu45FFAK6MLNr-V6XCAsJeoIGZA7_c
        - https://mega.nz/file/QzljCKzb#tsv9Pwc0o6ZLn-_Pi7x0nYH099ZT2VD118GahWBl9-Q
        - https://mega.nz/file/RnsTHbJK#5mBIR9NJUWX1Zm48YYyHOwF457YBs21NPnrhBBZZqNA
        - https://mega.nz/file/E39w3IKa#bX_HO0sk3_1y_mzaqVJkYPHWXAn6BOnlC47Ge63785I
        - https://mega.nz/file/4icynY6I#mObLO4-NWSj4kTifQCPHEh9ZidoO017Hr-X_DOVWQaY
        - https://mega.nz/file/0y1VlRaS#F1Z40ybDnWk9jf2F191Gani9Wh51YDL6A_oXjYwu9qw
        - https://mega.nz/file/diNk1IjK#Jrz5iSpM0Fyzt3iDz3AOzQlSv2LWGMNAm74C7k5LFc4
        - https://mega.nz/file/l61FDARS#YlU459LkPIhUx3eE9H8tpQgABSaJZePKiz0k0x4zICQ
        - https://mega.nz/file/QulGVQAL#Xrf89MRgpdpJqMZKpk3kUjNSzmxxNwNbzwsZiwQWsTw
        - https://mega.nz/file/Uml0DSjY#yms1RgAOJ9GTISCJWq108DPtsN8Lv31eZVvmpAGXeRA
        - https://mega.nz/file/ZyEjhIpJ#fyU-HYGRXxBgjzT0G48cs3ZUjJvRht1ET7kcC8U7Qw0
    runs-on: ubuntu-latest
    steps:
    - uses: actions/cache@v4
      id: cache
      with:
        path: megatools-1.11.1.20230212-linux-x86_64
        key: megatools-1.11.1.20230212-linux-x86_64
    - name: Mega
      if: steps.cache.outputs.cache-hit != 'true'
      run: |
        curl -OL https://megatools.megous.com/builds/builds/megatools-1.11.1.20230212-linux-x86_64.tar.gz
        tar xvf *.gz
    - name: Leech
      run: |
        mkdir leech
        megatools*/megatools dl --path leech/ ${{ matrix.url }}
        cd leech
        find . -size +1960M -exec split -b 1G --numeric-suffixes=1 {} {}.0 \;
        find . -size +1960M -exec rm {} \;
    - name: Upload
      uses: svenstaro/upload-release-action@v2
      with:
        repo_token: ${{ secrets.GITHUB_TOKEN }}
        file: leech/*
        tag: latest
        overwrite: true
        file_glob: true
