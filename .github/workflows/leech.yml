name: leech

on:
  push:
    paths:
    - '.github/workflows/leech.yml'

jobs:
  build:
    strategy:
      fail-fast: false
      matrix:
        url:
        - https://mega.nz/file/bQsDXDZS#1Qno5bjhFx8W-MavYYp6mL_A4covUJ_S0MNbJl1-2LE
        - https://mega.nz/file/ndMTQAaA#gSyuRI49D2B-nmV3dxNqMXMGYZmmx5hzlCO74cBvluc
        - https://mega.nz/file/WYthXBBT#FPyFUazQFUr0YRz-epSPz979HUyHBxvCQNko6j16y08
        - https://mega.nz/file/3YslEJAB#j2XgzgamCj1PHghx4MY3MFPqpYvNVLZoxQAwoRS5lqs
        - https://mega.nz/file/vF0FjRyD#fEF9Y7J1OCq2TWVm-i5_HD_cDAX9Ri6lV6apyopUmSw
        - https://mega.nz/file/iAdCGCAD#f-DVOAO2LbkpyXfe4Zb62ZRpRgkdGR93j9srqXRvXvY
        - https://mega.nz/file/LRM1QRyR#GUy_vgJ7uKQZyvwv_Y_I2fjEal58YYGPliRLgIXf_0A
        - https://mega.nz/file/PMkASYpC#4ml-3Jbh5dj9G1OPeUCYWiPzO01J1Oa6ihEBpdCC1RA
        - https://mega.nz/file/3c0R0a6Q#M_IqpezWxZen5vAGcs-5CA_c1SUf2c67WhbcJyo64mU
        - https://mega.nz/file/eMU3XDwb#AvPPLyor5ouDgrBG5d6iP4BCX-39Z56-mY2diHGHQ2c
        - https://mega.nz/file/fR8x3C6R#uN2O_M6yWxtqH01Z90WjQcLqiviUzShTTVuDLnkIec0
        - https://mega.nz/file/LNkzTDIK#YXSMhmrBiyvffsVIgp9LM_YsRA4sfCqfpSS0Te9POBo
        - https://mega.nz/file/qcM2gKCC#Ll2_cZQYSYbUlMuiu-ExQBlA6eZ8LlKvWPwbFTYMqgE
        - https://mega.nz/file/DZFR1boL#qMa-xiC8Z2T0wfYSx3udGyGqxh15JVB97_eftGg43nk
        - https://mega.nz/file/fJdw3RKC#ES_nyIZfPGnLLXMMUlNqergn5ACyeJ-wq2JMG577ec0
        - https://mega.nz/file/HBtwkTZI#1cERImtUSZRV4ida0mxQssm8LpslK763-jm1QuSIGU0
        - https://mega.nz/file/SBcSjbIL#LipmSA1qDFcsV4xTJiEI_1RkRJ1v4IuC2wsSQ6zxf_0
        - https://mega.nz/file/bIEUWBiQ#SAKROVm3qIxU62M501j35LNRpJAaarnoSOpVwRCM3gk
        - https://mega.nz/file/SEdDEKiZ#TiAM8KHwvfom-szZtktAGKUVoiDZJg6-oFbPNqdFXgc
        - https://mega.nz/file/7VElDSQC#8LdpOZob-Y3sKeEEjT3LigveaLMhDyTsO0QIZA2kogU
        - https://mega.nz/file/rEdGhRJY#1ImK3WOfyRYaJn1KvwnBo64d4JRdngAzuenzjQtpdeM
        - https://mega.nz/file/WRFmhTpZ#NKxPdLM8k_vwZU3XINgoHoXowoG_jROhdx7pN4HIBvE
        - https://mega.nz/file/zBE1wYQB#NR9la768hp-mQIh2lAuXiQrhkf2TeqPOLuaQj40_n_g
        - https://mega.nz/file/iFUjXSrY#8iSIDXpjbshQKRT0PKD-iWgQ_WqOdUpLcinfCpjhsvo
        - https://mega.nz/file/nRFmyCST#kNX-aTiJGmttlktUzrYCjJOITrtra3HbJONOAx7vdv8
        - https://mega.nz/file/TNskmbSa#VWOPc2jfSFuBfBQBO3tR8XXJpOzgzQmTHi6_M-ZVMFU
        - https://mega.nz/file/uYsViSqK#kfQUTt0VJgIAcRXwba0MqgACt1kFROR9_suTve-zL7E
        - https://mega.nz/file/KBcnhT6A#KcZ0s1sw267YZRtDAb6h1LzwIfEfKXUmuB7H3ASzAxM
        - https://mega.nz/file/6cFmCLCL#dOAvVsDRf_hQIWGg-Zsilljxwao_uQdVmPsxNL4h1R4
        - https://mega.nz/file/CVNlkbTT#_D1YiaVCScxKZIcfv-FPka5_cguYAw3Rc4vSjPQyswA
        - https://mega.nz/file/nEs0SD4L#m0NhlEiQ4BlZlFSzjx30lE8yNFn_tnjlMXd_-T9DJcQ
        - https://mega.nz/file/Xc9n1Q4I#hy589SQlhDQdhApu9VkIHAHoH5IL7oYhftRR9QcnC-U
        - https://mega.nz/file/jJlFARYT#1n2sEO93nmx4YkxsjGwKRPlm6pkK6YcgIFg6DYL1eT0
        - https://mega.nz/file/PAdynBrQ#ZfGPhvCSrnIkH9Etni4aKvNBsrbbCvUNpowUrmEewo8
        - https://mega.nz/file/eEskCaCC#SZhIteM0jwq5JYKauNnMpe1A3vhz6NKWZd5jOUOBGl8
        - https://mega.nz/file/rRUHTC6K#YVPFAuU_i28apVjLEsDPGAbWw1LAbf8YsMVx5ecQoQk
        - https://mega.nz/file/WdMgAQTD#W_mJPfgNDMv_uILTq8EhIJ1E9qiyvE0joMcus07e3ho
        - https://mega.nz/file/WBkHWThL#M3dwvzFDKTADZR01tKjGyasMhZzn1YaSURh9utlISGU
        - https://mega.nz/file/nN0XnKwb#G-SMBvfh9B4ErtpFtQqr5CsI-h64-INYlF6MPUNd3w8
        - https://mega.nz/file/2ItwyTRK#JDt36TO9Iz0WIelJvxLv-HI42V0_sgZrB5n1xgk7r2Q
    runs-on: ubuntu-latest
    steps:
    - uses: actions/cache@v3
      id: cache
      with:
        path: megatools-1.11.1.20230212-linux-x86_64
        key: megatools-1.11.1.20230212-linux-x86_64
    - name: Mega
      if: steps.cache.outputs.cache-hit != 'true'
      run: |
        curl -OL https://megatools.megous.com/builds/builds/megatools-1.11.1.20230212-linux-x86_64.tar.gz
        tar xvf *.gz
    - name: Leech
      run: |
        mkdir leech
        megatools*/megatools dl --path leech/ ${{ matrix.url }}
        cd leech
        find . -size +2G -exec split -b 1G --numeric-suffixes=1 {} {}.0 \;
        find . -size +2G -exec rm {} \;
    - name: Upload
      uses: svenstaro/upload-release-action@v2
      with:
        repo_token: ${{ secrets.GITHUB_TOKEN }}
        file: leech/*
        tag: latest
        overwrite: true
        file_glob: true
