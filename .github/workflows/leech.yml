name: leech

on:
  push:
    paths:
    - '.github/workflows/leech.yml'

jobs:
  build:
    strategy:
      fail-fast: false
      matrix:
        url:
        - https://mega.nz/file/2c8xUAQT#7tOuFrw82sIU16YXt3HY3XLAZ2EFPN3iV4GKv1SPRsA
        - https://mega.nz/file/id8TwQ4b#8i3vzkiC6nkK1M0AcuFeABw811MX_MaMzbTug8HrY0g
        - https://mega.nz/file/rBFAzISL#o87Fm-jIRbBIMU7QdfnbzWbUAIH5xlLqIHK3Y8MQkFg
        - https://mega.nz/file/yBdAWQ7T#5GaubivjN-FnBYBlpbeGvH2pPwYfohHMunT7Adrj-rM
        - https://mega.nz/file/LNtChYYY#l9anA1srKgulcCdFx7hlWtYwIN7dn7-hwqzn9ipghUc
        - https://mega.nz/file/rI1xgISI#_9pynKWvmaWk3UuHgaGXahFOARg1_200FY6yJ9aPvLc
        - https://mega.nz/file/7Q0QXZxa#8YTPGR3MQXTU_lpYD0XhEtwrqf4n20M4DuJEKhOUBKY
        - https://mega.nz/file/uYsk2Rwb#UpOBc0499CnMPLBxPHaGNh4IMlsnnYFzLndORlFJ-fs
        - https://mega.nz/file/GBtAkAoB#9-xoxlK50vpbRKVCgxziC8fi922hg8z9hHfXwP8KE9Y
        - https://mega.nz/file/yUlWmRZT#1PsAYx85bPjdqAg9jQPSpJ7UDo22sLzVxHMbsn3i2kU
        - https://mega.nz/file/7c9iEDxY#C64CHrAGABrO5uFMKq5ILyj7DkCzP7lEtAJLM89Ww3w
        - https://mega.nz/file/rJ1WTIyK#RYK8K-f2gS_rKQfwoxARe-aO6vsNPCbgrrgLsiqegb8
        - https://mega.nz/file/WdVVhBTL#5rK8IhpnhejGi6VU5MzbGx9xt0Ftw8PaqJp6z5GQA4E
        - https://mega.nz/file/fckFSYja#EgQptnYnbsEsdJDQpcfLu6pX7eek1Bk_5W2LlGve4vU
        - https://mega.nz/file/nRNQkbjb#HP9Yugu29UuVPEsyfKBQhczgsvGmJMTktcvGbaoMYWY
        - https://mega.nz/file/Ld1hVaTL#drXOJGdH-4eYIUYmE1vYA5_8n8-qUeMS46SqrMwrzx4
        - https://mega.nz/file/vZ0kmQbY#quXwP3LlqhfiPubmSCxn1F-T1Ol1aEd8Xd9FXoaE3nY
        - https://mega.nz/file/3cFRwT6b#TM5XW0J7Kardbm2eqw8BzACjb3B5t0cDkzqQBWc11pk
        - https://mega.nz/file/yBF2GbwL#VyvizOiEccBZQ-ijgYotj4QBpvvd3Q5xQn-Hri3sGkk
        - https://mega.nz/file/6jJ1QCqI#aAKmTBiEbgTKyOz6qfneOev3n1LYiwx1--fj-e9tyfs
        - https://mega.nz/file/CIVlkRJJ#SUoMQp7rxZwqRogRD5SCWMymbbWH_gDA-WfpHkNC9_w
        - https://mega.nz/file/md0R3RzJ#W5WeJF0roPQs-coqav_EG1Yv-yX7CG2Ws1xoK9XtSpo
        - https://mega.nz/file/iA0DEYSR#3O--3vphpqjX5I-HcNlyy5Mq1z1OUHWmyvCD_BV8LB8
        - https://mega.nz/file/zNF20YRL#66XN5AwWa9MyhoMFp5Hnkc8kYGA1DQrsr3mfiEIWK8c
        - https://mega.nz/file/2BtyjSxC#yebx_psmCHP8Brx-iMWsthbtPwiBbhOnUJf6is9jvMw
        - https://mega.nz/file/grlkETYA#wW__p_Q7Wo3IY9n73wa7Zdg5wmmzSLBjni6gFIWIxWk
        - https://mega.nz/file/mdETgTDB#TVtbV-UU6c1sPyjQc9gqce00DqJF65PNeO8oQSXHuf4
        - https://mega.nz/file/ydth2AIA#dgbM506BBAEYpqGE0k6-UrQk8U7axYBpYeJVK1aym6c
        - https://mega.nz/file/7dsGgRQR#33PtPDdnD0pONUlc7n7ODtXdI_rJdgOmnp8NLK9AodY
        - https://mega.nz/file/fEUXgQKa#G8PbK7LdlfunplfQ9IVOFGuvv13oIIMTaIDtWp1Clpo
        - https://mega.nz/file/WIcRSThY#Re_qDwUgZHbAoLafl_I3euWlJQHLFdQXVdZGTCWkZW0
        - https://mega.nz/file/zAEHhLwa#5gbgXRS28I6RbTWCBbJyQ4OCjxugz8lZzK_E1K3CKJI
        - https://mega.nz/file/WYt2yahL#aWEL5EOmAwg7Vq2qaev_BNkcQRuFSgU5vil29VugHdM
        - https://mega.nz/file/3YkgHRxD#LKCxXElzjCljjJ7aCgje_MvKezWjxxSgopSc0pHn39g
        - https://mega.nz/file/6E1mgbBL#uFQrw7ZePjmIF0piNjXcmPuIh1U3FWm2s0bGJpP_8Dw
        - https://mega.nz/file/LIcm3ArR#kmi_ZeTaL88_j9tB4Ob7AqU90xpnGXxduHCymhG_Mf8
        - https://mega.nz/file/vJcwlIoa#WKU3A3AtyCWvYQQ_xXbcHLBv4RDYsoh1p6HYPD091CU
        - https://mega.nz/file/zNkhjJ6L#BvXjVjFs-Yc-NjSKT3EZYXgFiX_HxzRru4hgXsrRTJI
        - https://mega.nz/file/jIFnFZYS#7BLF5ZszgrZllw6utka9OWlfmWgPP2-uCoieS2_dxLE
        - https://mega.nz/file/aV1ElbCY#YLr3Nop8z8ju9JMoajNIsPQrfMtVVqte28GkwpP7cts
        - https://mega.nz/file/vIdEXYyS#g0oKAl2QqIPLETig-KwqdMBVzjDUSiTzhcqjtwb1OvI
        - https://mega.nz/file/WcMiDLLD#28-Jxe1a_HtdfQYUJx8cjl5eGLPhIhUOfcb5x7e1Qzs
        - https://mega.nz/file/XJdm1I6Y#GJ258M2q8sQmPu-5zccumKX8XEMBfwrrez5dFGUX2KA
        - https://mega.nz/file/TEFwEZTA#sIcw6cdBo03JGatQU9K2m6mbJygOM150qMNRThGBT-g
        - https://mega.nz/file/bZ1iDICb#8d0ghBXLh6ioVO8MkKlbq78DvuT1Hns9ODfsRO6P3NE
        - https://mega.nz/file/SFkmkJ5L#ljdQVvGXu6ucDg9e17W4d92Vj7gWeEacTg5W3YRuYCQ
        - https://mega.nz/file/zI1UCIBY#AScbQ9QpfjV5o9efE0pYYa4tXhFa35Cg3vtnkQfzSXU
    runs-on: ubuntu-latest
    steps:
    - uses: actions/cache@v4
      id: cache
      with:
        path: megatools-1.11.1.20230212-linux-x86_64
        key: megatools-1.11.1.20230212-linux-x86_64
    - name: Mega
      if: steps.cache.outputs.cache-hit != 'true'
      run: |
        curl -OL https://megatools.megous.com/builds/builds/megatools-1.11.1.20230212-linux-x86_64.tar.gz
        tar xvf *.gz
    - name: Leech
      run: |
        mkdir leech
        megatools*/megatools dl --path leech/ ${{ matrix.url }}
        cd leech
        find . -size +1960M -exec split -b 1G --numeric-suffixes=1 {} {}.0 \;
        find . -size +1960M -exec rm {} \;
    - name: Upload
      uses: svenstaro/upload-release-action@v2
      with:
        repo_token: ${{ secrets.GITHUB_TOKEN }}
        file: leech/*
        tag: latest
        overwrite: true
        file_glob: true
