name: leech

on:
  push:
    paths:
    - '.github/workflows/leech.yml'

jobs:
  build:
    strategy:
      fail-fast: false
      matrix:
        url:
        - https://mega.nz/file/yRdlWYyJ#EKNPqV-kalZM51yIixC_RuJ932ZwOCJdWafVVCCYfzw
        - https://mega.nz/file/zRdDHCBC#h9bk4yZMSEpSU6yRFitC_aRXO7Uf9t1vi2T-oVWxx3g
        - https://mega.nz/file/7AtyhTrb#TZCSs-DJV4nlk2BopJ8Y9nNATHCc9F4dwMiqDOc0YMk
        - https://mega.nz/file/HQcBAL4b#TUvWbOwaVjP7mR63EJQ41BtGSHYmy1jzzIt3SE0M7dE
        - https://mega.nz/file/CQ1h0TwS#CP2-oDwEUu5S0hQAZK0R3fSz6lvBcKPv2woFWEINa98
        - https://mega.nz/file/HBtyhYrC#j-EWSmxBHSB6Wh8chfXDPGw24omhLrxjIy4YkK39PUY
        - https://mega.nz/file/zRkQ0IKK#Qglv21CKpOTaoT3fAewHfAVDsaO01akP-MUAgqNU5eg
        - https://mega.nz/file/iEE0jbiJ#yvYUJn6Uw4neZyOk39iAD_46uxDqFdKfdaSqnoybEF4
        - https://mega.nz/file/TNUyjDqY#ikhQQJI7f3kJD66lv6w_EC-R-5WxlOpeOd9s7_1EI9Y
        - https://mega.nz/file/ac0DmboB#U6aYLHGAC-Gacmrd-MmVO8xNUgWOPxCLuXkvGWVRnNg
        - https://mega.nz/file/vJVhnLxK#Ba0jD8iR8DH9ahWo0AhbHPUT9x9zXMbw9yFtLiFIyBE
        - https://mega.nz/file/vYFxFDSL#q2popItGHXmwtBddu47JlQywynAsO5lE9hys1Tphs08
        - https://mega.nz/file/WI1Snbja#uiaFR4eBta3B3-Iyz9lIva2a0mBZUxQYr04KeLF63Os
        - https://mega.nz/file/2EtgzbKZ#HUv9IJyHRCsBuYZIFJmltsXJg1rF8-eIsZub5UpBnNM
        - https://mega.nz/file/qIdU3Y5I#10pSWl0hm6SCedfqr2k7xjDFdWWeFxWDNY8NzXgL8Jc
        - https://mega.nz/file/aMFWlY4D#HUop8W-UYbZURkfzTVqQYLrMcKe7qUA7FclJ6JJeUOQ
        - https://mega.nz/file/CdlGAJAb#tK-C0ZZG8iEj4qO00Gz8Ss5TP_umIeusnXdxJWEV1iA
        - https://mega.nz/file/LQ9XFITR#z4PeTdGqOPemzU2eM5J4flIut8GtdYWP8UDLoTvSgKc
        - https://mega.nz/file/eJ82WTqD#M5BWVf65WBhvL5bsTjbQ20lSTxA8sy2V-8fBohiR8gI
        - https://mega.nz/file/iUtRgBaa#gS1Tt18UCVJvN2QnUDktn4Qk82O34zmsyNCFROdx8V4
        - https://mega.nz/file/nNUHCDSD#PADNzSEh1uYatVL2TGGWQ0LdMSQEng7tsWwePMFLvHk
        - https://mega.nz/file/qN9TBYDC#heRWmoZUo9NFUQ2vT_QlF1AatLAXCaNwGi5yruDsPSg
        - https://mega.nz/file/3IFimbAY#Ahlt43fDZeteEDeo3V1cnw-PF2UaVeDs69CicoxUmeo
        - https://mega.nz/file/ORklyIgB#8iDzhoN3ZfS8un740qD7_to1f-sWkdvELmvUjaywF2Q
        - https://mega.nz/file/7dszXC7J#31VKpIzVO0p2QzO2RNG1AJmqo4PKr3KWhPiLSrNX8Fk
        - https://mega.nz/file/zBMTxTDR#NiLWhaqixc9DkL4LOoocOfJzHbFKWZuUOx82UdU_HZc
        - https://mega.nz/file/aclGFSCA#FgoTFjMitNOmyHG__3tg_c_MeyhP04q-mRpKDHFzhxE
        - https://mega.nz/file/aZdi0SSA#vGWn8cAYV0deBTqsYjYURB-92UAexo9gK0Ib6A0XlSw
        - https://mega.nz/file/DUtwnaYK#0lVFLL0x4q9mJj9_54j3pfyt3runzZ2PiFtlA1V484U
        - https://mega.nz/file/Gd8yRBqL#LnctM_qluYs3qU_eh5yPsFq4CaQkULYLyrug-j_PYsI
        - https://mega.nz/file/yI0C1LZK#wEAmtBQjKuiFFuT08O7giVwBSuz45Ft4ojYTSVKi4Cg
        - https://mega.nz/file/bRUDiSwB#0IV4silu-ztC1ZTF8pphPjHJuDmJh_u2YsGDECjd6_g
        - https://mega.nz/file/DBlSzYJZ#hWypz3xrn8bRecmGxsXLHDoHSvurTUkwkE_2WZQQicY
        - https://mega.nz/file/jZ8UFYgb#zmHCe61OYLP-k19cY3CsTlFQ1COd0KmM21Qp-QbEtQE
        - https://mega.nz/file/mY8gTKTD#yfH1rZ5Zne9syS_RMv26E5jQwvJLV_0ucbxvLHBhfyw
        - https://mega.nz/file/WMtTwJSR#qK4-Eu5yJfzBRKt6iuuRnFbauA2OoyivLobJn-Jmx2Q
        - https://mega.nz/file/eZVlwKCb#FjmSaggJbGQtD7lXxVBRr8FFZC1AhGw10732N61E760
        - https://mega.nz/file/HANmEIjS#L1fneMAjLspa3lU9lNvu51mmFXG4_36tUy6ANhZYyAk
        - https://mega.nz/file/WE0EWCaL#L8vOL4wXs9wQlGkDndgavW4LPquF-m45PSPoIwDZgLE
        - https://mega.nz/file/uRNn2A6B#IGsrQibqChaHbimCLPNLofNWu2uqvuq_dgKwHci9KNE
        - https://mega.nz/file/rFkgyDjA#DL69UxKw3tu8LgTItHa52ZGcT2QO23CzKR25_Z3t8EU
        - https://mega.nz/file/aQcjwZBC#v-OGTOieI0573GCkpP3In9QsLWr75TRM-RaJmtaDSiU
        - https://mega.nz/file/jdESyKQT#7scVij3dY9KhF5odVzbZ8k9R-flv4K1jg9-B0P05cKM
        - https://mega.nz/file/ScEWAbBb#D5w-o9NdUQf-2SAaHCBOzTuHAv5NZXtqmer9qtlHOuE
        - https://mega.nz/file/OVUTiCqL#9acFhm0TlJX1Ai0ILFsHKjsYvdUD15ax-k7aIEXZFPI
        - https://mega.nz/file/KF0XVRiJ#JBF6CF151haGrUwWb6VkBk3BPBlsqneZ8njgQym0pz0
        - https://mega.nz/file/SN9D1BSD#Qm9_s2htHkmIsl3UC9HoymRt9RlXkP5nCzCpl0dGf2Y
        - https://mega.nz/file/Tc83mQDB#i--uhJhGc6gQLiCCh-97tmiudFI3ITwTQn-QaOR3nKE
        - https://mega.nz/file/LdV3wBYD#8B4LDZlihhVRLNWhF1BFeERmJFmzZiZ9nz0gakIZpC4
        - https://mega.nz/file/fcUzXR4R#oKM3r5HbibxiqqFm-1r8_DoFxkJR014OlMU3ReQMfmA
        - https://mega.nz/file/SE93EDQJ#_Kot06Zdc_4z8vtgU7KvlRg-Js3IGvkV56LpItKGfyc
    runs-on: ubuntu-latest
    steps:
    - uses: actions/cache@v3
      id: cache
      with:
        path: megatools-1.11.1.20230212-linux-x86_64
        key: megatools-1.11.1.20230212-linux-x86_64
    - name: Mega
      if: steps.cache.outputs.cache-hit != 'true'
      run: |
        curl -OL https://megatools.megous.com/builds/builds/megatools-1.11.1.20230212-linux-x86_64.tar.gz
        tar xvf *.gz
    - name: Leech
      run: |
        mkdir leech
        megatools*/megatools dl --path leech/ ${{ matrix.url }}
        cd leech
        find . -size +2G -exec split -b 1G --numeric-suffixes=1 {} {}.0 \;
        find . -size +2G -exec rm {} \;
    - name: Upload
      uses: svenstaro/upload-release-action@v2
      with:
        repo_token: ${{ secrets.GITHUB_TOKEN }}
        file: leech/*
        tag: latest
        overwrite: true
        file_glob: true
