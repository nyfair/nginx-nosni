name: leech

on:
  push:
    paths:
    - '.github/workflows/leech.yml'

jobs:
  build:
    strategy:
      fail-fast: false
      matrix:
        url:
        - https://mega.nz/file/6dcyibDK#LLwkObjfnZmVuOdwGIQFur4NkKYVXPOuwSseMHes-70
        - https://mega.nz/file/HUsQECwa#6KOWF8_PT_e5eNLOy36vcwR41Jl-8kTV83mxzaTrQGg
        - https://mega.nz/file/OcURDJQY#1ZMw5dOMMP45u2kY39uHRGYJbQ-c3xJeQ1S-51uizRk
        - https://mega.nz/file/OUdXDDha#LLwkObjfnZmVuOdwGIQFur4NkKYVXPOuwSseMHes-70
        - https://mega.nz/file/SV1SlZKT#1ZMw5dOMMP45u2kY39uHRGYJbQ-c3xJeQ1S-51uizRk
        - https://mega.nz/file/Wc0HWLxR#6KOWF8_PT_e5eNLOy36vcwR41Jl-8kTV83mxzaTrQGg
        - https://mega.nz/file/nJ0njabD#KJMruHzq6LrYcNUgihE0mv8wbszH8bHbf6bNFh2WVtM
        - https://mega.nz/file/TV9XVZBT#KJMruHzq6LrYcNUgihE0mv8wbszH8bHbf6bNFh2WVtM
        - https://mega.nz/file/aA0SCLaT#uU-edztWHvFHAgiHK9k-DeuGG5Z4EBf9Cj3aMZWPCDA
        - https://mega.nz/file/SAMmlJrC#uU-edztWHvFHAgiHK9k-DeuGG5Z4EBf9Cj3aMZWPCDA
        - https://mega.nz/file/2IVERZoB#tsgncqBGfj-qGqxk6Gvj2sTyRbtiyxkqQfsrR-P0pi8
        - https://mega.nz/file/fIkkkCyJ#Ou5GrQEYXitHtuZZy5mK8O3Loh-sxbZC-rfg9k4t_D4
        - https://mega.nz/file/KE1V0boC#2wdoX-41INlg_O2OOb0Pord8kPTNG0SIU70JydyL0h4
        - https://mega.nz/file/rIsWXTZC#2wdoX-41INlg_O2OOb0Pord8kPTNG0SIU70JydyL0h4
        - https://mega.nz/file/XJ8l1QCZ#Ou5GrQEYXitHtuZZy5mK8O3Loh-sxbZC-rfg9k4t_D4
        - https://mega.nz/file/XMl2RRSa#tsgncqBGfj-qGqxk6Gvj2sTyRbtiyxkqQfsrR-P0pi8
        - https://mega.nz/file/DRVmyRQI#IvB7Xiq43ttZyu4Rza6sP681U3pvPzpUOzK3l0vJrs4
        - https://mega.nz/file/OR8lmKDZ#xAzGDstYmxSfE_JnOmb4wYdKPQq3XOOk-2d2MVIvXeM
        - https://mega.nz/file/WJsWHJCZ#xAzGDstYmxSfE_JnOmb4wYdKPQq3XOOk-2d2MVIvXeM
        - https://mega.nz/file/mV9znKjC#30gO5AoaTmxbsTB4w9Sq-k8CH0gRJ0qjaW0Agfdvc-Q
        - https://mega.nz/file/oStABYqC#EVkO8u0DdWohzSOZY28bY0TCa5XO8WqBDEnD3qK6KqM
        - https://mega.nz/file/vJdHlQyC#30gO5AoaTmxbsTB4w9Sq-k8CH0gRJ0qjaW0Agfdvc-Q
        - https://mega.nz/file/1W1SRKTS#OrbGHYH8KFZc_wyaLv8GSQiEJZtn9oKSGVw6e-w7Q-I
        - https://mega.nz/file/6VEyFZ7A#-U3uFLm48hCzMS6XuRA1a2oVQzafk_GqbcCL209z-cI
        - https://mega.nz/file/8C9mkB5a#ziTJC-Eg_NOfe8wDLai_EPP6_5ljhgrM2kUMUaeMvpg
        - https://mega.nz/file/ECNSUARD#7rZ87dIEBR2DJrjA-Z9N1bZUMYo9x5wCvkNWQrh9yq4
        - https://mega.nz/file/GNFX0KiY#-U3uFLm48hCzMS6XuRA1a2oVQzafk_GqbcCL209z-cI
        - https://mega.nz/file/HEsi1T5I#LuaP6iQBlw0lwXwzDwA4RvnuOGQcKWZjnCUjMIk7Ev0
        - https://mega.nz/file/kHsmUY7Q#St0FgmM6JoJbU3-RHeM3-lB_JOVTsrZ57xNJ7Zl24jo
        - https://mega.nz/file/pOEh2TyI#BFM81weFkm1tpMTrMd0RE6I9Q1uCVjtuWFbEdu6E0XM
        - https://mega.nz/file/aMtXFAyC#F148X64T-FuTs_jPj7_lSiE7vxfLoX2CfyEObI6soj4
        - https://mega.nz/file/PNlWSKDK#u2Tkg9JCeEhHY63Ixt1IhxlTPOeqqB4J0yYgTEepQbw
        - https://mega.nz/file/bdtwyJiI#qWdcq6AsZ-4nvNno-J1VrcIJeXFjwm8NiTsJB4IVSrM
        - https://mega.nz/file/rdMX1ZIJ#S593mGQtrtWwA82cp23_Kmp546w6Xf7K-oUi_c9tU9w
        - https://mega.nz/file/yIdwgLyD#c3FNEQCjCTBNOc8r4f471zEPPt-TQsqckYW0e3GXSQc
        - https://mega.nz/file/Jf0gGKxR#0cFx6dXPFyCcNI6gjkA4dX5_WShTLz0FVbrgFUWWJO8
        - https://mega.nz/file/qRkEHQCD#CZs9lRSpZFFnZj22xqYAvL30Nt-WO3ITB43UXbNSxn0
        - https://mega.nz/file/zdszQJqJ#49UVCGW_n3fg6ZvH6QFvG6r7sap9fn0gPTKwoaVFCE0
        - https://mega.nz/file/MH1U3CRJ#T_Ui2e5JmGDt5Pf_HlfDVTpzRNJCFkvXiTks-UYx-y4
        - https://mega.nz/file/SV9XQarA#zYr_zd6WF7UjcA26KNlZREVICZN8SBWnjWNxzAB-5AE
        - https://mega.nz/file/0KtiDAAD#cIaDWwfsXeYF_1h9_eq16TBPu5OcxIgPJf4zkAfbmcI
        - https://mega.nz/file/Fa10TTZL#ocUxmEzE71v2GqVcMZ8AN4eW9S2P71-XftvJZlWY2uI
        - https://mega.nz/file/lK9BVbyY#Y7wUbRFZyIl2trfJYbQmAeQ3EEzvn7INloV00KQpt0c
        - https://mega.nz/file/kH02CaJC#62-9qgvWFcMdL41UD5d961yRnvxQ_jyaoPbBvGZOkeo
        - https://mega.nz/file/4Wk3VACQ#ratB814VSyDE10NwDK-mBR8scdG04mOdIf1-W2XS5Ow
        - https://mega.nz/file/cCsSlb7I#7urtwkxsNqdbknO2RFL6HfLvexRVNsmDKyQyQgoQKJw
        - https://mega.nz/file/delH3T4R#hdf_MLaBAtXGFNs52GF5UBIa3xk_KgM3vuTTR7qaafM
        - https://mega.nz/file/tOFCEKRb#RgHlKrDNZh531R2L_8HaZmdUGJ_VMSbnNRNEcO1zECo
        - https://mega.nz/file/hKc1SaAY#HLaFnC5JbD420ovNwHZMrddsC1E4j7dCCQ0U9HXsaL4
        - https://mega.nz/file/jYFHlToR#xea0qY_uSOSUXZiZreBLabX3y8TAHSrGWHnKf6THfU8
        - https://mega.nz/file/LBEAgaQK#7bib_9V3ELenx-c6o-dAVnAK85cuzfbg7m2MDf4AOMA
        - https://mega.nz/file/mB8CkZBR#XlZiXrUxAz5dLBXST5wSzku44P2w0qWn_2DpD-bALtk
        - https://mega.nz/file/oTNwELjY#_SSjnjrt-1gO8Yo0ss6MOJRurO8ZU-KA8mbwMiKF0EM
        - https://mega.nz/file/SEl1CY4R#R2QxCgLwz3tiYw6648d5D-OyvmkE7e9D1zqW26iCHyA
        - https://mega.nz/file/cH8jDYgK#7-e5aNHh0Ei9Rb-xLlwx1QRotEruCVfv29dYxPftzfQ
        - https://mega.nz/file/OBNgBDaI#_ORctnIjolA4hv9-DKkrTbhBtDz6qQexg0Uhds9stdY
        - https://mega.nz/file/wf8WWJoD#TTRl3hn-O_ofrD9FnKEwRLdCZFI_5YIKY3_z15LePy8
        - https://mega.nz/file/TdNGnK6L#n3KLmWyEfWjSMBNMU8MwlSjQrtzIzeZTkO2NBH-NHEs
        - https://mega.nz/file/VC9nBBYZ#WFBvnE_qDqZrIrupgaRjjozOFIOoYgCJKgdaI44u_4M
        - https://mega.nz/file/APNTWYyY#9iMG-NkWmCyqiwiU0NqLlnsSRw1IDL43_-CHvCL6ksg
        - https://mega.nz/file/hSUXCCZZ#VsGd-INiPMNz8YFt2H8tDdaxZ-4c6llMa6kwMucP5Y0
        - https://mega.nz/file/BW9BHJjK#AYe1zaEQYmBjNNVgSOyGCkd70Uu0gonnAngRCrP9pc4
        - https://mega.nz/file/kGMEQRpB#Aiz96lHts4qz7XUOUq50ONUAzl0ldyDTE7X3sAhCxIo
        - https://mega.nz/file/YSU3HRZK#nZM_Hp3bXS94D1lziB2e6ZiAd1XEbpUBVkTtI5oia0g
        - https://mega.nz/file/0fF2EAya#mgVGe20cyssSOgzy6FY7bZSRPxcjA_nJNAVFrLeC7B8
        - https://mega.nz/file/1CNDgCYD#i0YXzHaGWkmziebxF79e4-OS2nnO0CX1pNO2EbqT9Sg
        - https://mega.nz/file/JatBSTSQ#CFwkdrPQZjUtON7fi3HuaYah1i6QGBmPfcu4I4Mwtoo
        - https://mega.nz/file/gKU2DZLI#hQJ5JDqks5TbL0dUBZywvG-HXBQ5sXLLVR8Z80qqylM
        - https://mega.nz/file/tGN0yZYQ#G83bbKiVAZbMrxJtP4gbE9v4FQWX8CawkgG8KxWQhIo
        - https://mega.nz/file/YbsARSaR#K6G3-w5ZQezzN7lk4CVqv8E43C1UFFl8UjoS0yHe0S8
        - https://mega.nz/file/RXFiCbIZ#9Q4cPEplq_UPwdBr7OS8eKCf7iEC1ch80eIj6yZiuY4
    runs-on: ubuntu-latest
    steps:
    - uses: actions/cache@v3
      id: cache
      with:
        path: megatools-1.11.1.20230212-linux-x86_64
        key: megatools-1.11.1.20230212-linux-x86_64
    - name: Mega
      if: steps.cache.outputs.cache-hit != 'true'
      run: |
        curl -OL https://megatools.megous.com/builds/builds/megatools-1.11.1.20230212-linux-x86_64.tar.gz
        tar xvf *.gz
    - name: Leech
      run: |
        mkdir leech
        megatools*/megatools dl --path leech/ ${{ matrix.url }}
        cd leech
        find . -size +2G -exec split -b 1G --numeric-suffixes=1 {} {}.0 \;
        find . -size +2G -exec rm {} \;
    - name: Upload
      uses: svenstaro/upload-release-action@v2
      with:
        repo_token: ${{ secrets.GITHUB_TOKEN }}
        file: leech/*
        tag: latest
        overwrite: true
        file_glob: true
