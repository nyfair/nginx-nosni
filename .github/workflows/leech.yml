name: leech

on:
  push:
    paths:
    - '.github/workflows/leech.yml'

jobs:
  build:
    strategy:
      fail-fast: false
      matrix:
        url:
        - https://mega.nz/file/3MNTVYbK#3N3HHS3W8csSuOHLXdMFsEJEu8iVFZrq3HpiVvdF03U
        - https://mega.nz/file/BXNDyCJA#Bgh9oePXfHI7_DKHVaVel4Dyb00xs-B15y95Kflpfa4
        - https://mega.nz/file/Tc9UmA6B#_OHmR2gi1M4n90hHNDzcmJjps6ULdtX8zkZX7iyL-dM
        - https://mega.nz/file/uRUFDDpI#ZyVjEDHzOXs2esv6w_LLqvq1zgy2sb3hcCoUURi4u60
        - https://mega.nz/file/vYNBDYhS#zKCW-GfVy5xgSeovj7FArPFgo6VIyKXbX5wOaXBKO4o
        - https://mega.nz/file/NDskhZzS#_maEE0ErtQFiwCsSTCLyEcvRWaIvlQXcCYEh8v6-e0k
        - https://mega.nz/file/SFc1iYbQ#unlEOFhsYmuXirtinvGFDo76xmfIIyGc7QfPMok4Ba4
        - https://mega.nz/file/XJd2XYRS#heqRWSuQhcW8w3lfQunDVRRlF91jGXvHXjKBlaiZ0o0
        - https://mega.nz/file/yJ8BmbrY#pDH7KWscqiRtN0Qw-MxU9RH94Is0NX-dEhHo5CIRTyY
        - https://mega.nz/file/yYMyibKD#osVMv9MvEwvsQAjcyCKgVpe6hMnYO_IAfkw2sPdhiJg
        - https://mega.nz/file/4etWnTZa#zY-FIaUVl6DJMsBd6eRjlL6FjFp_V54S2NNvUpLy24A
        - https://mega.nz/file/DJkV2bbD#bYIcB9soDFN9uyIPhyWhkssVCYVA9wC00LyqN_bxcfM
        - https://mega.nz/file/uI9RXIhB#A5TN9G_FlNGg1US-EFd_OZ6_HvHsWUW4yr1UcP2ko3E
        - https://mega.nz/file/5XMySbBS#o2fNW6JZdAEqfJc0yE-2QXBwvWylW6O8qtkmyAnsChY
        - https://mega.nz/file/rAMghC5Q#XRUTy5rlCA6dZOd8sfkiC7tGni_aTzAIaoOdQAUm6Po
        - https://mega.nz/file/rUsSgaoB#6bHOMHpOijRRg3bPRp73eTY2omSH0CATCj_hG9mOUjc
        - https://mega.nz/file/zUtlkRjb#9sO3ZZH9RFZlaHI0IlpCGyUPqkblsflI-0gRY4yPuxc
        - https://mega.nz/file/0HF2yCxL#NXR_6WBIxhzWHllHbNR2MXXCDECC0M5096tysMQhT1g
        - https://mega.nz/file/8DcmUS4D#RxFWfvfTgPTqWnX2xXP0HTTrNM1K8XKyb8jffcNFnpE
        - https://mega.nz/file/UPd3HKCC#9TJDtc4ZUumcRKvv-IBnpzw2-khk1R4mhiRd7ddOx_Y
        - https://mega.nz/file/UWknmZrR#Zb_Nf20Q05eEQ2EX2XQ6rQLeiphtnszcCRIi4y0af_Q
        - https://mega.nz/file/xP8BnJAb#4tIdVMtqnXnuYuMZnObk1r34mfAnHlCK0MgX5aQiBtk
        - https://mega.nz/file/3NlH2I7A#yTiaMZuKiN1xC2FZUFT-UOSHJzRhcKiatCq8kPm1cJs
        - https://mega.nz/file/FPUkwYbC#Mz2Gl2_cQKd12yqt39ZjPRYg0fajpvNpO4Esujr0egM
        - https://mega.nz/file/1bsiTY4Z#d4fJHNC9S93x8sJOBwdfZUdxU4SExV9pSjMN-9pCVxM
        - https://mega.nz/file/EPMyBbAb#uzyHBjrG-YmQt5rbsl6beTm5_QtVzTYbVcHxW56_Au4
        - https://mega.nz/file/xL1wFRKR#uTZpKRANezkjekN3N5vB1cFz15DvAz0ww7fdPYjgx8M
        - https://mega.nz/file/ZD1QQbiC#_5vAt3JOdtIHar7bK6ZuhInakBDCcQiryJ8s6Nf1Mmc
        - https://mega.nz/file/2B0wyThB#7s7gE2n1F57f2OAuXsADkfy8gIpgC_Mh3FQw8KRd8Z8
        - https://mega.nz/file/gO82WZzA#Jl4yu1O4zUTnqu03S3nRjfBP65xYWaJXj_f96dsLKaY
        - https://mega.nz/file/4HNglZhC#oFxWdadyba8gh_W2abSFuRyld9spj-UbzehPWiEAPHo
        - https://mega.nz/file/zQ9UCSIT#Rzj0dQbt6B72xEoqoc85JF8Q7k8V1H-6uy-8E0LXdaU
        - https://mega.nz/file/ITlRTZBY#89pVZWyPU-tLSezD2P45jp849P254oCKcr1T6ez3eV0
        - https://mega.nz/file/yYtG1aaC#gvH7evsiziLDeNFJdAB-FDV9DEXO8Uky31qSUJ1E3xc
        - https://mega.nz/file/eRkjkKpK#8HH-WxCSdKr8fOGk1mlzv2KF3TSVxF0svTSk7DhbXoM
        - https://mega.nz/file/tGlAVTga#diP9STWn705rMdlNECHGm3ZXL_ZuXdkmQoxni-w_NwU
        - https://mega.nz/file/RKMXXCpJ#zrR5IjmyJwXi01w6OWxbbM9k573lTjXjzKmhWwmIsXo
        - https://mega.nz/file/vUsREaRA#uAtS9qSZ6CYfnAvApkjCmmORO7qy4oV7c1qHU_I5ZQg
        - https://mega.nz/file/kalgSRoR#7SZ_D9FG6SsmQh9TDUZhgjfGaVn0gp4-RSfTRn9_OU0
        - https://mega.nz/file/rYEC3aTL#v2WjeOZsKQGQHKSEJlwmJvW2-PjL_tobpz8mvyBGFp4
        - https://mega.nz/file/fJt1gAaL#3Yuh7796cOIpwsgW0eKcyhEazIWzPKTt8Uwi8dDctr0
        - https://mega.nz/file/OAUCEQJL#q5aGGAlbc01U-d4V3cVL4AT69PeRLkR3zqVH9sC5fPQ
        - https://mega.nz/file/pSU3FZzA#5hgQfHsoSj3PJbrtZNDYQyh2isJY69fJwQ9MqRVVJow
        - https://mega.nz/file/zQs1naQQ#-DZtXOMl7HedZ6OahRjXxF9m_YtKNld6zLfbx9kffPI
        - https://mega.nz/file/3QlFFLBI#hfr62drUPUp9aH4MGWIvAab3Qd5ZRWpmd9qrr9lw1wM
        - https://mega.nz/file/CJlnkS4Z#FuegMEOT3v7FIqB24KdkyBhE-0ayIzyySQBeddyfVLM
        - https://mega.nz/file/jUMA3RhT#ME8psZJH5_wgN-YrzuDXNtMBqn83BndzRZCCO_ln-nw
        - https://mega.nz/file/kTkSFTYB#_NB7wyiIkQ7xPqM9q1EBLb6-Rxk9F5a5OpPHenU3NMY
        - https://mega.nz/file/LE1VAR6D#6Lj2-Zxtx-kAT6Pa3zMtbV0UwnUqF8JnfQqN84pPRHY
        - https://mega.nz/file/PJ811bRS#Jbv_EoAGxBUXIKCM5ZiR7I6UvFivlSvCfNMRPQW1l9w
        - https://mega.nz/file/OM9EFawL#VzDJVQc23n1VbUQvFyNgKexwtk_UWyzurMpSPzUUnyg
        - https://mega.nz/file/oPsXDAzZ#RsAg1VV_TgfDAeK5--UwET2SuWEBb5Pc49_2U65m6hI
        - https://mega.nz/file/gCVCiIwT#xlbIdzOPj7uJD2_CsPeh-3DfHWexvB1AdIWFHZBuuFU
        - https://mega.nz/file/OdNgTLZA#6VK7kp0Qo0S76-VuKWcqwiTNAnZcKMmPJzHBIyNHnT4
        - https://mega.nz/file/bdlwGKaJ#9uwMN_s4cqAQ_zucQKLoR77wGGuayqPHWsBwczSlEVM
        - https://mega.nz/file/cGlhib6T#eRmfu_g6-KN9FybbOT-AmXEeqdJi9Eab6xGsHFtHORo
        - https://mega.nz/file/cL9THLrA#Q8_d222r4O3oI-VEsOUtpr54azh0Mttaiyl6NUD-k9U
        - https://mega.nz/file/kfVkTSqL#977bjBnGIyo6eylu7FuDcQeOoAeZuhIWZYHC0cp8dLs
        - https://mega.nz/file/PYlngZwY#1N2y7Erar3JX-F-Y-RaRfl2uhjuACDN4qWzGhmTIlTg
        - https://mega.nz/file/QW11iLxS#ChbNwmyHxSPQ6IiP_Rbc9fQB9okN7TRgQweulPFuYT8
        - https://mega.nz/file/SAFgQIYC#Uc5h7YzbnrmNau89CxqCflQ2NSwELxUCGBSNxC-GU2s
        - https://mega.nz/file/xOdhkTDK#6w01Kx6pl3pVly23A1noJUV6vmcRp0P_NQSx2bStlbQ
        - https://mega.nz/file/YSUBSZAa#tPwFMjAPMVxKwEb3f8zLMy0A4Cv3ENdNTp7Z5rXVk04
        - https://mega.nz/file/HI0jjADD#9bs5XSOuzwqYt_AOtLLNGJiIkbIHqcxgi9Idq1U0K2E
        - https://mega.nz/file/QGtDRIyK#0stYB5RKYsCf6Tqr9v6SYlwI2_qIddN71dNdhnD1DYw
        - https://mega.nz/file/Ub9QQSSI#qu4uxaMc0YcsdontPnfoXShSG-gHkE5zjY0RjTRciRM
        - https://mega.nz/file/VKkWXD7C#NTVqXbVFOYFIzu9dLRG3u3uUuo9e7HllWFtmKrnaa_o
        - https://mega.nz/file/LYcCAB6A#fs7nNd9wFv2nhqER5Q_9vyWlD9V_qCA5PrsYPX8WgAE
        - https://mega.nz/file/PVUmXYqS#dD94JXa5DA80FSsZRFcNNCdtfAehfCf6JWF6FHe8SUo
        - https://mega.nz/file/GVcUXaLa#s2ra7YUf7iXg7lZYFVGM6Mmzg0us8gUH-azKDak_JC4
        - https://mega.nz/file/KRMVhZRS#UDOjRV3YviePC-7bFNrVlxcDphtxS0P8kmVBhWOPw68
        - https://mega.nz/file/rZ9VFLgJ#Zit-zXjedJeCrbRUMktEsqVkoRyGMd_J8UTnfG5ZhEk
        - https://mega.nz/file/yA8CjLRQ#wv_Q1DA3A7qrjQxogxRLWVPDBPRdoqlQ2NnN7f88ktM
    runs-on: ubuntu-latest
    steps:
    - uses: actions/cache@v3
      id: cache
      with:
        path: megatools-1.11.1.20230212-linux-x86_64
        key: megatools-1.11.1.20230212-linux-x86_64
    - name: Mega
      if: steps.cache.outputs.cache-hit != 'true'
      run: |
        curl -OL https://megatools.megous.com/builds/builds/megatools-1.11.1.20230212-linux-x86_64.tar.gz
        tar xvf *.gz
    - name: Leech
      run: |
        mkdir leech
        megatools*/megatools dl --path leech/ ${{ matrix.url }}
        cd leech
        find . -size +2G -exec split -b 1G --numeric-suffixes=1 {} {}.0 \;
        find . -size +2G -exec rm {} \;
    - name: Upload
      uses: svenstaro/upload-release-action@v2
      with:
        repo_token: ${{ secrets.GITHUB_TOKEN }}
        file: leech/*
        tag: latest
        overwrite: true
        file_glob: true
