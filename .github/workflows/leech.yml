name: leech

on:
  push:
    paths:
    - '.github/workflows/leech.yml'

jobs:
  build:
    strategy:
      fail-fast: false
      matrix:
        url:
        - https://mega.nz/file/bygUHILD#4dQmqsmjER4S13hluIpVXyCrkBdglyCtnY8raoFzpro
        - https://mega.nz/file/Cy4TyLpK#-xGQqZRKTEwMQ8qLzBEHKNgl9eBQ0PruM0jR4y9pDVw
        - https://mega.nz/file/eypACY4C#N5fN6P0Bp_lxMMPn_jkNkRqu-iUEE0tgcX1p3eiBPY8
        - https://mega.nz/file/6vwAnTpb#IFUTxphsDsB1qmoAGMOUBri456jJJh_TYWP_QzD92Bc
        - https://mega.nz/file/6Qcg0BAT#ZD-E8sQZFN1saRuQJOl86PqetnJoNRRre_IXDbBgObk
        - https://mega.nz/file/iYkVDZ6C#tJjM-AmdhjD3zRiVYU-14dPfcQwLaWUzPrmqTeRA7f4
        - https://mega.nz/file/S7gFBChL#gM5QSQuLJlGOdF2XMimkynVxL9HlvKuDMT1ym8lhx20
        - https://mega.nz/file/vyJ3XbqR#ouruMCkhwv2B3kKZ0xPBqaSStI1ysnbOJqejOEbqQks
        - https://mega.nz/file/e6R0xbwC#T6u5YrDdxyt1c_43gr6dufiqGb85dsg0Wb90_eX1b4g
        - https://mega.nz/file/u3gE0BZT#xYJAtWvQkr5ZmtYgs8iFa12WPjCzqAF6sQpGQezcUKI
        - https://mega.nz/file/365GBQ5C#3OY7TgTQfRVIKO-jcfD3JerxbgfKqVxac9g7i-aLNP8
        - https://mega.nz/file/HjAQiLQZ#GUmPV2oFJolMgli_5TNSlgqHDEvHHwc6xCrELo2QcaQ
        - https://mega.nz/file/3m4S1DjJ#Gcb8YXSIMs0RZuykxB11f1pIOnFI61fxqj7fi272mWw
        - https://mega.nz/file/j2AHHJ6C#TMKOJPVyLXoe_hmIZcrd52YUQX9nL3R1G15mxtB9CUo
        - https://mega.nz/file/63RWzQCB#iXVagJyZmde510OxNMUWGoOrS7D4WGxPCN705lPldG0
        - https://mega.nz/file/jnwRFAiC#D2ok6SoOzy_bYCkKZ42G5BRpCZ8qyRUE_K9EcHXeaiQ
        - https://mega.nz/file/juAhnQDa#jPe4E53650hHXeVAdX1hnHYY32E5-NYIY-1_x-bVRKI
        - https://mega.nz/file/enwkmKya#ndVPLU09FvT6PtaavUxi8UyYzAGJdz20ATTygGkwoBk
        - https://mega.nz/file/PzJXXZhY#jHakCUobHTQOw_uS0brxqg2W-4KxyXlU8wck947_p2c
        - https://mega.nz/file/b74S3agD#OGFMAf35sX5V-PCwHnSC07Bdnl3yvdXY913lsQ4uZ2w
        - https://mega.nz/file/qnBglRrb#pFm4cyogJkshz6HPC3qDPGIWG1PmChjMFQVs5ZBtqp4
        - https://mega.nz/file/qvQFXDLC#amgarRb51uFlr_imYG6GS5530j2HDmHrzlVqbE1HNzU
        - https://mega.nz/file/i2QV3IwB#JYnw9jGOEvDLnwgVmVomakpUqz4xLSDnnhCePzSiUTQ
        - https://mega.nz/file/Hu5RDI5K#jkaaczifHK4vk5JHWSOBPQWRNA9-6y4ojPKSVBqXJr8
        - https://mega.nz/file/QyNXHJba#WP8Ibf0d3yogrQ6eOZqKeot9XVXjMAGu6Pdvp6YlC30
        - https://mega.nz/file/uB92EApZ#6Z0t9HMnDbBp9l6dmUw4xN1V3NVS1CGsKfWtXl2McGw
        - https://mega.nz/file/fZESgbSa#pZDKpVoWIsQoYbd9LVdnbJvGQp4ZA3_YQAMMLshEMEo
        - https://mega.nz/file/fYdCyL7Q#wpDjahWASEyxYOnceCdyn3J5vSk5gUOOcq7tjaJKlnQ
        - https://mega.nz/file/yEcCiSYQ#tQhfjZfoRifG4w7JR878KocWliTcx4eN1_yNBYkH1Eg
        - https://mega.nz/file/qMMGyKYT#ix7pBOJ6UE9omE7S2H2rhWb_iCQoqnbelxQ1IzlHazg
        - https://mega.nz/file/3VlBVYbJ#ExQG-w_MweB9IXT1aA6wlDxyxrglADCN0F8asGykbQI
        - https://mega.nz/file/uqxXkRBK#dQ8rNGWMu0-USM5FAtxJSBtT9MYXg4tFjiB9_mfhs2o
        - https://mega.nz/file/vyInXBYb#VMl6JhrZSqOsG9QVRo14xTih1OcvWJ3b6A4wV5xajOc
        - https://mega.nz/file/67oXwY6C#RV5OgA6BDGPzUPZvrPLU9SWT9UnA3GjMtMMkCEskfV0
        - https://mega.nz/file/Kq52EQBQ#tyY0S8cE8BBvTl9UI5LcVoovhOhnOo45PqPqxqKIFZM
        - https://mega.nz/file/v3QnAQTJ#kGe6JWiIv5IVWVRP9szutokFqRIYft2xtXSXnJIn_Ok
        - https://mega.nz/file/vvREBC7R#x6WUmyoE0NkdpjZIc7GPvyrIx1UA8hOmrNKTN8CoJGE
        - https://mega.nz/file/zZ8nTI5Y#G_TOWk9bJQXk9EMfNHeackYiX8EeuAxnBMBhcmBQ4Mc
        - https://mega.nz/file/jQVg1BoL#WnLVEK_wJ4P-x-IKMbLR9_oTRiq1tS4fCJQrJZcBsng
    runs-on: ubuntu-latest
    steps:
    - uses: actions/cache@v4
      id: cache
      with:
        path: megatools-1.11.1.20230212-linux-x86_64
        key: megatools-1.11.1.20230212-linux-x86_64
    - name: Mega
      if: steps.cache.outputs.cache-hit != 'true'
      run: |
        curl -OL https://megatools.megous.com/builds/builds/megatools-1.11.1.20230212-linux-x86_64.tar.gz
        tar xvf *.gz
    - name: Leech
      run: |
        mkdir leech
        megatools*/megatools dl --path leech/ ${{ matrix.url }}
        cd leech
        find . -size +1960M -exec split -b 1G --numeric-suffixes=1 {} {}.0 \;
        find . -size +1960M -exec rm {} \;
    - name: Upload
      uses: svenstaro/upload-release-action@v2
      with:
        repo_token: ${{ secrets.GITHUB_TOKEN }}
        file: leech/*
        tag: latest
        overwrite: true
        file_glob: true
