name: leech

on:
  push:
    paths:
    - '.github/workflows/leech.yml'

jobs:
  build:
    strategy:
      fail-fast: false
      matrix:
        url:
        - https://mega.nz/file/gG8hkRAS#OPviI5WokKFwwMQF1Cjr4zN2qpMKMtG6i-_fPYpB29Q
        - https://mega.nz/file/ROl2jCKa#74Iz8cEN6FH7gqiU_xFTigalRGBtlQzOE_PYkTnIP5M
        - https://mega.nz/file/4D1QCIbJ#gDdqTF8JQZ1qp61FR5Q8tpOT8nW6NdkI5mbY4DY-AUI
        - https://mega.nz/file/dLVGnZ4I#HG2JiTIvLNmSko1otRe-i3k5k7QPX7hxS-4coYJVxDQ
        - https://mega.nz/file/tfl0hL6T#FIipmN6IE-cZqeh-qj_v_l9_0rgh4KBfDI9GxOFzAwg
        - https://mega.nz/file/VKdDGboD#yaGnxG1ytLej5Ye6sFAB9CgD8a5-suyG_wWgiMAkj7I
        - https://mega.nz/file/ETVjVa6S#f8ILVI5I2zg6V_W9bmzd3FaPnw9CAvWJ7G41xy2B-4E
        - https://mega.nz/file/Va1RnJLR#CdHvfj2yY3PeY82px9J0tUbezx_etttsGE4-35dDu_o
        - https://mega.nz/file/5Cli2TCI#XsPTh2Fm5UH6ZItlBIk1o9ijwoAh5bW_Hg74aFmW89w
        - https://mega.nz/file/gSc2yB5S#sAvjUvxMkLbXaOreNfjJNZKXAyAN3U6TCWRuBjUObrA
        - https://mega.nz/file/IWNj0RzL#Ae8jwyVb6KbA8rxBsIOdx_jAEm_mPQ6BjTQqaShPbnY
        - https://mega.nz/file/oXEWyQ5D#6Dv8PFhpKal9mCKO8OGcYLL6wvJSsijPsMyOgWIr95c
        - https://mega.nz/file/EG1xQIBB#dzhpNcUX185n9f-ojUxSiYHub6PrQ4FJ3r59LXXPubs
        - https://mega.nz/file/RGclgKDQ#PqmGZ4Tqn-cSwuG5gZMMxpa6FMd_1RXMw8LH-XK8QrM
        - https://mega.nz/file/0f1iVIRC#zxCHegFMfP2Jo1i-eeW9I0oZMGQ2AODJNtLchadK5zQ
        - https://mega.nz/file/8b0QQKJS#z9fC45_3oMkY_bKZ7fUxltMpQN0b0DQvpk7T135mMsE
        - https://mega.nz/file/hGEC1Dpa#-NHF_GCSadzirXnyrb7tGkMwRPA6vq1qJNHmcDehBoI
        - https://mega.nz/file/MCMS1bCI#jy3mpGso__H3j6wYjGzdDksMXiX98KkTWpcAiTDzS80
        - https://mega.nz/file/pPtCCKCT#iEhsZswtcx2tOU08IfjeJ8pp-rbFbKCr6-3lgXxKF8Q
        - https://mega.nz/file/VaFVVYTD#_DokTn_2_L_z5FeacWd-K5pGpGDM604BWgqmcb3kB24
        - https://mega.nz/file/wPVnhJLR#u93wKg2_goYmqLiXx2kjGodXK06Fa8O8pCdzStBbi_g
        - https://mega.nz/file/RKlgXDjS#It7jZQEXgNx0agvuH_3856UdhcId7OhWIpy0xyXLeAU
        - https://mega.nz/file/ROkHkYKT#eXrTg-R2Z2vhWKeug6mS4nt0MLRYVdgwUbYMit9rb4E
        - https://mega.nz/file/RKlxCDBA#q2VJt9HQylH3ICWKbu3OjnBV8Qy4vKtSfBulF_gcqXo
        - https://mega.nz/file/BTMn3TqD#qu23JHW-xDzFrbPgxgj5TZwDsptaykzmFQ14mRKV7yY
        - https://mega.nz/file/lHVDTJYJ#BfsBWldTSyEUBBnvOZssgH1oh2K0yuFERSFkeEhTZII
        - https://mega.nz/file/BTdVDQTS#BWMY7TdFgfUZjk1Ta-Pnc6-vkxfnRxw7BHiMWuD8V5A
        - https://mega.nz/file/4e9h2ZLa#OhBTJCZK4TqtkUoWSehw2I_Zj1Hj-RKNh0Dqkr59170
        - https://mega.nz/file/8WMEiTgK#UJLU_JOwMiP_ip1ckVcwz-a0L_9tzc2McbBtUUSwSrg
        - https://mega.nz/file/wCVm0SbQ#HUosrgNFx4j2vevpK9zD3yXc1TedhqQdRs1C68QQDdo
        - https://mega.nz/file/xCcjxJyQ#CHaPHNOGk4WfMEYZPf1ArDjbQnBd9SqMPIFo42Rext4
        - https://mega.nz/file/oaUwGbxR#uwXk-KxVvSy_ltB7s1WLFK-0pIL5aCrUYXeIg-WmHyk
        - https://mega.nz/file/cbcVyb7a#sptNo3PiUEuKBMpRIjkAYOiTYsqvL7ib-T2ugN6bgm0
        - https://mega.nz/file/QTtB0ISZ#C-nPJmJX5ZItoSNGeGvYDYEqD0f6RuZ732gajPlq3iQ
        - https://mega.nz/file/oW9yxZqR#W_AMXtkswTF5cTv83EgopzGVTPtbxckdOpDNEm8Kieo
        - https://mega.nz/file/9TsGBJRJ#iZUsb2OJQjxU51A-qKb7B772f6YXb7D_lbr80xASRoE
        - https://mega.nz/file/RGkSAALK#N5SWmT-8eWOIPzYv4kvpLotegaJvnwuAvPvgYEvN848
        - https://mega.nz/file/ZH8RyArJ#UB96Cyea-0A_QR8Rq3-DrrcZZ5Qh11Xuc7w8O3IRdI8
    runs-on: ubuntu-latest
    steps:
    - uses: actions/cache@v4
      id: cache
      with:
        path: megatools-1.11.1.20230212-linux-x86_64
        key: megatools-1.11.1.20230212-linux-x86_64
    - name: Mega
      if: steps.cache.outputs.cache-hit != 'true'
      run: |
        curl -OL https://megatools.megous.com/builds/builds/megatools-1.11.1.20230212-linux-x86_64.tar.gz
        tar xvf *.gz
    - name: Leech
      run: |
        mkdir leech
        megatools*/megatools dl --path leech/ ${{ matrix.url }}
        cd leech
        find . -size +1960M -exec split -b 1G --numeric-suffixes=1 {} {}.0 \;
        find . -size +1960M -exec rm {} \;
    - name: Upload
      uses: svenstaro/upload-release-action@v2
      with:
        repo_token: ${{ secrets.GITHUB_TOKEN }}
        file: leech/*
        tag: latest
        overwrite: true
        file_glob: true
