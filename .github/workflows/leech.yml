name: leech

on:
  push:
    paths:
    - '.github/workflows/leech.yml'

jobs:
  build:
    strategy:
      fail-fast: false
      matrix:
        url:
        - https://mega.nz/file/KUthEYBZ#4QRNOBv7-3F5fDUBOb27uk6QEkTWeMDoy4zZ0Raab8k
        - https://mega.nz/file/XVsHiahA#vT4R_uQa-4UfM9T8lZYHaH9VjIaJHau4a-mWbr6_L5g
        - https://mega.nz/file/KZcBGDjK#0rNmRGanlB_VeqsRZaqtqkzz0TYD9ZznuB8_79dfELs
        - https://mega.nz/file/zYUTUL4Z#zenZECiNnTPIcOXiqwzIKsNDhOdcmAjaWx1_U_TzSwg
        - https://mega.nz/file/7EdXGZqA#SGl3-hxG9km_Wlsobf-Y07w-1-XE-AjF4xjaWqtsJTU
        - https://mega.nz/file/TAN1DbqC#A0qW7xaDjqsnrvIsfdnSdcOW-FLCvQiE-YWLF605EIU
        - https://mega.nz/file/iUMCmbJI#tCn1S8H8PslTcO50DAnhGSAqeWsTMGvY8ebEuuU0l0Y
        - https://mega.nz/file/OdNyWKpL#EoD5YEDIGl0gsc4L8dOLcmhsI6YFpr4aqB904pXyflM
        - https://mega.nz/file/2NEj0bgJ#3DE-bJWGYr2Ir2NJj4OewTfX-qo6ZIhEOrL1GKU_w6E
        - https://mega.nz/file/B8gziKJb#3DE-bJWGYr2Ir2NJj4OewTfX-qo6ZIhEOrL1GKU_w6E
        - https://mega.nz/file/jJESHBST#sp_EoSKqAfA8UHfIVuUfNy12fLYGnmAwL-aNQFIFUeE
        - https://mega.nz/file/mR0gUJDQ#4wzbpzWWu2ZHrxVJO7ruJIKlNfvF1mXDTD7B_cRg7Wo
        - https://mega.nz/file/OMsjyJIT#6aJOlol4QOFQ00Cot99cwq3-6QB9-eqsEvBsN0LZiuQ
        - https://mega.nz/file/XREUlLLK#sOPbTGol3H0z7TWbHvXnSqqKquhSXhee5DLKkjWdRTE
        - https://mega.nz/file/fEsXnD7K#OgBTnBGAj4-MfbqIf5-WubIIDw_gOaLt_tVf5kBQZjg
        - https://mega.nz/file/fQ8zXCyZ#Sof1sN4T9LErFse3YCpyY1t7rgRKtQ82Q2769_ueyjg
        - https://mega.nz/file/TYclwITZ#OyIPiEP36X6251BVwQOpQxkn-3LYTGi_Hk7iQRcY8js
        - https://mega.nz/file/GU9gCCiD#F2FXkYvVivxjyqxba9O2vRQrBg-3BQ-TI-4yIPriH14
        - https://mega.nz/file/nANFkbKK#FEy8PMotAOuJksrCnJ_jCBQSdaaFIRuwSdpO3K9gEtI
        - https://mega.nz/file/bEMgjSSZ#io_opA93zasUXJYzocFqMlNHUxCsb3IU9OpxLKeJTZI
        - https://mega.nz/file/uRcWkZZJ#uDbpKEmgd1_SA3Mak6lC6oYFMQZGidGHqjf3RNwkrv4
        - https://mega.nz/file/uZElyJoD#WGv7j6MWrDBkaO53Rji33bDgL_UHsCaZXL77eCSCoMg
        - https://mega.nz/file/2UFgiAaJ#CLgMFk8trVDdSCIR6_wLVgZnsILcBowYwtL0wGquJBY
        - https://mega.nz/file/2ZV2RAxK#FyFt5KGnrX3BXXgCsXB7piJfDjwi5Dz7iSkAB87w9bo
        - https://mega.nz/file/3cNSlAzC#3NCyf_B1dDztSE96xad3t8E01N11wbMDaqiZOK_-udI
        - https://mega.nz/file/OJUmhbpA#TVVjxIejNykOoPhJ6yvFUixE9FWt4Mfk7tPF5bXOB_8
        - https://mega.nz/file/jR1GHSLZ#lzEEJoK5fvzkUUn9dMEb5XaHQVOmIZac53MtRSlGEjA
        - https://mega.nz/file/fZ9RlLQZ#aY3hvXr5h4n8vFeZ_xDv7m2NJYT2tlvOj5XlUumooLo
        - https://mega.nz/file/GdkGiRQJ#W-SUQs13ecVwCzv4psYdB7ZgJUVVey39KXY-1bjTozE
        - https://mega.nz/file/jU9DlbLI#qxKkLzDY0XFrOKy5k509SgMCfIqIpU8Fujt40CqWF8I
        - https://mega.nz/file/eFtHgY4Z#DBpxM4AbDQDAErpgYVXOa5RGHJ0bEof6P50p2auI1ek
        - https://mega.nz/file/HQ0HAChJ#RG45Dah_69eg25xjcFwfRa4iXpq804saRwIbeiw6S7E
        - https://mega.nz/file/WEkU0TiT#hTc0eREUaaXWN3jCvzp18-6ixoOvCYu_9Kga-56Jf8g
        - https://mega.nz/file/TIk3Wb4C#azSDKFOTP-6IVC5eeBcGRi7voEyJXdThZkDdgQ-dxtg
        - https://mega.nz/file/uY1UgLAR#1EgwglOw8amNSlYlJ5M8CT1vTB-nrIZP7KvfxZz08tE
        - https://mega.nz/file/fIc1jC5I#fzQlrwhhiadV_h0fNSpdWyy73QxscJrouXHKsMjH-bo
        - https://mega.nz/file/HA9TnQTR#eHbSF7TQrJ3EVrcSqmKNb8PyzI68RHUNfHEIeCgTbjk
        - https://mega.nz/file/LQsEnBYA#SR2ZL0mRgLLxp6ETf0bPVA1iYxaRhavZAP4JK-VWHkI
        - https://mega.nz/file/qdVTBIBD#1Zep1f5JlboRdkVmgxSjRiu0YtQb0nff9FDocJTl0VY
        - https://mega.nz/file/2Y1hjJyK#1J9D1-TDFuTXmBwwr4XvkBnHcsEL-zZXI8LH4cL31SY
        - https://mega.nz/file/uNc0XZbA#IgyZKV_Oy-I1I_Qoq6nSgZ2hUEGgFBX3xLd01V-M9SE
        - https://mega.nz/file/2RVTTBJQ#hFdGvbQzkBpN8SP_UCZTAXeoXW8Gqi8vJFIZ4-YqeMg
        - https://mega.nz/file/uZky3YRA#NLnHXCueKjRS8RrimMCp9m0eUfQ_86hSeTSBGiYpUdA
        - https://mega.nz/file/nZVBjD4R#jUmdB1JX_Q3Up3i1WB5ta8DbS5S_fycZxjDtqORrb0A
        - https://mega.nz/file/uQEjlaCJ#Qb-T85i3RHaa3l6ITC_RI2VrgZgJdrLa7M-ZDsMB0Tw
        - https://mega.nz/file/WU9j1DYR#4iEewm04gjS2zFW2voke4QkaGkYsI5ALS2D2VuoAVP8
        - https://mega.nz/file/WZU0kawZ#XtnalLQUu6DJq7QUlsBhTBuVPdkQZRzKCDa5V41Gh78
        - https://mega.nz/file/6cEWDLhZ#gn0AiVgmb-YeeSd1bFlH67Wn8MUI8UdCNLHO3vZLU_4
        - https://mega.nz/file/CIEzzTCC#NvH8eyoGGolmVT026-p3Gv0jVQBHcvsUQLteHyejqvk
        - https://mega.nz/file/XZMRRLgS#Y-b91KpqJuZzZzWR2h7W1LNl1t84G5kiWNWg9iD4rUc
        - https://mega.nz/file/TAFiUTLL#4IxmoidbcxrIlKrih_UelQlNOAv9AvkWweZB7sZkpYA
        - https://mega.nz/file/vdN1xSDR#UZqSWlIA_UKwKhka-meLPTrJ5PJRUzu9rgqOKe70ujA
    runs-on: ubuntu-latest
    steps:
    - uses: actions/cache@v3
      id: cache
      with:
        path: megatools-1.11.1.20230212-linux-x86_64
        key: megatools-1.11.1.20230212-linux-x86_64
    - name: Mega
      if: steps.cache.outputs.cache-hit != 'true'
      run: |
        curl -OL https://megatools.megous.com/builds/builds/megatools-1.11.1.20230212-linux-x86_64.tar.gz
        tar xvf *.gz
    - name: Leech
      run: |
        mkdir leech
        megatools*/megatools dl --path leech/ ${{ matrix.url }}
        cd leech
        find . -size +2G -exec split -b 1G --numeric-suffixes=1 {} {}.0 \;
        find . -size +2G -exec rm {} \;
    - name: Upload
      uses: svenstaro/upload-release-action@v2
      with:
        repo_token: ${{ secrets.GITHUB_TOKEN }}
        file: leech/*
        tag: latest
        overwrite: true
        file_glob: true
