name: leech

on:
  push:
    paths:
    - '.github/workflows/leech.yml'

jobs:
  build:
    strategy:
      fail-fast: false
      matrix:
        url:
        - https://mega.nz/file/PZxTxKQJ#roswkgtHeR1hXi3b0uR9UXMlXkk8U6jMrEmXkXXsh_U
        - https://mega.nz/file/4QpF3YqZ#iphrb2P1Nl_nRwu17K7z5exSkjH8lPv-DGzp3kC8Cc4
        - https://mega.nz/file/mGBwGDzR#qyZxObZ6UN4EzYvVzfgKZUyZebw6WjuOT9rwqnOoWOM
        - https://mega.nz/file/6HIwDRTQ#JuZ7b4a9v-mm8M0LqeV-Vl7j8OMsfL1oc5evar6vJ6c
        - https://mega.nz/file/2XRUgLKQ#ph_A--4WntlHm3-iD3a99bGOa4-sYeLsNZpe6jMfpXE
        - https://mega.nz/file/STImlDaR#huMyrQ3PsK-EyZnt3CJoONkcL846-o2NI_MKOpvJZbk
        - https://mega.nz/file/DXR0mTZY#n14xq8VuvCdzFHpUr4eANgbpYFpdoJCoOdw0W13N9_o
        - https://mega.nz/file/THQiTbba#3FyvhDB547axk7bO2TAo9Ur5qLN5PbTu-3g9gi4vjq0
        - https://mega.nz/file/PKhEFSjb#SOeTHgGjksQ9oPu6yso7VWsjUzyCnzUKMh_V5Z955hQ
        - https://mega.nz/file/KGw2FKbK#JweDeZDcuC6DiA4wsEdtviBUWkUI7b9drnEycMev4e0
        - https://mega.nz/file/LDJACLST#eDGOXkTQPbn27lguM1yBNGnrfBaSBVC0PDbXI_u-PNw
        - https://mega.nz/file/WDYQ0LrK#iDQtgTcdZxB7YrG9K1e0pRqlK6v8kQeDCYedKcHtoNU
        - https://mega.nz/file/TfA0UBbK#SypMVVwsit6vCY0-DusdlJgHhjNFUJxwn_TzJwgpdsk
        - https://mega.nz/file/2GZQWZQB#zu8u5FAO1lYLUVbyf4SvTXVGP0dXemg6hYfrNq3G5Sk
        - https://mega.nz/file/GLYSmRLR#XeU_oaxbXz9SqmTIgmFgGvBgHo2m6ZXdFWQrIsrIjF8
        - https://mega.nz/file/qCJAlByY#HoY24dwQ-zH9CiQ2jaRc3whNdzSLdkCbGowdG-8i28g
        - https://mega.nz/file/HCYkjToS#SZlD_RyoX5xDYSPmjuJpD7x86imBFTmPXXjV06Mq6WA
        - https://mega.nz/file/qGoG1KxK#pfzQpDdjezGFkiBpC9lPzX2teQKjcvpsmMqckiNzF5o
        - https://mega.nz/file/nC5EXCzK#VrgE5SpDTKopi0Ugc1uQ-epB2JtaSWfMzoDtDm8EOqA
        - https://mega.nz/file/KWgmDIQQ#V3VdeBqyiifoY4w18t1kEVryWQ8zJEM5GHUDF4xPpbU
        - https://mega.nz/file/KXwwGQ7B#fS4jUf44DYu1nOEPiOIJCxcevi2qVhdWFyDbesKHvdc
        - https://mega.nz/file/WaoETQhJ#ui6ZPi8Q5Gzz71VLd3M5RZuL8ijyxeDbbm70HfESRfI
        - https://mega.nz/file/rToQxSgQ#3b4J7tbW9hLQhV1v5k8UETpSsNGzxthw114ltDXhhM8
        - https://mega.nz/file/rDwwSQgY#spEL9j9M8j2vGt7jhRNTv3Onq9J1V0GRKSwTAdZdlt4
        - https://mega.nz/file/CDoyQKwC#_CJeGwPh8DVlKG-rhatGFwyGBIB4-dtI8IFqV3NE90o
        - https://mega.nz/file/3L4kSQgB#N_PpKtGy9eETC_4I-jhctItShyNAPgr7oeuI3dAcp08
        - https://mega.nz/file/aSok0AjS#aq7Ze66xtz_PuUhkI4B6y_TRifEXO74c2VYdvFPutbA
        - https://mega.nz/file/eXw2GSzD#EovQKcRLmaiB6FtsGE8pzjRBPWqEH3TSs2HnapihFRQ
        - https://mega.nz/file/CDhiWIqA#yxuC3G6D3fBNkoLXTqKwH6NRKjm_0ixQDX-VRbrXH54
        - https://mega.nz/file/naxAHaCD#lEYE-mgkjfNf8m9JqHiSSpIjT7ZJgD2eFYQNWbVM18A
        - https://mega.nz/file/KD5GTIDQ#GkdRUrj0KINk9ROQH0fKML25qpIjItB6BGpCowHGACk
        - https://mega.nz/file/rLgE0YQT#_tlUF_skxaiUA5iwh7okY2Y3D_Gch51i3w_saSmREWc
        - https://mega.nz/file/fWwQmQLS#PgpQz6IX1jew6uiHqKiOXVd5CgXgpHHqq_JkrjzzsJY
        - https://mega.nz/file/2GwQ3YhQ#o2cp18mLXrwURigF4sK8UZXLhNen6htGYmlscytobaQ
        - https://mega.nz/file/LOgwRSQQ#OpPUk1UCDTD6jxZw0uvEUpuGVczVJbZ3zm4URdt6Ezc
        - https://mega.nz/file/mSp2VaaY#s1aiOr9tNIe4p6tJPNCIYkhSCgv8MERr3-NwmLYAv6E
        - https://mega.nz/file/CfhSxYJJ#b-2UKJZNXokSoX7_JMEwL9ORja5lQX6cD7rmTVzfGvQ
        - https://mega.nz/file/6PwEnAwT#iHxMeDUVnfmGHOA_5YSTbP-kadybJs1Y-JF9zHXN99s
        - https://mega.nz/file/SFtxmCLT#ExiMygbUv4iAZPRwk_uhB94M0fnIKPFmRCdJrweoJ_w
        - https://mega.nz/file/TOhC3CqA#51wfDKBk04OeP9SUQXQBQmxkWLWeL1HEsbu72t_1-4Q
        - https://mega.nz/file/OX5yxKZY#CS_mfNvwB7RMcLPdB-Jl1WS296nIGsv4C_Nwp7LwRS0
        - https://mega.nz/file/nO5wmIRJ#qsTaFLoJREtQpMrZEmx_IPMC_FkxcU5pld_Sp_kaqec
        - https://mega.nz/file/mHhgzCII#47xNpiCuf7Lfhk58hzIrxuvXDWJIRwbdIapLgMr6Zf4
        - https://mega.nz/file/yTwgnK5K#xNblBTL3KqT80LqLIfJvpHkhttp_3vnmaKrMnbnGB0A
        - https://mega.nz/file/uSgkhYrR#QKEDuegTBJTYDeZENibbVyQV5E1d65FxqgfUKxa239c
        - https://mega.nz/file/XCpWiYhS#GuToLnPIACUvjakM8r6LLeZiKDjp5o0bN1XyrMT-6eQ
        - https://mega.nz/file/WDwQyKYL#Mxx7pMYg6jICsoRObLav_PkePEcZ43dPXFWNcqcY_fs
        - https://mega.nz/file/XeokSKgZ#4fA02lJ46xqbo-WbQec23moygXjXZI5QSRZiMIt_6v0
        - https://mega.nz/file/7fx2kKiB#iyuyn8nLnhjhOOPil7Wx4XqcXZCCWF0RIlwdlopYMLA
        - https://mega.nz/file/rbxEgKJa#0PTHqgSK276qO9r1VMRjctYQJ5YMDey7BAXJa4LE8Y8
        - https://mega.nz/file/tjhTzC6J#tkrc5VyL88i8Kmr1iBE5rNG_k0NiIl2bJqvjSsnDi_I
        - https://mega.nz/file/BmplTYxS#GrLPN4jVvcGdpdIL6BJNxDUO3L9jQLwRUg_IE8V5x6M
    runs-on: ubuntu-latest
    steps:
    - uses: actions/cache@v2
      id: cache
      with:
        path: megatools-1.11.0-git-20210505-linux-x86_64
        key: megatools-1.11.0-git-20210505-linux-x86_64
    - name: Mega
      if: steps.cache.outputs.cache-hit != 'true'
      run: |
        curl -OL https://megatools.megous.com/builds/experimental/megatools-1.11.0-git-20210505-linux-x86_64.tar.gz
        tar xvf *.gz
    - name: Leech
      run: |
        mkdir leech
        megatools*/megatools dl --path leech/ ${{ matrix.url }}
        cd leech
        find . -size +2G -exec split -b 1G --numeric-suffixes=1 {} {}.0 \;
        find . -size +2G -exec rm {} \;
    - name: Upload
      uses: svenstaro/upload-release-action@v2
      with:
        repo_token: ${{ secrets.GITHUB_TOKEN }}
        file: leech/*
        tag: latest
        overwrite: true
        file_glob: true
