name: leech

on:
  push:
    paths:
    - '.github/workflows/leech.yml'

jobs:
  build:
    strategy:
      fail-fast: false
      matrix:
        url:
        - https://mega.nz/file/XJFzzB4B#_BSLJLzMBh1jzoDrBFAXEGuhO8rBa8WeHgCZRAFvzS8
        - https://mega.nz/file/rRUEFToK#pItJ5lN9v56VLqvWf6Qi9_JJ0OdcvUPGX1VsO20R0wA
        - https://mega.nz/file/iQMETIDA#nSZ2v84tQ1lXn53KrM8hI2E5A1K1vNj1K1h3DKRhnsE
        - https://mega.nz/file/WdlFSQ4a#NOGDnUQ568Pc36SSiksSQSE-1sS4lQLA2s-lF5-1ZBY
        - https://mega.nz/file/HZ8zxIjL#rYRGdtfKpJXLI3ZsGf-sMQwA8HDsWhDbxCtjMdFq5ls
        - https://mega.nz/file/qNd1XKSL#vxWOrdf9wPrufMVV3gY1Tbzzvjyd3kCBF1akqQEltkI
        - https://mega.nz/file/aQ03ASZY#4AlUlnQeZEdqK6_K1L06eQ0uPNBCrhsb2wTHkVbslB0
        - https://mega.nz/file/jAlTGYAY#d8-y2EtZmoZ_wu6iCw0AS8IIB8cXiC1lYMqFJgf_UHw
        - https://mega.nz/file/fYEWSQIY#uElsv7ul2_vfTt1r_jsQqxx8tr0teQa3RQESgTMw3Dk
        - https://mega.nz/file/jAMHzDCD#eRHVUenGZIOQ7AtrlBXppzBfiVnD-pc9YD8nxBxUJpU
        - https://mega.nz/file/LJkBBIrB#SAw8g9zushn3gMNhzCjdZ6cxHtuT7-NkR5P1GFyFeOQ
        - https://mega.nz/file/2UtlwSIQ#-KGcPtWtdQ4KY-bKu0eJ97OvdruRg7R8DKjA4msw0bs
        - https://mega.nz/file/WVly0JKY#9Dizy2NDtFcWhaLjq32xrH2mkfFhO6Bd4zxhwR35-1w
        - https://mega.nz/file/2RtTSSAK#5EQd9k7M0ZHfRVx1kvnb9cDTDSZsAat7d2DY4WhLj_A
        - https://mega.nz/file/6d00CQ6Z#5C0AjERj92GT0lQP5BXTfhWCABURCZ8Da6XB5Zr9Uqw
        - https://mega.nz/file/aJVgHIJT#G-7rL9Qpych5nJSS39BuLI24w7-nJuDt8OrpGznqOrE
        - https://mega.nz/file/PBE30QIY#m74eiVqIOoOl9TVAzXFcygG1kPu2xFBnD0o0ELcZCvg
        - https://mega.nz/file/OVFAwbZa#AOsdXB2Dw5xj-7JOt8kw20WftHiAvyDFYdlZeslaTfw
        - https://mega.nz/file/PBdmzA4K#qdc9lDEXzM9j58hSyZype07DIVp4lJ_MRWYcvds2ruU
        - https://mega.nz/file/WE1mgLxb#JqOSEQU_3mumFtLwQ9bui7bd7jdEmPPijbPJ3AKEMcg
        - https://mega.nz/file/CZ0WjKhY#RC5OlP3c06V6rKE8FZIlElv0KYnw84DY22d3wDXZHjk
        - https://mega.nz/file/WMFXCBJa#WJEroOAmMbhn3x7Hn0Ge50sXvYgoVncxuDqCwdJ29fc
        - https://mega.nz/file/GEd2lT5S#htp4xNp68K2cTUGqSbOYJEpox12T5_H17FIqhKL5QRk
        - https://mega.nz/file/uNlCTR7D#zj4RgGeTMojbe_TKGmwTPTbet_16v4_5tCx9rLQG_6s
        - https://mega.nz/file/GEFSDYST#236zkc9mT7k1u9lY2VvLso19yFKcNV2XEYv3aGvnt7s
        - https://mega.nz/file/LYVhWDhJ#Jw3xY7hINqYiM3k50kbTok2kRstF5AJmlRNjbh9r08U
        - https://mega.nz/file/6J9h3bqR#BCDXksm-CKQnQpzhJ7nW6PnpQpS-t-6y0KpIiMDChII
        - https://mega.nz/file/yZFjSI4A#oJkpA07qPy0dKGf3QtVe0Q7E8yoigME5Gi16nvHCS3k
        - https://mega.nz/file/SElhlbwB#Vv2DsV9WgkSu9pQxpohVELcX9QWjD-O28K1D0gA3irw
        - https://mega.nz/file/ud0R3C6K#iCTEokLBiGkKy8cn6Nm8qzhhSmweOQna4MKFU7l8Ydw
        - https://mega.nz/file/mJt2TBbQ#sfLxpyTMYpRXSMSy9sr9N03TA1drcd0tHN1MXJNNIfg
        - https://mega.nz/file/acFVBT7L#IYyA1uH2DjzZpPdWSSYJof7RWk2HE3Dcjmojo1Qebag
        - https://mega.nz/file/HI91HKRQ#J4qHp301f8eaMeZ9LU0dIXdDxcibsbXHEDpwDUR3icg
        - https://mega.nz/file/SRMizZhT#IYyA1uH2DjzZpPdWSSYJof7RWk2HE3Dcjmojo1Qebag
        - https://mega.nz/file/uFdlVSCa#J4qHp301f8eaMeZ9LU0dIXdDxcibsbXHEDpwDUR3icg
        - https://mega.nz/file/GU9VDYTb#PEqP0745Lopqk03oT8QDf6Mcla3C0UgVCfMisnyYHjA
        - https://mega.nz/file/HEVnhZxB#S1OxERMd-OOt8zd5JqHxXVJCv2tK4dQy_qpTH_LahWg
        - https://mega.nz/file/WI1D2IQB#S1OxERMd-OOt8zd5JqHxXVJCv2tK4dQy_qpTH_LahWg
        - https://mega.nz/file/XRcFXJbZ#PEqP0745Lopqk03oT8QDf6Mcla3C0UgVCfMisnyYHjA
        - https://mega.nz/file/2MdmCIAZ#DQRTK9btkmoQFZ4d6qRsX5alLjWa8iuVCdxFd4xG79s
        - https://mega.nz/file/bEUSCBBA#TUoF4pX3d6MngVjeTwuJuAJEwG7BPcGnrzlUE1ly5d4
        - https://mega.nz/file/bQVnCCyT#TUoF4pX3d6MngVjeTwuJuAJEwG7BPcGnrzlUE1ly5d4
        - https://mega.nz/file/fE8zmQDJ#yKo7Jca-9EBawhlZaHFslFyeI5oVcFnhDN9JGa-uTiQ
        - https://mega.nz/file/SI0gXTSR#DQRTK9btkmoQFZ4d6qRsX5alLjWa8iuVCdxFd4xG79s
        - https://mega.nz/file/yQdThR6a#yKo7Jca-9EBawhlZaHFslFyeI5oVcFnhDN9JGa-uTiQ
        - https://mega.nz/file/SAUBiZ6Y#GFOe4xBBNYW3HmADXP0E6uLV8_mZ1ckdryLICEVN5QA
        - https://mega.nz/file/yZ8QBKQA#-KYTYNJWzEYwgEIg8Wze-r0ayS7YaZ_Sh9GlQciEFmY
        - https://mega.nz/file/XAEiwDIQ#JxUBMC6ezmB90LVyWIrhk_WMIdN3S8uw1zssHXLbZQ4
        - https://mega.nz/file/zMsHTLwC#VokZa3RyrQOOp0dmxcY1uI1wxZ8o7TnfHiA0fe1qm8s
        - https://mega.nz/file/2QsWFYwA#ZMVZzrUGyYs1XF-olyFv-bHZt1q4MJYahtZ6RMQ7oII
        - https://mega.nz/file/KNli3Bya#Q4YQg_OySDc2Xex-MX06S61GjtXdM764hrQxgkJKqA0
        - https://mega.nz/file/LJVXFYbJ#ZMVZzrUGyYs1XF-olyFv-bHZt1q4MJYahtZ6RMQ7oII
        - https://mega.nz/file/XYdXkIxT#Q4YQg_OySDc2Xex-MX06S61GjtXdM764hrQxgkJKqA0
        - https://mega.nz/file/7QsC3TCK#iY-Z1gq0i0NvqH62gwD-wyfQoBA-TV0P8vL3q3IumhA
        - https://mega.nz/file/mNFHWJJa#iY-Z1gq0i0NvqH62gwD-wyfQoBA-TV0P8vL3q3IumhA
        - https://mega.nz/file/uNthAbJJ#6vkAvBjkwz7oeO0wNkEOmXrXxzAu9NgsA4VfgJa7Rjo
        - https://mega.nz/file/zdkxXZjY#6vkAvBjkwz7oeO0wNkEOmXrXxzAu9NgsA4VfgJa7Rjo
        - https://mega.nz/file/uYdXUTpB#Da_Kof7DBAgnOsuB6_YaJ8ipAsAxItJwnNTRGNmF6CQ
    runs-on: ubuntu-latest
    steps:
    - uses: actions/cache@v3
      id: cache
      with:
        path: megatools-1.11.1.20230212-linux-x86_64
        key: megatools-1.11.1.20230212-linux-x86_64
    - name: Mega
      if: steps.cache.outputs.cache-hit != 'true'
      run: |
        curl -OL https://megatools.megous.com/builds/builds/megatools-1.11.1.20230212-linux-x86_64.tar.gz
        tar xvf *.gz
    - name: Leech
      run: |
        mkdir leech
        megatools*/megatools dl --path leech/ ${{ matrix.url }}
        cd leech
        find . -size +2G -exec split -b 1G --numeric-suffixes=1 {} {}.0 \;
        find . -size +2G -exec rm {} \;
    - name: Upload
      uses: svenstaro/upload-release-action@v2
      with:
        repo_token: ${{ secrets.GITHUB_TOKEN }}
        file: leech/*
        tag: latest
        overwrite: true
        file_glob: true
