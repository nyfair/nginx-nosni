name: leech

on:
  push:
    paths:
    - '.github/workflows/leech.yml'

jobs:
  build:
    strategy:
      fail-fast: false
      matrix:
        url:
        - https://mega.nz/file/R7F3yaYL#I84AwHpNVhvkSKn7aU0_T-6BYfQrAHglkZOu84G8n4A
        - https://mega.nz/file/VvMHmJiK#mUobbx-mJshCMgnUzsMgTpqMg5pIgMO--SBsl_LY6Mo
        - https://mega.nz/file/NWtSkRzB#f1od1BVqaM_yL_q-PUgQ63qpNrE_8xqGWvLeYdB0nxc
        - https://mega.nz/file/8CVBxZ5a#YwvV3Vha6tYm1McrqRiIuINfSJz7-q1n2cUw3qqEGbw
        - https://mega.nz/file/BPUTAIhZ#KhhFS9nNSFN2F4GYrVYp0gtAJ4ERKG23KdkEGWohqo0
        - https://mega.nz/file/cHlWWazY#pJZjhKv5mJrA7EmhQWMoWm-VZ8va-Duo5tDa2w3IRys
        - https://mega.nz/file/sCNB2ASZ#ucItXMZQdzQ2pdU0rhu1du2bHo3alHy9B4nKFcMRCbk
        - https://mega.nz/file/MXlmmAZI#gHuhiKG_-kYYYl3n_505oUO1rKZn7A0XEVoEmHsGWGE
        - https://mega.nz/file/pWNGyYLB#HVLRRnyD68A8gEoQExiLpCuzhmQNU721sz098a4uxEM
        - https://mega.nz/file/leEDiATC#ver-kU8zRK-euk7ZTgt8mXpWVpmKfcERyDhXnywVhPg
        - https://mega.nz/file/VblmERgS#3foKXDsNccgDg5cLVlnRi84LfjmeoRpN1thcxWV0LvY
        - https://mega.nz/file/xPk1AZDD#5iqNM9Wept9kBuVVJ5bC_-PcQ5FkPbSyRaGX9ozkm84
        - https://mega.nz/file/cO1nUTZZ#OBM4ENikgmHoQm_GzbwaImoAdmfc_8BHMr9yW3DjGeo
        - https://mega.nz/file/tT9DQZIL#jVTSZ1u1bx_qvXYDBELVmb-s_T6OpuwoiEFYg6IDFRY
        - https://mega.nz/file/0WlWXS6S#cs743_EsETI4mogxktLGnPNSIh7YpG09IYa2DpuA8KY
        - https://mega.nz/file/8b1SVCiD#LO6lfquh2noWDdKWId_5PyZAlRB4p7LFNxuYpKypHAE
        - https://mega.nz/file/MLVW1DiQ#S8ZCy_tLG0b-LKTy2i6LtaoENKdDmEwXJvOEE1pmoxY
        - https://mega.nz/file/1CsW1ZxB#XicUwQs3xIS5tCMQdZY938EHn5s-BFrXiKBCrU0-IGQ
        - https://mega.nz/file/4fdRDAZI#Z3rRPC62jSJGciPL3_xGwiu8yxpArTB6HQ04oS1GWfE
        - https://mega.nz/file/EbFiTJoR#taPyQQ64ezi6mrbWcVcXvfPCVMBEG5yeoAjEgmJYCr4
        - https://mega.nz/file/lasBiBLC#h2_OkrMMgguxtPUPeLHj3_OfTk9hNRvV9oL1GD8go_U
        - https://mega.nz/file/pe1gjRTB#F83jTtg33q5aKs_M4Y5Kbgk3RP1kBjy1xXB48gMNULw
        - https://mega.nz/file/pGkURJjA#7zG8RVK_1B6b4Y18ng-mJaX95FfGhkt8TYQeMaIEot8
        - https://mega.nz/file/RG9A0TqZ#K6f5uQ48Na8nAgizlVeDX48opChftsnT4kAL9PoTo2w
        - https://mega.nz/file/5esn3JYY#yXS33hJOBrgmlN8vAK9yK6SSpLkq_w_a6mXNzsJtNyE
        - https://mega.nz/file/kfMRxDBK#xWOGR0xYmzQ8p1ZNDqTFoNncoZbt6I90HOFidmSUmtA
        - https://mega.nz/file/lL9kRJzA#V7KCj3J90MSmjY9pfaRhIj38FBXavGubOibfLvtCMzw
        - https://mega.nz/file/4T11UBwZ#jHY_FCURROZ9j_CdYYedQP-v23ge9A0PuSQN5iQp_O8
        - https://mega.nz/file/tHlhWLjC#PkQuogfnqx_HREw8I9p6gwdRGENqnsGfS4e4W-7RTdw
        - https://mega.nz/file/VaNnFJDD#lb_Qb5zGfj8x3U-95qjgxkXH-_BeYDfY5w-l9eqp5As
        - https://mega.nz/file/Vb90GTbI#wVRQaKoDOatbjlfUj1dEAi5nvqpbl2DtC7jISLBfgt4
        - https://mega.nz/file/8TtTDCpT#Lmqlwt0PvnfvSDi2TWZ2QJlDCTiO_2RZmal1zEOZhCE
        - https://mega.nz/file/AP8hyL6B#2ymk_tCAfPwHPcZ4_36WWp_Z85Z3UI2aWcPUPBD3WCM
        - https://mega.nz/file/UXEEEKqS#5unZLiKBYVNUwQHeV_JXAdKmuhetys4lONpbe6XworM
        - https://mega.nz/file/YbFzDJpI#MUkw6DKqlcBCTbFIuY-2gBwow8x8abkBzoLcYXHOGVc
        - https://mega.nz/file/ZbUHALpC#a6T14Vkg4Unz2KZ9ijEZU6rC_NE1T_cMsimpcQrvrS8
        - https://mega.nz/file/8HskCK7T#mWn8NmFO9oJThTlseMy7RyF0uFL5TU1RAD9Csp58fd0
        - https://mega.nz/file/IWExnTSK#eFD246JysIV6SizweMNaAQmF9IJdvPKVNbjhycXE2S8
        - https://mega.nz/file/0PF3FTJC#PUgN11GHKlbuGlTrop3-Jv5YExAMXZQUvWu3COHUMFg
        - https://mega.nz/file/dKdAUKqI#3j65XHfUgMjKlwniaXOtuilmT1G3CRbiI-tDwQdA--s
        - https://mega.nz/file/dTlCHIRR#oDs5Gaz4YXvUuvVxTdKKVeI8c6flFU2DULwdlerim-U
    runs-on: ubuntu-latest
    steps:
    - uses: actions/cache@v4
      id: cache
      with:
        path: megatools-1.11.1.20230212-linux-x86_64
        key: megatools-1.11.1.20230212-linux-x86_64
    - name: Mega
      if: steps.cache.outputs.cache-hit != 'true'
      run: |
        curl -OL https://megatools.megous.com/builds/builds/megatools-1.11.1.20230212-linux-x86_64.tar.gz
        tar xvf *.gz
    - name: Leech
      run: |
        mkdir leech
        megatools*/megatools dl --path leech/ ${{ matrix.url }}
        cd leech
        find . -size +1960M -exec split -b 1G --numeric-suffixes=1 {} {}.0 \;
        find . -size +1960M -exec rm {} \;
    - name: Upload
      uses: svenstaro/upload-release-action@v2
      with:
        repo_token: ${{ secrets.GITHUB_TOKEN }}
        file: leech/*
        tag: latest
        overwrite: true
        file_glob: true
