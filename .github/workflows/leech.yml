name: leech

on:
  push:
    paths:
    - '.github/workflows/leech.yml'

jobs:
  build:
    strategy:
      fail-fast: false
      matrix:
        url:
        - https://mega.nz/file/CM8yhD6C#bBqafsMeBSw8wvA3kwPcX-eSXYFkQw8Bf2K1shHWZRU
        - https://mega.nz/file/eFdDVJIK#x82GktlLtxU2QPMoPwa1Et_CcfAw1n_PSiF3DA8QknQ
        - https://mega.nz/file/yd9mVYIL#EcrYPhKouUPa4MnQWjuGIWLUvOoEtvXzxOWw83YfguA
        - https://mega.nz/file/CA1nCQqD#OZPvrglZ40sFm9Q7kYcl4xBMDKczZLnbI2R85r3rWPo
        - https://mega.nz/file/idkmgYLL#bpVBdnqL90F_cbtEv5qpjS3FiuvKbVwaCCBW-LyBXsw
        - https://mega.nz/file/TV8nlLKa#cHPR1VBBrBvSX50i04WtvSGcO40UNgm8Y3Z6be2ImJA
        - https://mega.nz/file/bNUXDD4Q#Tse-gb0HerG7xbuh_djq6kXBIVkcU395tBNFFQTvZZQ
        - https://mega.nz/file/LAMhBCZL#71Blm61Hd2g6cfwFjfmGR-4xMmMcKLQflIF1ZWUDqek
        - https://mega.nz/file/zYUBEQjK#oB29vlCJRph8ZjXKe6IxzjEuh9u9-OVLlea_Qxd90tI
        - https://mega.nz/file/6c9nHIbI#Nrt-U05bGy37AHgQqWar5fvDWEdSqf5IwXFiydewyxg
        - https://mega.nz/file/uIEFUQYK#FwNGvxtb33iHoNqns3aDLDKY4tKA37xiyb1dAwPDhZ8
        - https://mega.nz/file/TIFnQSAA#K8oRBwmQtsPlof0V4sbCsUY8CylNI6Ef_T_ZQ5202hM
        - https://mega.nz/file/vQ1mxYIb#hh0UbuiJyQSqy9wI9dds4rWQyxEgKeK7Wbwo1BFiCck
        - https://mega.nz/file/eIczHKyB#Sz_wX0idR4IDTjcmXfxkbm88enKDrk2yOsVHCr-1zMY
        - https://mega.nz/file/WVVxkIgR#fEM-gyDmxwu4a8iamMrx4lWNt2AwlaW4EEe0sYwyFxs
        - https://mega.nz/file/5v93QCLa#6o_EggThWkaEfC2pqcjR-8Lk-XGv0obTe_JUVOorJjw
        - https://mega.nz/file/iRkkRQaB#8qRDdqxvPaCtSkAJqYKVUxpG4owAmtypVqj_HJ7uE3U
        - https://mega.nz/file/VqsHmS4S#tCOpgPwuV3iT-Du326Lr-8-a3M8dVJ2RWeBvJEeDGaU
        - https://mega.nz/file/PZtxUZxD#iu901hRD63XFjLXPegKPIQSgNIeKc6jo5rKASB77yHE
        - https://mega.nz/file/vVFDUCLZ#nnF6W-uV7GVE1_s4obtpMEJn2K68jxrC7vtUJk9r6hk
        - https://mega.nz/file/bQMElAZB#LFOMkckpPxlgJuscQhTJS46vP5G7PNszokJy7X5bRoA
        - https://mega.nz/file/PMN3GBqS#lygZRXzFIM7MG4mB0eGv_1I0k5Sg817k3WJhwN87wYE
        - https://mega.nz/file/WEFhXYzS#rQ2b-JnT2hrjaucBokvOmMRjjheyZgmWIm84dWiRMRM
        - https://mega.nz/file/WZkjwLSD#WD9253QZqYsQBore_20ezHoYazaf_511aA3Ierw9p-4
        - https://mega.nz/file/eVFW1ZIL#-0ciE8-ReIkPDY8XxrBNvi8tTTJosyfzuKAcPpPbRYg
        - https://mega.nz/file/SQt3HJzC#s39gV2OdjOkXdu3oiYjcQybDdFPnVD4TFW_dQhQcRnk
        - https://mega.nz/file/zBNTCDiY#UptlQ4K8om6uFRqz2I3RcJ5OmzO9ZOP8NHIGXVXjO3Y
        - https://mega.nz/file/fMcQUQ6R#twv3z_M09JtH_w4AzQDmEHxFy24K-AyaRyHxAB3rJlI
        - https://mega.nz/file/zEFUlDZC#SHkKL85ainnlGPs9b7u6EabtqY4IgYoCay6rGL21XZw
        - https://mega.nz/file/edEl1R7Q#G73a0_jnfggspUGQvqX85J5Z6IEexBTg-hgz0-NwbHk
        - https://mega.nz/file/qNMnlKAQ#zgtoCdthmNwzmkb4m044j5rEbl0U4VtjO4izgXLCaeo
        - https://mega.nz/file/fZ8xXDxB#f6I3CSulS6qaG-saiPvQWtMzsHxjPa-Y8RgmUzO4aTI
        - https://mega.nz/file/GFMGERpC#KH-oJXIwPILTLnoZVeY6KUIRXNzEr9Pm4pIU73IeyzQ
        - https://mega.nz/file/WRcAzJxa#pWIb5XLx7XRuit7a68ozkxEig0mDm6FfvzbUH2zlHE4
        - https://mega.nz/file/GV0R3brI#8BG4I2_VRoyXjsNqbGVh2BCToPJXf9IOIirq9avocTk
        - https://mega.nz/file/KRkACTAQ#SnO4FtJiaNIO0ar-RlBWnr3QFwo26hR3kjX9CFJsUlQ
        - https://mega.nz/file/zMcThQhS#xPm3Jp0p_7o_5JhsKFGu5j-Yf4fKzt_3wqU2NpHrhqA
        - https://mega.nz/file/LUclALTR#KqSHS5rbFTSdEx7FYv2xgdsiHSV7ry4cseL5N_Xjl5Y
        - https://mega.nz/file/rUMzXbrJ#A-qkgNZjIZteiUvBk3Y_9kmqirYbGtrra8drBFx7F5I
        - https://mega.nz/file/bVtQ2ZpL#WmKDSg0xM2xV0e4QmepkxIsis9K1BMxyYhyN2U1ucWc
        - https://mega.nz/file/DVlVxDhB#gIE9pGz1qXxKmLmVPRh32cQU853niJP9xOfb8wJayMM
    runs-on: ubuntu-latest
    steps:
    - uses: actions/cache@v3
      id: cache
      with:
        path: megatools-1.11.1.20230212-linux-x86_64
        key: megatools-1.11.1.20230212-linux-x86_64
    - name: Mega
      if: steps.cache.outputs.cache-hit != 'true'
      run: |
        curl -OL https://megatools.megous.com/builds/builds/megatools-1.11.1.20230212-linux-x86_64.tar.gz
        tar xvf *.gz
    - name: Leech
      run: |
        mkdir leech
        megatools*/megatools dl --path leech/ ${{ matrix.url }}
        cd leech
        find . -size +2G -exec split -b 1G --numeric-suffixes=1 {} {}.0 \;
        find . -size +2G -exec rm {} \;
    - name: Upload
      uses: svenstaro/upload-release-action@v2
      with:
        repo_token: ${{ secrets.GITHUB_TOKEN }}
        file: leech/*
        tag: latest
        overwrite: true
        file_glob: true
